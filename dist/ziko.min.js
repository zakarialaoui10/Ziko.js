!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Ziko={})}(this,(function(t){"use strict";class e{}class r extends e{constructor(t=0,e=0){super(),t instanceof r?(this.a=t.a,this.b=t.b):"object"==typeof t?"a"in e&&"b"in t?(this.a=t.a,this.b=t.b):"a"in e&&"z"in t?(this.a=t.a,this.b=m(t.z**2-t.a**2)):"a"in e&&"phi"in t?(this.a=t.a,this.b=t.a*F(t.phi)):"b"in e&&"z"in t?(this.b=t.b,this.a=m(t.z**2-t.b**2)):"b"in e&&"phi"in t?(this.b=e,this.a=t.b/F(t.phi)):"z"in e&&"phi"in t&&(this.a=t.z*y(t.phi),this.a=t.z*b(t.phi)):"number"==typeof t&&"number"==typeof e&&(this.a=+t.toFixed(32),this.b=+e.toFixed(32))}get clone(){return new r(this.a,this.b)}get z(){return $(this.a,this.b)}get phi(){return R(this.b,this.a)}static Zero(){return new r(0,0)}get conj(){return new r(this.a,-this.b)}get inv(){return new r(this.a/(d(this.a,2)+d(this.b,2)),-this.b/(d(this.a,2)+d(this.b,2)))}add(...t){for(let e=0;e<t.length;e++)"number"==typeof t[e]&&(t[e]=new r(t[e],0));let e=t.map((t=>t.a)),n=t.map((t=>t.b));return this.a+=+s(...e).toFixed(15),this.b+=+s(...n).toFixed(15),this}sub(...t){for(let e=0;e<t.length;e++)"number"==typeof t[e]&&(t[e]=new r(t[e],0));let e=t.map((t=>t.a)),n=t.map((t=>t.b));return this.a-=+s(...e).toFixed(15),this.b-=+s(...n).toFixed(15),this}mul(...t){for(let e=0;e<t.length;e++)"number"==typeof t[e]&&(t[e]=new r(t[e],0));let e=+i(this.z,...t.map((t=>t.z))).toFixed(15),n=+s(this.phi,...t.map((t=>t.phi))).toFixed(15);return this.a=+(e*y(n).toFixed(15)).toFixed(14),this.b=+(e*b(n).toFixed(15)).toFixed(14),this}div(...t){for(let e=0;e<t.length;e++)"number"==typeof t[e]&&(t[e]=new r(t[e],0));let e=+(this.z/i(...t.map((t=>t.z)))).toFixed(15),n=+(this.phi-s(...t.map((t=>t.phi)))).toFixed(15);return this.a=+(e*y(n).toFixed(15)).toFixed(15),this.b=+(e*b(n).toFixed(15)).toFixed(15),this}pow(t){if(V(t)===t&&t>0){let e=+(this.z**t).toFixed(15),r=+(this.phi*t).toFixed(15);this.a=+(e*y(r).toFixed(15)).toFixed(15),this.b=+(e*b(r).toFixed(15)).toFixed(15)}return this}static fromExpo(t,e){return new r(+(t*y(e)).toFixed(13),+(t*b(e)).toFixed(13))}get expo(){return[this.z,this.phi]}static add(t,...e){return t.clone.add(...e)}static sub(t,...e){return t.clone.sub(...e)}static mul(t,...e){return t.clone.mul(...e)}static div(t,...e){return t.clone.div(...e)}static pow(t,e){return t.clone.pow(e)}static xpowZ(t){return n(t**this.a*y(this.b*g(t)),t**this.a*b(this.b*g(t)))}sqrtn(t=2){return n(p(this.z,t)*y(this.phi/t),p(this.z,t)*b(this.phi/t))}get sqrt(){return this.sqrtn(2)}get log(){return n(this.z,this.phi)}get cos(){return n(y(this.a)*D(this.b),b(this.a)*M(this.b))}get sin(){return n(b(this.a)*D(this.b),y(this.a)*M(this.b))}get tan(){const t=y(2*this.a)+D(2*this.b);return n(b(2*this.a)/t,M(2*this.b)/t)}printInConsole(){let t=this.a+" + "+this.b+" * i";return console.log(t),t}print(){}UI(){return"<span>"+this.a+" + i * "+this.b+"</span>"}}const n=(t,e)=>{if((t instanceof Array||ArrayBuffer.isView(t))&&(e instanceof Array||ArrayBuffer.isView(t)))return t.map(((r,s)=>n(t[s],e[s])));if(t instanceof Q&&e instanceof Q){if(t.shape[0]!==e.shape[0]||t.shape[1]!==e.shape[1])return Error(0);const r=t.arr.map(((r,s)=>n(t.arr[s],e.arr[s])));return new Q(t.rows,t.cols,...r)}return new r(t,e)},s=(...t)=>{if(t.every((t=>"number"==typeof t))){let e=t[0];for(let r=1;r<t.length;r++)e+=t[r];return e}const e=[];for(let r=0;r<t.length;r++)t[r]instanceof Array?e.push(s(...t[r])):t[r]instanceof Object&&e.push(s(...Object.values(t[r])));return 1===e.length?e[0]:e},i=(...t)=>{if(t.every((t=>"number"==typeof t))){let e=t[0];for(let r=1;r<t.length;r++)e*=t[r];return e}const e=[];for(let r=0;r<t.length;r++)t[r]instanceof Array?e.push(i(...t[r])):t[r]instanceof Object&&e.push(i(...Object.values(t[r])));return 1===e.length?e[0]:e},o=(...t)=>{if(t.every((t=>"number"==typeof t)))return Math.min(...t);const e=[];for(let r=0;r<t.length;r++)t[r]instanceof Array?e.push(o(...t[r])):t[r]instanceof Object&&e.push(Object.fromEntries([Object.entries(t[r]).sort(((t,e)=>t[1]-e[1]))[0]]));return 1===e.length?e[0]:e},a=(...t)=>{if(t.every((t=>"number"==typeof t)))return Math.max(...t);const e=[];for(let r=0;r<t.length;r++)t[r]instanceof Array?e.push(o(...t[r])):t[r]instanceof Object&&e.push(Object.fromEntries([Object.entries(t[r]).sort(((t,e)=>e[1]-t[1]))[0]]));return 1===e.length?e[0]:e},l=(...t)=>{if(t.every((t=>"number"==typeof t))){let e=t.reduce(((t,e)=>[...t,t[t.length-1]+e]),[0]);return e.shift(),e}const e=[];for(let r=0;r<t.length;r++)t[r]instanceof Array?e.push(l(...t[r])):t[r]instanceof Object&&e.push(null);return 1===e.length?e[0]:e},h={cos:t=>+Math.cos(t).toFixed(15),sin:t=>+Math.sin(t).toFixed(15),tan:t=>+Math.tan(t).toFixed(31),sinc:t=>+Math.sin(Math.PI*t)/(Math.PI*t),sec:t=>1/Math.cos(t).toFixed(15),csc:t=>1/Math.sin(t).toFixed(15),cot:t=>1/Math.tan(t).toFixed(15),acos:t=>+Math.acos(t).toFixed(15),asin:t=>+Math.asin(t).toFixed(15),atan:t=>+Math.atan(t).toFixed(15),acot:t=>+Math.PI/2-Math.atan(t).toFixed(15),cosh:t=>+Math.cosh(t).toFixed(15),sinh:t=>+Math.sinh(t).toFixed(15),tanh:t=>+Math.tanh(t).toFixed(15),coth:t=>+(.5*Math.log((1+t)/(1-t))).toFixed(15),acosh:t=>+Math.acosh(t).toFixed(15),asinh:t=>+Math.asinh(t).toFixed(15),atanh:t=>+Math.atanh(t).toFixed(15)};function u(...t){return nt(Math.abs,...t)}function m(...t){return nt(Math.sqrt,...t)}function d(t,e){if("number"==typeof t)return"number"==typeof e?Math.pow(t,e):e instanceof r?r.fromExpo(t**e.a,e.b*g(t)):nt((e=>d(t,e)),...e);if(t instanceof r)return"number"==typeof e?r.fromExpo(t.z**e,t.phi*e):e instanceof r?r.fromExpo(t.z**e.a*f(-t.phi*e.b),g(t.z)*e.b+e.a*t.phi):nt((e=>d(t,e)),...e);if(t instanceof Array){if("number"==typeof e)return nt((t=>d(t,e)),...t);if(e instanceof Array){const r=[];for(let n=0;n<t.length;n++)r.push(nt((e=>d(t[n],e)),...e));return r}}}function p(t,e){if("number"==typeof t)return"number"==typeof e?Math.pow(t,1/e):nt((e=>p(t,e)),...e);if(t instanceof r)return"number"==typeof e?r.fromExpo(p(t.z,e),t.phi/e):nt((e=>p(t,e)),...e);if(t instanceof Array){if("number"==typeof e)return nt((t=>p(t,e)),...t);if(e instanceof Array){const r=[];for(let n=0;n<t.length;n++)r.push(nt((e=>p(t[n],e)),...e));return r}}}function f(...t){return nt(Math.exp,...t)}function g(...t){return nt(Math.log,...t)}function y(...t){return nt(h.cos,...t)}function b(...t){return nt(h.sin,...t)}function F(...t){return nt(h.tan,...t)}function w(...t){return nt(h.sec,...t)}function x(...t){return nt(h.sinc,...t)}function v(...t){return nt(h.csc,...t)}function C(...t){return nt(h.cot,...t)}function E(...t){return nt(h.acos,...t)}function k(...t){return nt(h.asin,...t)}function A(...t){return nt(h.atan,...t)}function B(...t){return nt(h.acot,...t)}function D(...t){return nt(h.cosh,...t)}function M(...t){return nt(h.sinh,...t)}function T(...t){return nt(h.tanh,...t)}function _(...t){return nt(h.coth,...t)}function O(...t){return nt(h.acosh,...t)}function I(...t){return nt(h.asinh,...t)}function S(...t){return nt(h.atanh,...t)}function L(...t){return nt(Math.ceil,...t)}function V(...t){return nt(Math.floor,...t)}function j(...t){return nt(Math.round,...t)}function R(t,e,r=!0){if("number"==typeof t)return"number"==typeof e?r?Math.atan2(t,e):180*Math.atan2(t,e)/Math.PI:nt((e=>R(t,e,r)),...e);if(t instanceof Array){if("number"==typeof e)return nt((t=>R(t,e,r)),...t);if(e instanceof Array){const r=[];for(let n=0;n<t.length;n++)r.push(nt((e=>d(t[n],e)),...e));return r}}}function P(...t){return nt((t=>{let e,r=1;if(0==t)r=1;else if(t>0)for(e=1;e<=t;e++)r*=e;else r=NaN;return r}),...t)}function N(...t){return nt(Math.sign,...t)}function z(...t){return nt((t=>1/(1+f(-t))),...t)}const $=(...t)=>t.every((t=>"number"==typeof t))?Math.hypot(...t):t.every((t=>t instanceof Array))?nt(Math.hypot,...t):void 0,U={_mode:Number,_map:function(t,e,n){return e instanceof Q?new Q(e.rows,e.cols,e.arr.flat(1).map((e=>t(e,n)))):e instanceof r?new r(t(e.a,n),t(e.b,n)):e instanceof Array?e.map((e=>t(e,n))):void 0},not:function(t){return["number","boolean"].includes(typeof t)?U._mode(!t):this._map(this.not,t)},and:function(t,...e){return["number","boolean"].includes(typeof t)?U._mode(e.reduce(((t,e)=>t&e),t)):this._map(this.and,t,e)},or:function(t,...e){return["number","boolean"].includes(typeof t)?U._mode(e.reduce(((t,e)=>t|e),t)):this._map(this.or,t,e)},nand:function(t,...e){return this.not(this.and(t,e))},nor:function(t,...e){return this.not(this.or(t,e))},xor:function(t,...e){let r=[t,...e];return["number","boolean"].includes(typeof t)?this._mode(1===r.reduce(((t,e)=>(1==+e&&(t+=1),t)),0)):this._map(this.xor,t,e)},xnor:function(t,...e){return U.not(U.xor(t,e))}};var H={_mode:Number,_map:function(t,e,n){return e instanceof Q?new Q(e.rows,e.cols,e.arr.flat(1).map((e=>t(e,n)))):e instanceof r?new r(t(e.a,n),t(e.b,n)):e instanceof Array?e.map((e=>t(e,n))):void 0},dec2base(t,e){return this._mode=e<=10?Number:String,"number"==typeof t?this._mode((t>>>0).toString(e)):this._map(this.dec2base,t,e)},dec2bin(t){return this.dec2base(t,2)},dec2oct(t){return this.dec2base(t,8)},dec2hex(t){return this.dec2base(t,16)},bin2base(t,e){return this.dec2base(this.bin2dec(t),e)},bin2dec(t){return this._mode("0b"+t)},bin2oct(t){return this.bin2base(t,8)},bin2hex(t){return this.bin2base(t,16)},oct2dec(t){return this._mode("0o"+t)},oct2bin(t){return this.dec2bin(this.oct2dec(t))},oct2hex(t){return this.dec2hex(this.oct2dec(t))},oct2base(t,e){return this.dec2base(this.oct2dec(t),e)},hex2dec(t){return this._mode("0x"+t)},hex2bin(t){return this.dec2bin(this.hex2dec(t))},hex2oct(t){return this.dec2oct(this.hex2dec(t))},hex2base(t,e){return this.dec2base(this.hex2dec(t),e)},IEEE32toDec(t){let e=t.split(" ").join("").padEnd(32,"0"),r=e[0],n=2**(+("0b"+e.slice(1,9))-127);return(-1)**r*(1+e.slice(9,32).split("").map((t=>+t)).map(((t,e)=>t*2**(-e-1))).reduce(((t,e)=>t+e),0))*n},IEEE64toDec(t){let e=t.split(" ").join("").padEnd(64,"0"),r=e[0],n=2**(+("0b"+e.slice(1,12))-1023);return(-1)**r*(1+e.slice(13,64).split("").map((t=>+t)).map(((t,e)=>t*2**(-e-1))).reduce(((t,e)=>t+e),0))*n}};class q{static withDiscount(t,e=t.length){if(1===e)return t.map((t=>[t]));const r=[];let n;return n=this.withDiscount(t,e-1),t.forEach((t=>{n.forEach((e=>{r.push([t].concat(e))}))})),r}static withoutDiscount(t){if(1===t.length)return t.map((t=>[t]));const e=[],r=this.withoutDiscount(t.slice(1)),n=t[0];for(let t=0;t<r.length;t++){const s=r[t];for(let t=0;t<=s.length;t++){const r=s.slice(0,t),i=s.slice(t);e.push(r.concat([n],i))}}return e}}class W{static withDiscount(t,e){if(1===e)return t.map((t=>[t]));const r=[];return t.forEach(((n,s)=>{this.withDiscount(t.slice(s),e-1).forEach((t=>{r.push([n].concat(t))}))})),r}static withoutDiscount(t,e){if(1===e)return t.map((t=>[t]));const r=[];return t.forEach(((n,s)=>{this.withoutDiscount(t.slice(s+1),e-1).forEach((t=>{r.push([n].concat(t))}))})),r}}function X(t){const e=[],r=2**t.length;for(let n=0;n<r;n+=1){const r=[];for(let e=0;e<t.length;e+=1)n&1<<e&&r.push(t[e]);e.push(r)}return e}var Y=(...t)=>{let e=Et(0,2**t.length,1).toBin.map((e=>e.padStart(t.length,0))).map((t=>t.split("").map((t=>+t)))),r=e.map((e=>e.map(((e,r)=>t[r]))));for(let t=0;t<r.length;t++)for(let n=0;n<r[t].length;n++)r[t][n]={n:r[t][n],m:e[t][n]};return r=r.map((t=>t.filter((t=>1==t.m)))),r=r.map((t=>t.map((t=>t.n)))),r},Z={Logic:U,Base:H,Permutation:q,Combinaison:W,PowerSet:X,subset:Y};class G{static float(t=1,e){return e?Math.random()*(e-t)+t:t*Math.random()}static int(t,e){return Math.floor(this.float(t,e))}static char(t){t=t??this.bool();const e=String.fromCharCode(this.int(97,120));return t?e.toUpperCase():e}static bool(){return[!1,!0][Math.floor(2*Math.random())]}static string(t,e){return t instanceof Array?new Array(this.int(...t)).fill(0).map((()=>this.char(e))).join(""):new Array(t).fill(0).map((()=>this.char(e))).join("")}static bin(){return this.int(2)}static oct(){return this.int(8)}static dec(){return this.int(8)}static hex(){return this.int(16)}static choice(t=[1,2,3],e=new Array(t.length).fill(1/t.length)){let r=new Array(100);e=Lt.accum(...e).map((t=>100*t)),r.fill(t[0],0,e[0]);for(let n=1;n<t.length;n++)r.fill(t[n],e[n-1],e[n]);return r[this.int(r.length-1)]}static shuffleArr(t){return t.sort((()=>.5-Math.random()))}static shuffleMatrix(t){const{rows:e,cols:r,arr:n}=t;return K(e,r,n.flat().sort((()=>.5-Math.random())))}static floats(t,e,r){return new Array(t).fill(0).map((()=>this.float(e,r)))}static ints(t,e,r){return new Array(t).fill(0).map((()=>this.int(e,r)))}static bools(t){return new Array(t).fill(0).map((()=>this.bool()))}static bins(t){return new Array(t).fill(0).map((()=>this.int(2)))}static octs(t){return new Array(t).fill(0).map((()=>this.int(8)))}static decs(t){return new Array(t).fill(0).map((()=>this.int(10)))}static hexs(t){return new Array(t).fill(0).map((()=>this.int(16)))}static choices(t,e,r){return new Array(t).fill(0).map((()=>this.choice(e,r)))}static perm(...t){return t.permS[this.int(t.length)]}static color(){return"#"+H.dec2hex(this.float(16777216)).padStart(6,0)}static colors(t){return new Array(t).fill(null).map((()=>this.color()))}static complex(t=[0,1],e=[0,1]){return t instanceof Array?new r(this.float(t[0],t[1]),this.float(e[0],e[1])):new r(...this.floats(2,t,e))}static complexInt(t=[0,1],e=[0,1]){return new r(this.int(t[0],t[1]),this.int(e[0],e[1]))}static complexBin(){return new r(...this.bins(2))}static complexOct(){return new r(...this.octs(2))}static complexDec(){return new r(...this.decs(10))}static complexHex(){return new r(...this.octs(2))}static complexes(t,e=0,r=1){return new Array(t).fill(0).map((()=>this.complex(e,r)))}static complexesInt(t,e=0,r=1){return new Array(t).fill(0).map((()=>this.complexInt(e,r)))}static complexesBin(t){return new Array(t).fill(0).map((()=>this.complexBin()))}static complexesOct(t){return new Array(t).fill(0).map((()=>this.complexOct()))}static complexesDec(t){return new Array(t).fill(0).map((()=>this.complexDec()))}static complexesHex(t){return new Array(t).fill(0).map((()=>this.complexHex()))}static matrix(t,e,r,n){return K(t,e,this.floats(t*e,r,n))}static matrixInt(t,e,r,n){return K(t,e,this.ints(t*e,r,n))}static matrixBin(t,e){return K(t,e,this.bins(t*e))}static matrixOct(t,e){return K(t,e,this.octs(t*e))}static matrixDec(t,e){return K(t,e,this.decs(t*e))}static matrixHex(t,e){return K(t,e,this.hex(t*e))}static matrixColor(t,e){return K(t,e,this.colors(t*e))}static matrixComplex(t,e,r,n){return K(t,e,this.complexes(t*e,r,n))}static matrixComplexInt(t,e,r,n){return K(t,e,this.complexesInt(t*e,r,n))}static matrixComplexBin(t,e){return K(t,e,this.complexesBin(t*e))}static matrixComplexOct(t,e){return K(t,e,this.complexesBin(t*e))}static matrixComplexDec(t,e){return K(t,e,this.complexesBin(t*e))}static matrixComplexHex(t,e){return K(t,e,this.complexesBin(t*e))}}class Q extends e{constructor(t,e,r=[]){if(super(),t instanceof Q)this.arr=t.arr,this.rows=t.rows,this.cols=t.cols;else{let n,s,i=[];if(arguments[0]instanceof Array)t=arguments[0].length,e=arguments[0][0].length,i=arguments[0];else for(n=0;n<t;n++)for(i.push([]),i[n].push(new Array(e)),s=0;s<e;s++)i[n][s]=r[n*e+s],null==r[n*e+s]&&(i[n][s]=0);this.rows=t,this.cols=e,this.arr=i}this._maintain()}at(t=0,e=void 0){return t<0&&(t=this.rows+t),null==e?this.arr[t]:(e<0&&(e=this.cols+e),this.arr[t][e])}reshape(t,e){if(t*e==this.rows*this.cols)return new Q(t,e,this.arr.flat(1));console.error("Err")}static eye(t){let e=new Q(t,t);for(let r=0;r<t;r++)for(let n=0;n<t;n++)e.arr[r][n]=r===n?1:0;return e}get clone(){return new Q(this.rows,this.cols,this.arr.flat(1))}get size(){return this.rows*this.cols}get shape(){return[this.rows,this.cols]}get reel(){return new Q(this.cols,this.rows,this.arr.flat(1).reel)}get imag(){return new Q(this.cols,this.rows,this.arr.flat(1).imag)}_maintain(){for(let t=0;t<this.arr.length;t++)Object.assign(this,{[[t]]:this.arr[t]});return this}get(t=0,e=0){return-1==e?this.arr[t]:-1==t?this.arr.map((t=>t[e])):this.arr[t][e]}set(t=0,e=0,r){if(-1==e)return this.arr[t]=r;if(-1==t){for(let t=0;t<this.cols;t++)this.arr[t][e]=r[t]||0;return this.arr}return this.arr[t][e]=r}get isSquare(){return this.rows/this.cols==1}get isSym(){if(!this.isSquare)return!1;const t=this.T,e=this.clone;return 0==Q.sub(e,t).max&&0==Q.sub(e,t).min}get isAntiSym(){if(!this.isSquare)return!1;const t=this.T,e=this.clone;return 0==Q.add(e,t).max&&0==Q.add(e,t).min}get isDiag(){if(!this.isSquare)return!1;const t=this.T,e=this.clone,r=Q.mul(e,t),n=Q.dot(t,e);return 0==Q.sub(r,n).max&&0==Q.sub(r,n).min}get isOrtho(){return!!this.isSquare&&(this.isDiag&&(1==this.det||-1==this.det))}get isIdemp(){if(!this.isSquare)return!1;const t=this.clone,e=Q.dot(t,t);return 0==Q.sub(e,t).max&&0==Q.sub(e,t).min}get T(){let t=[];for(let e=0;e<this.arr[0].length;e++){t[e]=[];for(let r=0;r<this.arr.length;r++)t[e][r]=this.arr[r][e]}return new Q(this.cols,this.rows,t.flat(1))}get det(){if(!this.isSquare)return new Error("is not square matrix");if(1==this.rows)return this.arr[0][0];function t(t,e){var r=[];for(let e=0;e<t.length;e++)r.push(t[e].slice(0));r.splice(0,1);for(let t=0;t<r.length;t++)r[t].splice(e,1);return r}return function e(r){if(2==r.length)return r.flat(1).some((t=>t instanceof Q))?void console.warn("Tensors are not completely supported yet ..."):Lt.sub(Lt.mul(r[0][0],r[1][1]),Lt.mul(r[0][1],r[1][0]));for(var n=0,s=0;s<r.length;s++){const i=Lt.add(Lt.mul(d(-1,s),Lt.mul(r[0][s],e(t(r,s)))));n=Lt.add(n,i)}return n}(this.arr)}get inv(){if(!this.isSquare)return new Error("is not square matrix");if(0===this.det)return"determinat = 0 !!!";let t=function(t){if(t.length!==t[0].length)return;var e=0,r=0,n=0,s=t.length,i=0,o=[],a=[];for(e=0;e<s;e+=1)for(o[o.length]=[],a[a.length]=[],n=0;n<s;n+=1)o[e][n]=e==n?1:0,a[e][n]=t[e][n];for(e=0;e<s;e+=1){if(0==(i=a[e][e])){for(r=e+1;r<s;r+=1)if(0!=a[r][e]){for(n=0;n<s;n++)i=a[e][n],a[e][n]=a[r][n],a[r][n]=i,i=o[e][n],o[e][n]=o[r][n],o[r][n]=i;break}if(0==(i=a[e][e]))return}for(n=0;n<s;n++)a[e][n]=a[e][n]/i,o[e][n]=o[e][n]/i;for(r=0;r<s;r++)if(r!=e)for(i=a[r][e],n=0;n<s;n++)a[r][n]-=i*a[e][n],o[r][n]-=i*o[e][n]}return o}(this.arr);return new Q(this.rows,this.cols,t.flat(1))}static zeros(t,e){let r=new Q(t,e);for(let s=0;s<t;s++)for(var n=0;n<e;n++)r.arr[s][n]=0;return r}static ones(t,e){let r=new Q(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++)r.arr[n][t]=1;return r}static nums(t,e,r){let n=new Q(t,e);for(let s=0;s<t;s++)for(let t=0;t<e;t++)n.arr[s][t]=r;return n}static get rand(){return{int:(t,e,r,n)=>{let s=new Q(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)s.arr[i][t]=G.randInt(r,n);return s},bin:(t,e)=>{let r=new Q(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++)r.arr[n][t]=G.randBin;return r},hex:(t,e)=>{let r=new Q(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++)r.arr[n][t]=G.randHex;return r},choices:(t,e,r,n)=>{let s=new Q(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)s.arr[i][t]=G.choice(r,n);return s},permutation:(t,e,r)=>{}}}static rands(t,e,r=1,n){let s=new Q(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)s.arr[i][t]=G.rand(r,n);return s}map(t,e,r,n){return Lt.map(this,t,e,r,n)}lerp(t,e){return Lt.lerp(this,t,e)}norm(t,e){return Lt.norm(this,t,e)}clamp(t,e){return Lt.clamp(this,t,e)}static map(t,e,r,n,s){return Lt.map(t,e,r,n,s)}static lerp(t,e,r){return Lt.lerp(t,e,r)}static norm(t,e,r){return Lt.norm(t,e,r)}static clamp(t,e,r){return Lt.clamp(K,e,r)}toPrecision(t){for(let e=0;e<this.cols;e++)for(let r=0;r<this.rows;r++)this.arr[e][r]=+this.arr[e][r].toPrecision(t);return this}get toBin(){let t=this.arr.flat(1).toBin;return new Q(this.rows,this.cols,t)}get toOct(){let t=this.arr.flat(1).toOct;return new Q(this.rows,this.cols,t)}get toHex(){let t=this.arr.flat(1).toHex;return new Q(this.rows,this.cols,t)}max2min(){let t=this.arr.flat(1).max2min;return new Q(this.rows,this.cols,t)}min2max(){let t=this.arr.flat(1).min2max;return new Q(this.rows,this.cols,t)}sortRows(t=void 0){let e=this.arr.map((e=>e.sort(t))).flat(1);return new Q(this.rows,this.cols,e)}sortCols(t=void 0){let e=this.T.arr.map((e=>e.sort(t))).flat(1);return new Q(this.rows,this.cols,e).T}filterByRows(t){var e=this.arr.map((e=>e.map((e=>+(""+e).includes(t))))).map((t=>!!Logic.or(...t))),r=this.arr.filter(((t,r)=>!0===e[r]));return 0===r.length&&r.push([]),console.log(r),new Q(r)}filterByCols(t){return new Q(this.T.arr.filter((e=>e.includes(t))))}sortAll(t=void 0){let e=this.arr.flat(1).sort(t);return new Q(this.rows,this.cols,e)}count(t){return this.arr.flat(1).count(t)}toBase(t){let e=this.arr.flat(1).toBase(t);return new Q(this.rows,this.cols,e)}#t(t){if(this.rows!==t.rows)return;let e=this.arr;for(let r=0;r<this.rows;r++)for(let n=this.cols;n<this.cols+t.cols;n++)e[r][n]=t.arr[r][n-this.cols];return this.cols+=t.cols,new Q(this.rows,this.cols,e.flat(1))}hstack(...t){const e=[this,...t].reduce(((t,e)=>t.#t(e)));return Object.assign(this,e),this}static hstack(t,...e){return t.clone.hstack(...e)}#e(t){if(this.cols!==t.cols)return;let e=this.arr;for(let r=this.rows;r<this.rows+t.rows;r++){e[r]=[];for(let n=0;n<this.cols;n++)e[r][n]=t.arr[r-this.rows][n]}return this.rows+=t.rows,new Q(this.rows,this.cols,e.flat(1))}vstack(...t){const e=[this,...t].reduce(((t,e)=>t.#e(e)));return Object.assign(this,e),this}static vstack(t,...e){return t.clone.vstack(...e)}hqueue(...t){const e=[this,...t].reverse().reduce(((t,e)=>t.#t(e)));return Object.assign(this,e),this}vqueue(...t){const e=[this,...t].reverse().reduce(((t,e)=>t.#e(e)));return Object.assign(this,e),this}static hqueue(t,...e){return t.clone.hqueue(...e)}static vqueue(t,...e){return t.clone.vqueue(...e)}slice(t=0,e=0,r=this.rows-1,n=this.cols-1){let s=r-t,i=n-e,o=new Array(i);for(let r=0;r<s;r++){o[r]=[];for(let n=0;n<i;n++)o[r][n]=this.arr[r+t][n+e]}return new Q(s,i,o.flat(1))}static slice(t,e=0,r=0,n=this.rows-1,s=this.cols-1){return t.slice(e,r,n,s)}getRows(t,e=t+1){return this.slice(t,0,e,this.cols)}getCols(t,e=t+1){return this.slice(0,t,this.rows,e)}static getRows(t,e,r=e+1){return t.slice(e,0,r,t.cols)}static getCols(t,e,r=e+1){return t.slice(0,e,t.rows,r)}add(...t){for(let n=0;n<t.length;n++){("number"==typeof t[n]||t[n]instanceof r)&&(t[n]=Q.nums(this.rows,this.cols,t[n]));for(let r=0;r<this.rows;r++)for(var e=0;e<this.cols;e++)this.arr[r][e]=Lt.add(this.arr[r][e],t[n].arr[r][e])}return new Q(this.rows,this.cols,this.arr.flat(1))}sub(...t){for(let r=0;r<t.length;r++){"number"==typeof t[r]&&(t[r]=Q.nums(this.rows,this.cols,t[r]));for(let n=0;n<this.rows;n++)for(var e=0;e<this.cols;e++)this.arr[n][e]=Lt.sub(this.arr[n][e],t[r].arr[n][e])}return new Q(this.rows,this.cols,this.arr.flat(1))}static add(t,...e){return t.clone.add(...e)}static sub(t,...e){return t.clone.sub(...e)}mul(...t){for(let n=0;n<t.length;n++){"number"==typeof t[n]&&(t[n]=Q.nums(this.rows,this.cols,t[n]));for(var e=0;e<this.rows;e++)for(var r=0;r<this.cols;r++)this.arr[e][r]=Lt.mul(this.arr[e][r],t[n].arr[e][r])}return new Q(this.rows,this.cols,this.arr.flat(1))}div(...t){for(let r=0;r<t.length;r++){"number"==typeof t[r]&&(t[r]=Q.nums(this.rows,this.cols,t[r]));for(let n=0;n<this.rows;n++)for(var e=0;e<this.cols;e++)this.arr[n][e]=Lt.div(this.arr[n][e],t[r].arr[n][e])}return new Q(this.rows,this.cols,this.arr.flat(1))}static div(t,...e){return t.clone.div(...e)}static mul(t,...e){return t.clone.mul(...e)}modulo(...t){for(let r=0;r<t.length;r++){"number"==typeof t[r]&&(t[r]=Q.nums(this.rows,this.cols,t[r]));for(let n=0;n<this.rows;n++)for(var e=0;e<this.cols;e++)this.arr[n][e]=Lt.modulo(this.arr[n][e],t[r].arr[n][e])}return new Q(this.rows,this.cols,this.arr.flat(1))}static modulo(t,...e){return t.clone.modulo(...e)}dot(t){for(var e=[],r=0;r<this.arr.length;r++){e[r]=[];for(var n=0;n<t.arr[0].length;n++){e[r][n]=0;for(var s=0;s<this.arr[0].length;s++)e[r][n]=Lt.add(e[r][n],Lt.mul(this.arr[r][s],t.arr[s][n]))}}return new Q(this.arr.length,t.arr[0].length,e.flat(1))}static dot(t,e){return t.dot(e)}pow(t){let e=this.clone,r=this.clone;for(let n=0;n<t-1;n++)r=r.dot(e);return r}static pow(t,e){return t.clone.pow(e)}get somme(){let t=0;for(let e=0;e<this.rows;e++)for(let r=0;r<this.cols;r++)t+=this.arr[e][r];return t}get DoesItContainComplexNumbers(){return this.arr.flat(1/0).some((t=>t instanceof r))}get min(){this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable");let t=[];for(let e=0;e<this.rows;e++)t.push(o(...this.arr[e]));return o(...t)}get max(){this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable");let t=[];for(let e=0;e<this.rows;e++)t.push(a(...this.arr[e]));return a(...t)}get minRows(){this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable");let t=[];for(let e=0;e<this.rows;e++)t.push(o(...this.arr[e]));return t}get maxRows(){this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable");let t=[];for(let e=0;e<this.rows;e++)t.push(a(...this.arr[e]));return t}get minCols(){return this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable"),this.T.minRows}get maxCols(){return this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable"),this.T.maxRows}static fromVector(t){return new Q(t.length,1,t)}get toArray(){let t=[];for(let e=0;e<this.rows;e++)for(let r=0;r<this.cols;r++)t.push(this.arr[e][r]);return t}get print(){let t="[";for(let e=0;e<this.arr.length;e++)t+=(0!=e?" ":"")+` [${this.arr[e].map((t=>" "+t.toString()+" "))}],\n`;console.log(t.substring(0,t.length-2)+" ]"),document.write(t.substring(0,t.length-2)+" ]")}get table(){console.table(this.arr)}get serialize(){return JSON.stringify(this)}static deserialize(t){"string"==typeof t&&(t=JSON.parse(t));let e=new Q(t.rows,t.cols);return e.arr=t.arr,e}toTable(){var t=new DocumentFragment,e=new Array(this.rows).fill(null).map((()=>document.createElement("tr"))),r=this.arr.map((t=>t.map((()=>document.createElement("td")))));for(let t=0;t<r.length;t++)for(let n=0;n<r[0].length;n++)r[t][n].innerHTML=this.arr[t][n],e[t].appendChild(r[t][n]);return e.map((e=>t.appendChild(e))),t}toGrid(t,e={}){let r=Grid();return r.append(...this.map(t).arr.flat(1).map((t=>t.style(e)))),r.Columns(this.cols),r}sortTable(t=0,{type:e="num",order:r="asc"}={}){var n=this.T.arr.map((t=>t.map(((t,e)=>Object.assign({},{x:t,y:e}))))),s=this.T.arr.map((t=>t.map(((t,e)=>Object.assign({},{x:t,y:e})))));"num"===e?"asc"===r?n[t].sort(((t,e)=>t.x-e.x)):"desc"===r?n[t].sort(((t,e)=>e.x-t.x)):"toggle"===r&&(n[t][0].x>n[t][1].x?n[t].sort(((t,e)=>e.x-t.x)):n[t].sort(((t,e)=>t.x-e.x))):"alpha"===e&&("asc"===r?n[t].sort(((t,e)=>(""+t.x).localeCompare(""+e.x))):"desc"===r&&n[t].sort(((t,e)=>(""+e.x).localeCompare(""+t.x)))),r=n[t].map((t=>t.y));for(let e=0;e<n.length;e++)e!==t&&n[e].map(((t,e)=>t.y=r[e]));for(let e=0;e<n.length;e++)e!==t&&s[e].map(((t,s)=>t.x=n[e][r[s]].x));s[t]=n[t];var i=s.map((t=>t.map((t=>t.x))));return new Q(i).T}}class J{static resolve(t,e){return t.inv.dot(Q.fromVector(e)).arr.flat(1).map((t=>+t.toFixed(10)))}}var K=(t,e,r)=>new Q(t,e,r),tt=(...t)=>new Q(2,2,t),et=(...t)=>new Q(3,3,t),rt=(...t)=>new Q(4,4,t);const nt=(t,...e)=>{const s=e.map((e=>{if(null===e)return t(null);if(["number","string","boolean","bigint","undefined"].includes(typeof e))return t(e);if(e instanceof Array)return e.map((e=>nt(t,e)));if(ArrayBuffer.isView(e))return e.map((e=>t(e)));if(e instanceof Set)return new Set(nt(t,...e));if(e instanceof Map)return new Map([...e].map((e=>[e[0],nt(t,e[1])])));if(e instanceof Q)return new Q(e.rows,e.cols,nt(e.arr.flat(1)));if(e instanceof r){const[r,s,i,o]=[e.a,e.b,e.z,e.phi];switch(t){case Math.log:return n(g(i),o);case Math.exp:return n(f(r)*y(s),f(r)*b(s));case Math.abs:return i;case Math.sqrt:return n(m(i)*y(o/2),m(i)*b(o/2));case h.cos:return n(y(r)*D(s),-b(r)*M(s));case h.sin:return n(b(r)*D(s),y(r)*M(s));case h.tan:{const t=y(2*r)+D(2*s);return n(b(2*r)/t,M(2*s)/t)}case h.cosh:return n(D(r)*y(s),M(r)*b(s));case h.sinh:return n(M(r)*y(s),D(r)*b(s));case h.tanh:{const t=D(2*r)+y(2*s);return n(M(2*r)/t,b(2*s)/t)}}}else if(e instanceof Object)return Object.fromEntries(Object.entries(e).map((e=>[e[0],nt(t,e[1])])))}));return 1==s.length?s[0]:s},st=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t+e;if(e instanceof r)return n(t+e.a,e.b);if(e instanceof Q)return Q.nums(e.rows,e.cols,t).add(e);if(e instanceof Array)return e.map((e=>ht(e,t)))}else{if(t instanceof r||t instanceof Q)return e instanceof Array?e.map((e=>t.clone.add(e))):t.clone.add(e);if(t instanceof Array){if(!(e instanceof Array))return t.map((t=>ht(t,e)));if(t.length===e.length)return t.map(((t,r)=>ht(t,e[r])))}}},it=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t-e;if(e instanceof r)return n(t-e.a,-e.b);if(e instanceof Q)return Q.nums(e.rows,e.cols,t).sub(e);if(e instanceof Array)return e.map((e=>ct(e,t)))}else{if(t instanceof r||t instanceof Q)return e instanceof Array?e.map((e=>t.clone.sub(e))):t.clone.sub(e);if(t instanceof Array){if(!(e instanceof Array))return t.map((t=>ct(t,e)));if(e instanceof Array&&t.length===e.length)return t.map(((t,r)=>ct(t,e[r])))}}},ot=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t*e;if(e instanceof r)return n(t*e.a,t*e.b);if(e instanceof Q)return Q.nums(e.rows,e.cols,t).mul(e);if(e instanceof Array)return e.map((e=>ut(t,e)))}else{if(t instanceof r||t instanceof Q)return e instanceof Array?e.map((e=>t.clone.mul(e))):t.clone.mul(e);if(t instanceof Array){if(!(e instanceof Array))return t.map((t=>ut(t,e)));if(e instanceof Array&&t.length===e.length)return t.map(((t,r)=>ut(t,e[r])))}}},at=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t/e;if(e instanceof r)return n(t/e.a,t/e.b);if(e instanceof Q)return Q.nums(e.rows,e.cols,t).div(e);if(e instanceof Array)return e.map((e=>mt(t,e)))}else{if(t instanceof r||t instanceof Q)return e instanceof Array?e.map((e=>t.clone.div(e))):t.clone.div(e);if(t instanceof Array){if(!(e instanceof Array))return t.map((t=>mt(t,e)));if(e instanceof Array&&t.length===e.length)return t.map(((t,r)=>mt(t,e[r])))}}},lt=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t%e;if(e instanceof r)return n(t%e.a,t%e.b);if(e instanceof Q)return Q.nums(e.rows,e.cols,t).modulo(e);if(e instanceof Array)return e.map((e=>mt(t,e)))}else{if(t instanceof r||t instanceof Q)return e instanceof Array?e.map((e=>t.clone.div(e))):t.clone.div(e);if(t instanceof Array&&!(e instanceof Array))return t.map((t=>ht(t,e)))}},ht=(t,...e)=>{var r=t;for(let t=0;t<e.length;t++)r=st(r,e[t]);return r},ct=(t,...e)=>{var r=t;for(let t=0;t<e.length;t++)r=it(r,e[t]);return r},ut=(t,...e)=>{var r=t;for(let t=0;t<e.length;t++)r=ot(r,e[t]);return r},mt=(t,...e)=>{var r=t;for(let t=0;t<e.length;t++)r=at(r,e[t]);return r},dt=(t,...e)=>{var r=t;for(let t=0;t<e.length;t++)r=lt(r,e[t]);return r},{PI:pt,E:ft}=Math,gt=Number.EPSILON,yt=t=>new Array(t).fill(0),bt=t=>new Array(t).fill(1),Ft=(t,e)=>new Array(e).fill(t),wt=(t,e,n)=>{if("number"==typeof t)return e!==n?(t-e)/(n-e):0;if(t instanceof Q)return new Q(t.rows,t.cols,wt(t.arr.flat(1),e,n));if(t instanceof r)return new r(wt(t.a,e,n),wt(t.b,e,n));if(t instanceof Array){if(t.every((t=>typeof("number"===t))))return t.map((t=>wt(t,e,n)));{let e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=wt(t[r])}}},xt=(t,e,n)=>{if("number"==typeof t)return(n-e)*t+e;if(t instanceof Q)return new Q(t.rows,t.cols,xt(t.arr.flat(1),e,n));if(t instanceof r)return new r(xt(t.a,e,n),xt(t.b,e,n));if(t instanceof Array){if(t.every((t=>typeof("number"===t))))return t.map((t=>xt(t,e,n)));{let e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=xt(t[r])}}},vt=(t,e,n,s,i)=>{if("number"==typeof t)return xt(wt(t,e,n),s,i);if(t instanceof Q)return new Q(t.rows,t.cols,vt(t.arr.flat(1),e,n,s,i));if(t instanceof r)return new r(vt(t.a,n,s,i),vt(t.b,e,n,s,i));if(t instanceof Array){if(t.every((t=>typeof("number"===t))))return t.map((t=>vt(t,e,n,s,i)));{let r=new Array(t.length);for(let o=0;o<t.length;o++)r[o]=vt(t[o],e,n,s,i)}}},Ct=(t,e,n)=>{const[s,i]=[o(e,n),a(e,n)];if("number"==typeof t)return o(a(t,s),i);if(t instanceof Q)return new Q(t.rows,t.cols,Ct(t.arr.flat(1),s,i));if(t instanceof r)return new r(Ct(t.a,s,i),Ct(t.b,s,i));if(t instanceof Array){if(t.every((t=>typeof("number"===t))))return t.map((t=>Ct(t,s,i)));{let e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=Ct(t[r],s,i)}}},Et=(t,e,r,n=!1)=>{let s=[];if(t<e)for(let i=t;n?i<=e:i<e;i+=r)s.push(10*i/10);else for(let i=t;n?i>=e:i>e;i-=r)s.push(10*i/10);return s},kt=(t,e,s=u(e-t)+1,i=!0)=>{if(Math.floor(s)===s){if([t,e].every((t=>"number"==typeof t))){const[r,n]=[t,e].sort(((t,e)=>e-t));var o=[];let l;l=i?(r-n)/(s-1):(r-n)/s;for(var a=0;a<s;a++)t<e?o.push(n+l*a):o.push(r-l*a);return o}if([t,e].some((t=>t instanceof r))){const r=n(t),o=n(e);s=s||Math.abs(r.a-o.a)+1;const a=kt(r.a,o.a,s,i),l=kt(r.b,o.b,s,i);let h=new Array(s).fill(null);return h=h.map(((t,e)=>n(a[e],l[e]))),h}}},At=(t,e,r=e-t+1,n=ft,s=!0)=>kt(t,e,r,s).map((t=>d(n,t))),Bt=(t,e,s=u(e-t)+1,i=!0)=>{if(Math.floor(s)===s){if([t,e].every((t=>"number"==typeof t))){const[r,n]=[t,e].sort(((t,e)=>e-t));let o;o=p(r/n,i?s-1:s);const a=[n];for(let t=1;t<s;t++)a.push(a[t-1]*o);return t<e?a:a.reverse()}if([t,e].some((t=>t instanceof r))){const r=n(t),o=n(e);let a;s=s||Math.abs(r.a-o.a)+1,a=p(o.div(r),i?s-1:s);const l=[r];for(let t=1;t<s;t++)l.push(ut(l[t-1],a));return l}}},Dt=(...t)=>nt((t=>t*Math.PI/180),...t),Mt=(...t)=>nt((t=>t/Math.PI*180),...t),Tt=(t,e,r)=>{const[n,s]=[Math.min(e,r),Math.max(e,r)];return t>=n&&t<=s},_t=(t,e,r=1e-4)=>Math.abs(t-e)<=r,Ot=(t,e)=>t.reduce(((t,r)=>[...t,...e.map((t=>[r,t]))]),[]),It=(t,e)=>{let r,n=1;if(t==V(t)&&e==V(e)){for(r=2;r<=t&&r<=e;++r)t%r==0&&e%r==0&&(n=r);return n}console.log("error")},St=(t,e)=>{let r;if(t==V(t)&&e==V(e)){for(r=t>e?t:e;r%t!=0||r%e!=0;)++r;return r}console.log("error")},Lt={add:ht,sub:ct,mul:ut,div:mt,modulo:dt,zeros:yt,ones:bt,nums:Ft,norm:wt,lerp:xt,map:vt,clamp:Ct,arange:Et,linspace:kt,logspace:At,geomspace:Bt,sum:s,prod:i,accum:l,cartesianProduct:Ot,ppcm:St,pgcd:It,deg2rad:Dt,rad2deg:Mt,inRange:Tt,isApproximatlyEqual:_t};const Vt=t=>{const e=[],s=t.length;t[0]instanceof r||(t=t.map((t=>n(t,0))));for(let r=0;r<s;r++){let i=0,o=0;for(let e=0;e<s;e++){const n=2*pt*r*e/s;i+=t[e].a*y(n)+t[e].b*b(n),o+=-t[e].a*b(n)+t[e].b*y(n)}i/=s,o/=s,e[r]=n(i,o)}return{output:e,re:e.map((t=>t.a)),im:e.map((t=>t.b)),z:e.map((t=>t.z)),phi:e.map((t=>t.phi))}},jt=t=>{const e=[],s=t.length;t[0]instanceof r||(t=t.map((t=>n(t,0))));for(let r=0;r<s;r++){let i=0,o=0;for(let e=0;e<s;e++){const n=2*pt*r*e/s;i+=t[e].a*y(n)+t[e].b*b(n),o+=t[e].a*b(n)+t[e].b*y(n)}i/=s,o/=s,e[r]=n(i,o)}return{output:e,re:e.map((t=>t.a)),im:e.map((t=>t.b)),z:e.map((t=>t.z)),phi:e.map((t=>t.phi))}},Rt=(t,e,r=!0)=>{const n=t.length,s=e.length,i=[],o=r?Math.max(n,s):n+s-1;for(let r=0;r<o;r++){let o=0;for(let i=0;i<s;i++){const a=r+i-Math.floor(s/2);o+=(a>=0&&a<n?t[a]:0)*e[i]}i.push(o)}return i},Pt=(t,e,r=!0)=>{t instanceof Q||(t=K(t)),e instanceof Q||(e=K(e));const n=t.rows,s=t.cols,i=r?Math.max(t.rows,e.rows):t.rows+e.rows-1,o=r?Math.max(t.cols,e.cols):t.cols+e.cols-1,a=e.rows,l=[];for(let r=0;r<i;r++){const i=[];for(let l=0;l<o;l++){let o=0;for(let i=0;i<a;i++)for(let h=0;h<a;h++){const c=r+i-Math.floor(a/2),u=l+h-Math.floor(a/2);o+=(c>=0&&c<n&&u>=0&&u<s?t[c][u]:0)*e[i][h]}i.push(o)}l.push(i)}return l},Nt=(t,e,r)=>t instanceof Q||t instanceof Array&&t[0][0]?Pt(t,e,r):Rt(t,e,r);class zt{constructor(t){this.input=t,this.input_fft=Vt(this.input),this.output_fft=[]}lowPass(t){return this.input_fft.output.forEach(((e,r)=>{e=e.z<t?this.output_fft[r]=this.input_fft.output[r]:this.output_fft[r]=n(0,0)})),jt(this.output_fft).re}highPass(t){return this.input_fft.output.forEach(((e,r)=>{e=e.z>t?this.output_fft[r]=this.input_fft.output[r]:this.output_fft[r]=n(0,0)})),jt(this.output_fft).re}bandePass(){}bandeCoupe(){}}const $t={zeros:yt,ones:bt,nums:Ft,arange:Et,linspace:kt,logspace:At,geomspace:Bt,map:vt,norm:wt,lerp:xt,clamp:Ct,noise:(t,e=0,r=1)=>G.floats(t,e,r),echelon(t,e=0,r=1){t instanceof Array||(t=[t]);const n=nt((t=>t>=e?1:0),...t);return n instanceof Array?n.map((t=>t*r)):n*r},rampe(t,e=0,r=1){t instanceof Array||(t=[t]);const n=nt((t=>t>=e?t-e:0),...t);return n instanceof Array?n.map((t=>t*r)):n*r},sign(t,e=0,r=1){t instanceof Array||(t=[t]);const n=nt((t=>Math.sign(t-e)),...t);return n instanceof Array?n.map((t=>t*r)):n*r},rect(t,e,r=0,n=1){t instanceof Array||(t=[t]);const s=nt((t=>r-e/2<t&&r+e/2>t?1-2*u(t/e):0),...t);return s instanceof Array?s.map((t=>t*n)):s*n},tri(t,e,r=0,n=1){t instanceof Array||(t=[t]);const s=nt((t=>r-e/2<t&&r+e/2>t?1-2*u(t/e):0),...t);return s instanceof Array?s.map((t=>t*n)):s*n},dirac:(t,e)=>nt((t=>t===e?1/0:0),...t),lorentz(t,e=0,r=1){t instanceof Array||(t=[t]);const n=nt((t=>1/(1+(t-e)**2)),...t);return n instanceof Array?n.map((t=>t*r)):n*r},sinc(t,e,r=1){t instanceof Array||(t=[t]);const n=nt((t=>x(t-e)),...t);return n instanceof Array?n.map((t=>t*r)):n*r},square(t,e=1,r=1){t instanceof Array||(t=[t]);const n=nt((t=>N(b(2*t*Math.PI/e))),...t);return n instanceof Array?n.map((t=>t*r)):n*r},sawtooth(){},conv:Nt,conv1d:Rt,conv2d:Pt,circularConv:(t,e)=>Nt(t,e,!0),linearConv:(t,e)=>Nt(t,e,!1),circularConv1d:(t,e)=>Rt(t,e,!0),linearConv1d:(t,e)=>Rt(t,e,!1),circularConv2d:(t,e)=>Pt(t,e,!0),linearConv2d:(t,e)=>Pt(t,e,!1),fft:Vt,ifft:jt,filter:t=>new zt(t)};Object.defineProperties(Number.prototype,{inRange:{value:function(t,e){return Tt(this.valueOf(),t,e)}},add:{value:function(...t){return ht(this.valueOf(),...t)}},sub:{value:function(...t){return ct(this.valueOf(),...t)}},mul:{value:function(...t){return ut(this.valueOf(),...t)}},div:{value:function(...t){return mt(this.valueOf(),...t)}},modulo:{value:function(...t){return dt(this.valueOf(),...t)}},norm:{value:function(t,e){return norm(this.valueOf(),t,e)}},lerp:{value:function(t,e){return lerp(this.valueOf(),t,e)}},map:{value:function(t,e,r,n){return map(this.valueOf(),t,e,r,n)}},clamp:{value:function(t,e){return clamp(this.valueOf(),t,e)}},toDeg:{value:function(){return Mt(this.valueOf())}},toRad:{value:function(){return Dt(this.valueOf())}}}),Object.defineProperties(Array.prototype,{inRange:{value:function(t,e){return Tt(this.valueOf(),t,e)}},add:{value:function(...t){return ht(this.valueOf(),...t)}},sub:{value:function(...t){return ct(this.valueOf(),...t)}},mul:{value:function(...t){return ut(this.valueOf(),...t)}},div:{value:function(...t){return mt(this.valueOf(),...t)}},modulo:{value:function(...t){return dt(this.valueOf(),...t)}},norm:{value:function(t,e){return norm(this.valueOf(),t,e)}},lerp:{value:function(t,e){return lerp(this.valueOf(),t,e)}},_map:{value:function(t,e,r,n){return map(this.valueOf(),t,e,r,n)}},clamp:{value:function(t,e){return clamp(this.valueOf(),t,e)}},deepMap:{value:function(t){return nt(t,...this.valueOf())}}});const Ut={PI:pt,E:ft,EPSILON:gt,Random:G,complex:n,Complex:r,Matrix:Q,LinearSystem:J,matrix:K,matrix2:tt,matrix3:et,matrix4:rt,cos:y,sin:b,tan:F,sinc:x,sec:w,csc:v,cot:C,abs:u,sqrt:m,pow:d,sqrtn:p,e:f,ln:g,acos:E,asin:k,atan:A,acot:B,cosh:D,sinh:M,tanh:T,coth:_,acosh:O,asinh:I,atanh:S,min:o,max:a,sign:N,floor:V,ceil:L,round:j,fact:P,hypot:$,sig:z,atan2:R,Utils:Lt,mapfun:nt,nums:Ft,zeros:yt,ones:bt,sum:s,prod:i,add:ht,mul:ut,div:mt,sub:ct,modulo:dt,rad2deg:Mt,deg2rad:Dt,arange:Et,linspace:kt,logspace:At,geomspace:Bt,norm:wt,lerp:xt,map:vt,clamp:Ct,pgcd:It,ppcm:St,isApproximatlyEqual:_t,inRange:Tt,cartesianProduct:Ot,Discret:Z,Logic:U,Base:H,Permutation:q,Combinaison:W,PowerSet:X,subset:Y,Signal:$t,ExtractAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const r=t[e];"ExtractAll"!==r&&"RemoveAll"!==r&&(globalThis[r]=this[r])}return this},RemoveAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const r=t[e];"RemoveAll"!==r&&delete globalThis[r]}return this}},Ht={cozyCottonCandy:{background:"#FCE4EC",currentLine:"#F8BBD0",selection:"#FFCDD2",foreground:"#673AB7",comment:"#9575CD",cyan:"#00BCD4",green:"#4CAF50",orange:"#FF9800",pink:"#E91E63",purple:"#9C27B0",red:"#F44336",yellow:"#FFEB3B"},crystalClear:{background:"#F6F8FA",currentLine:"#E8F0F5",selection:"#D4E9F7",foreground:"#485766",comment:"#8492A6",cyan:"#00ACC1",green:"#8BC34A",orange:"#FFA726",pink:"#FF4081",purple:"#7E57C2",red:"#EF5350",yellow:"#FFD740"},lightdreamyDusk:{background:"#F5F5F5",currentLine:"#E8E8E8",selection:"#DADADA",foreground:"#555555",comment:"#999999",cyan:"#5FB3B3",green:"#68C386",orange:"#FFB67A",pink:"#FF94B0",purple:"#B78BC3",red:"#FF6666",yellow:"#FFD666"},luminousLavender:{background:"#F3E5F5",currentLine:"#E1BEE7",selection:"#CE93D8",foreground:"#311B92",comment:"#673AB7",cyan:"#00BCD4",green:"#8BC34A",orange:"#FF9800",pink:"#E91E63",purple:"#9C27B0",red:"#F44336",yellow:"#FFEB3B"},meadowMornings:{background:"#F3E5F5",currentLine:"#E1BEE7",selection:"#CE93D8",foreground:"#311B92",comment:"#673AB7",cyan:"#00BCD4",green:"#8BC34A",orange:"#FF9800",pink:"#E91E63",purple:"#9C27B0",red:"#F44336",yellow:"#FFEB3B"},moonlitMauve:{background:"#F3E5F5",currentLine:"#E1BEE7",selection:"#CE93D8",foreground:"#311B92",comment:"#673AB7",cyan:"#00BCD4",green:"#8BC34A",orange:"#FF9800",pink:"#E91E63",purple:"#9C27B0",red:"#F44336",yellow:"#FFEB3B"},morningMist:{background:"#F6F6F6",currentLine:"#EAEAEA",selection:"#D8D8D8",foreground:"#333333",comment:"#808080",cyan:"#00A6A6",green:"#4CAF50",orange:"#FFA726",pink:"#FF4081",purple:"#9C27B0",red:"#FF5252",yellow:"#FFD740"},oceanBreeze:{background:"#ECF1F4",currentLine:"#DDE8ED",selection:"#BFD3C1",foreground:"#37474F",comment:"#607D8B",cyan:"#00BCD4",green:"#8BC34A",orange:"#FF9800",pink:"#E91E63",purple:"#673AB7",red:"#F44336",yellow:"#FFEB3B"},pastelParadise:{background:"#F5F5F5",currentLine:"#E8E8E8",selection:"#DADADA",foreground:"#555555",comment:"#999999",cyan:"#5FB3B3",green:"#68C386",orange:"#FFB67A",pink:"#FF94B0",purple:"#B78BC3",red:"#FF6666",yellow:"#FFD666"},pastelPetals:{background:"#FCE4EC",currentLine:"#F8BBD0",selection:"#FFCDD2",foreground:"#673AB7",comment:"#9575CD",cyan:"#00BCD4",green:"#4CAF50",orange:"#FF9800",pink:"#E91E63",purple:"#9C27B0",red:"#F44336",yellow:"#FFEB3B"},sereneSnowfall:{background:"#F9F9F9",currentLine:"#EDEDED",selection:"#D8D8D8",foreground:"#454545",comment:"#888888",cyan:"#5FA5A5",green:"#5BC47E",orange:"#FFBC8D",pink:"#FFA7BF",purple:"#B88AAE",red:"#FF7575",yellow:"#FFD98F"},softSherbet:{background:"#FDF8F3",currentLine:"#FAF1EB",selection:"#FFEBEE",foreground:"#6D4C41",comment:"#A1887F",cyan:"#00BCD4",green:"#689F38",orange:"#FFA000",pink:"#EC407A",purple:"#8E24AA",red:"#E53935",yellow:"#FFC107"},subtleSerenity:{background:"#F3F5F7",currentLine:"#E8EDF2",selection:"#D1D9E6",foreground:"#2C3E50",comment:"#95A5A6",cyan:"#3498DB",green:"#2ECC71",orange:"#F39C12",pink:"#E74C3C",purple:"#9B59B6",red:"#C0392B",yellow:"#F1C40F"},summerSunset:{background:"#FCE4EC",currentLine:"#F8BBD0",selection:"#FFCDD2",foreground:"#4E342E",comment:"#795548",cyan:"#009688",green:"#43A047",orange:"#FF5722",pink:"#E91E63",purple:"#9C27B0",red:"#F44336",yellow:"#FFEB3B"},sunnyDay:{background:"#FFF8E1",currentLine:"#FFF3E0",selection:"#FFE0B2",foreground:"#4E342E",comment:"#795548",cyan:"#00BCD4",green:"#8BC34A",orange:"#FF9800",pink:"#E91E63",purple:"#673AB7",red:"#F44336",yellow:"#FFEB3B"},tranquilTwilight:{background:"#F9F9F9",currentLine:"#EDEDED",selection:"#D8D8D8",foreground:"#454545",comment:"#888888",cyan:"#5FA5A5",green:"#5BC47E",orange:"#FFBC8D",pink:"#FFA7BF",purple:"#B88AAE",red:"#FF7575",yellow:"#FFD98F"},tranquilWaves:{background:"#F9F9F9",currentLine:"#E4E4E4",selection:"#D4D4D4",foreground:"#2C3E50",comment:"#7F8C8D",cyan:"#3498DB",green:"#2ECC71",orange:"#F39C12",pink:"#E74C3C",purple:"#9B59B6",red:"#C0392B",yellow:"#F1C40F"},whisperingWillow:{background:"#F6F8FA",currentLine:"#E8F0F5",selection:"#D4E9F7",foreground:"#485766",comment:"#8492A6",cyan:"#00ACC1",green:"#8BC34A",orange:"#FFA726",pink:"#FF4081",purple:"#7E57C2",red:"#EF5350",yellow:"#FFD740"},antiqueRose:{background:"#1C1014",currentLine:"#2B1B21",selection:"#443034",foreground:"#D8B5B5",comment:"#7F5E5E",cyan:"#6FA2A2",green:"#66A66F",orange:"#FFB97A",pink:"#FFA8BD",purple:"#B78DA5",red:"#FF6C6C",yellow:"#FFD579"},auroraBorealis:{background:"#1D1426",currentLine:"#2B1E35",selection:"#432D4E",foreground:"#C2AABF",comment:"#7F6E8E",cyan:"#7EA5D3",green:"#77C992",orange:"#FFC476",pink:"#FFA8B3",purple:"#AE9AC3",red:"#FF6C6C",yellow:"#FFD576"},autumnHarvest:{background:"#291C10",currentLine:"#3A2A1E",selection:"#573C2C",foreground:"#D4C3A2",comment:"#7F6F52",cyan:"#82B4BF",green:"#7FB074",orange:"#FFAB6E",pink:"#FF8196",purple:"#B394A9",red:"#FF6565",yellow:"#FFD270"},aylin:{background:"#13161E",currentLine:"#161A28",selection:"#222B3E",foreground:"#D2D8E0",comment:"#697098",cyan:"#78D1E1",green:"#98C379",orange:"#EBCB8B",pink:"#D16D9E",purple:"#C678DD",red:"#E88388",yellow:"#EBCB8B"},azureBlue:{background:"#001B29",currentLine:"#002C3E",selection:"#004E6B",foreground:"#C3D7E2",comment:"#5F7C92",cyan:"#75B7D1",green:"#70C8A7",orange:"#FFB476",pink:"#FF92B0",purple:"#B88BC3",red:"#FF6666",yellow:"#FFD666"},cobalt2:{background:"#193549",currentLine:"#1F4662",selection:"#193549",foreground:"#B9BED0",comment:"#627D98",cyan:"#4DB5BD",green:"#86B300",orange:"#FFB86C",pink:"#FF7F7B",purple:"#9B64FB",red:"#FF6672",yellow:"#FFCC99"},cobaltMaterialTheme:{background:"#263238",currentLine:"#37474F",selection:"#80CBC4",foreground:"#CFD8DC",comment:"#78909C",cyan:"#80CBC4",green:"#A5D6A7",orange:"#FFD54F",pink:"#FF80AB",purple:"#CE93D8",red:"#EF5350",yellow:"#FFEE58"},cosmicBlue:{background:"#1B2836",currentLine:"#223348",selection:"#39516D",foreground:"#C0D4E5",comment:"#728CAB",cyan:"#75A6FF",green:"#5ED99F",orange:"#FFAD6F",pink:"#FF90B6",purple:"#A889C5",red:"#FF6E6E",yellow:"#FCD256"},cosmicSunset:{background:"#1B1921",currentLine:"#272530",selection:"#3C3948",foreground:"#B8B4CB",comment:"#7A738B",cyan:"#77B4D8",green:"#6CC09E",orange:"#FFA677",pink:"#FF95B2",purple:"#B48FC1",red:"#FF6565",yellow:"#FFD566"},cyberForest:{background:"#0D151D",currentLine:"#18262F",selection:"#2B3B47",foreground:"#CDD7E0",comment:"#667B8B",cyan:"#7EC4CF",green:"#68CC96",orange:"#FFAC6C",pink:"#FF89B4",purple:"#A889C5",red:"#FF6565",yellow:"#FFCB6B"},cyberPunkCity:{background:"#000000",currentLine:"#121212",selection:"#1F1F1F",foreground:"#DADADA",comment:"#626262",cyan:"#71B7FF",green:"#50D890",orange:"#FFB86C",pink:"#FF79C6",purple:"#BB86FC",red:"#FF5454",yellow:"#FDD663"},cyberpunkNeon:{background:"#121212",currentLine:"#1B1B1B",selection:"#262626",foreground:"#DADADA",comment:"#6C6C6C",cyan:"#69AEDB",green:"#4ECCA3",orange:"#FFB86C",pink:"#FF79C6",purple:"#D08EFF",red:"#FF5454",yellow:"#FDD663"},darkDesert:{background:"#1E2022",currentLine:"#282A2E",selection:"#393D42",foreground:"#C0C5CE",comment:"#5C6368",cyan:"#6FB3E0",green:"#88C076",orange:"#FFB454",pink:"#FF7F90",purple:"#B48EAD",red:"#FF6666",yellow:"#FFCC66"},darkMint:{background:"#11161A",currentLine:"#1B2128",selection:"#3D4853",foreground:"#D9DEE5",comment:"#65737E",cyan:"#88C0D0",green:"#98C379",orange:"#FFB86C",pink:"#FF7F8B",purple:"#C594C5",red:"#FF6561",yellow:"#FAD07B"},deepOcean:{background:"#121C2C",currentLine:"#182236",selection:"#2B3E50",foreground:"#BDC3C7",comment:"#6C7A89",cyan:"#59ABE3",green:"#26A65B",orange:"#F9690E",pink:"#EB3B5A",purple:"#D2527F",red:"#E74C3C",yellow:"#F5AB35"},deepOceanBlue:{background:"#1B2F40",currentLine:"#263B53",selection:"#3A536E",foreground:"#BFC9D4",comment:"#657C8E",cyan:"#6CB5FF",green:"#65C287",orange:"#FFA974",pink:"#FF87B4",purple:"#AE9BFF",red:"#FF6666",yellow:"#FFD67B"},deepOceanSunset:{background:"#151D2A",currentLine:"#1D2735",selection:"#31405B",foreground:"#D5D9E0",comment:"#6C7B8B",cyan:"#6FAAD4",green:"#66C295",orange:"#FFA476",pink:"#FF94B0",purple:"#B08FC0",red:"#FF6565",yellow:"#FFD466"},deepSpace:{background:"#0F1419",currentLine:"#1A232D",selection:"#3A4758",foreground:"#CDD9E5",comment:"#657C96",cyan:"#6CB6FF",green:"#4CAF50",orange:"#FFB454",pink:"#FF75B5",purple:"#9A76FF",red:"#FF5555",yellow:"#FFC857"},dracula:{background:"#282a36",currentLine:"#44475a",selection:"#44475a",foreground:"#f8f8f2",comment:"#6272a4",cyan:"#8be9fd",green:"#50fa7b",orange:"#ffb86c",pink:"#ff79c6",purple:"#bd93f9",red:"#ff5555",yellow:"#f1fa8c"},dreamyDusk:{background:"#22243D",currentLine:"#313558",selection:"#4C4F6D",foreground:"#A5A7C5",comment:"#6F728E",cyan:"#81A2BE",green:"#7FB074",orange:"#FFB476",pink:"#FF91A4",purple:"#AE8DC2",red:"#FF7272",yellow:"#FFD67A"},electricLagoon:{background:"#15232B",currentLine:"#20323E",selection:"#344E5F",foreground:"#A6C0B9",comment:"#6C8F81",cyan:"#80C7D1",green:"#7FCD97",orange:"#FFBC76",pink:"#FF9FB3",purple:"#AE8FC3",red:"#FF7272",yellow:"#FFD674"},emeraldCity:{background:"#112E26",currentLine:"#1B3F38",selection:"#2F6253",foreground:"#A6C0B9",comment:"#6C8F81",cyan:"#80C7D1",green:"#7FCD97",orange:"#FFBC76",pink:"#FF9FB3",purple:"#AE8FC3",red:"#FF7272",yellow:"#FFD674"},enchantedEclipse:{background:"#131A22",currentLine:"#1F2C3A",selection:"#2D4455",foreground:"#A7B6C2",comment:"#6B7B8C",cyan:"#5FA8D3",green:"#5CB8A4",orange:"#FFA96C",pink:"#FF8FA2",purple:"#A88ED1",red:"#FF6B6B",yellow:"#FFD575"},enchantedEvening:{background:"#1E1824",currentLine:"#2A2332",selection:"#3F3A4F",foreground:"#C2B4CB",comment:"#7F7292",cyan:"#76AAD8",green:"#6CC095",orange:"#FFB36C",pink:"#FF8FB0",purple:"#AB8CC2",red:"#FF6464",yellow:"#FFD164"},fireAndIce:{background:"#1F2532",currentLine:"#292F3D",selection:"#4E556A",foreground:"#D8DEE9",comment:"#69758E",cyan:"#7EC4CF",green:"#68CC98",orange:"#FFA071",pink:"#FF88B5",purple:"#AE9BFF",red:"#FF657E",yellow:"#FDCB83"},forestGreen:{background:"#1A1E22",currentLine:"#24292F",selection:"#394147",foreground:"#C8C8C8",comment:"#5C6370",cyan:"#7AAB9D",green:"#88B379",orange:"#FFAC6F",pink:"#F97B77",purple:"#A187BE",red:"#FF5C5C",yellow:"#F5D76E"},futuristicBlue:{background:"#111B26",currentLine:"#1B2E3F",selection:"#334D65",foreground:"#C0D2E3",comment:"#6E859E",cyan:"#77AADB",green:"#78C196",orange:"#FFAC6C",pink:"#FF8DBE",purple:"#A48ADA",red:"#FF6666",yellow:"#FFD66D"},gentlePurple:{background:"#2E2E3D",currentLine:"#383849",selection:"#4D4D5C",foreground:"#B2B2CC",comment:"#6E6E8F",cyan:"#6D77CC",green:"#81C995",orange:"#FFB16A",pink:"#FF7CAC",purple:"#8A80A1",red:"#FF657A",yellow:"#FDB26E"},githubDarkDimmed:{background:"#0D1117",currentLine:"#161B22",selection:"#1F6F8B",foreground:"#8B949E",comment:"#8B949E",cyan:"#79C0FF",green:"#2DD57A",orange:"#FFB454",pink:"#FF80AB",purple:"#D781D3",red:"#EF5252",yellow:"#D29922"},gruvbox:{background:"#282828",currentLine:"#3c3836",selection:"#bdae93",foreground:"#ebdbb2",comment:"#928374",cyan:"#83a598",green:"#b8bb26",orange:"#fe8019",pink:"#d3869b",purple:"#d3869b",red:"#fb4934",yellow:"#fabd2f"},materialTheme:{background:"#263238",currentLine:"#37474f",selection:"#90a4ae",foreground:"#eceff1",comment:"#546e7a",cyan:"#80cbc4",green:"#a5d6a7",orange:"#ffb74d",pink:"#f06292",purple:"#ba68c8",red:"#ef5350",yellow:"#ffee58"},midnightMystique:{background:"#1E1E27",currentLine:"#292935",selection:"#3F3F4F",foreground:"#C2C2D3",comment:"#757593",cyan:"#76D4D6",green:"#6CC18F",orange:"#FFB36C",pink:"#FF8FAB",purple:"#AB8BC7",red:"#FF6464",yellow:"#FFD164"},midnightSunset:{background:"#182233",currentLine:"#1D2D46",selection:"#384B66",foreground:"#B7C0CE",comment:"#6A788A",cyan:"#6B98FF",green:"#6BD49D",orange:"#FFA178",pink:"#FF8DAB",purple:"#B48EAD",red:"#F96263",yellow:"#FADA5E"},minimalMonochrome:{background:"#1C1C1C",currentLine:"#262626",selection:"#363636",foreground:"#D9D9D9",comment:"#757575",cyan:"#7DC1C7",green:"#7FB074",orange:"#FFB869",pink:"#FF81A2",purple:"#B48EAD",red:"#FF6B6B",yellow:"#FFD57B"},modernMarine:{background:"#0A0E19",currentLine:"#121929",selection:"#1E2B42",foreground:"#D5D8DE",comment:"#7F8493",cyan:"#6FB1D3",green:"#6CC792",orange:"#FFB577",pink:"#FF96B0",purple:"#B690C2",red:"#FF6666",yellow:"#FFD666"},monokai:{background:"#272822",currentLine:"#3e3d32",selection:"#49483e",foreground:"#f8f8f2",comment:"#75715e",cyan:"#66d9ef",green:"#a6e22e",orange:"#fd971f",pink:"#f92672",purple:"#ae81ff",red:"#f92672",yellow:"#e6db74"},moonlitMeadow:{background:"#12252C",currentLine:"#1D3B47",selection:"#24566E",foreground:"#A7C4BC",comment:"#5E7D84",cyan:"#82B7BD",green:"#87C38A",orange:"#F4B66A",pink:"#F77A92",purple:"#C58AC9",red:"#F0725E",yellow:"#E8C284"},mysticalMauve:{background:"#1A1A26",currentLine:"#252533",selection:"#3E3E57",foreground:"#B2B2CC",comment:"#757593",cyan:"#76D4D6",green:"#6CC18F",orange:"#FFB36C",pink:"#FF8FAB",purple:"#AB8BC7",red:"#FF6464",yellow:"#FFD164"},nebulaNights:{background:"#1B1821",currentLine:"#262330",selection:"#3C3A48",foreground:"#B8B4CB",comment:"#7A738B",cyan:"#77B4D8",green:"#6CC09E",orange:"#FFA677",pink:"#FF95B2",purple:"#B48FC1",red:"#FF6565",yellow:"#FFD566"},neonLights:{background:"#000000",currentLine:"#0D0D0D",selection:"#1A1A1A",foreground:"#DADADA",comment:"#7F7F7F",cyan:"#6FE3E3",green:"#60FFA0",orange:"#FFB67A",pink:"#FF9FBD",purple:"#BF8CC2",red:"#FF6666",yellow:"#FFD666"},nightSky:{background:"#17202A",currentLine:"#1C2732",selection:"#2E4053",foreground:"#D0D3D4",comment:"#566573",cyan:"#5DADE2",green:"#45B39D",orange:"#F5B041",pink:"#EB984E",purple:"#AF7AC5",red:"#EC7063",yellow:"#F4D03F"},nord:{background:"#2e3440",currentLine:"#3b4252",selection:"#4c566a",foreground:"#d8dee9",comment:"#616e88",cyan:"#88c0d0",green:"#a3be8c",orange:"#ebcb8b",pink:"#bf616a",purple:"#b48ead",red:"#bf616a",yellow:"#ebcb8b"},nova:{background:"#1F262D",currentLine:"#232A32",selection:"#414B56",foreground:"#D9E2EC",comment:"#525F69",cyan:"#89DDFF",green:"#64D989",orange:"#E7C664",pink:"#E95678",purple:"#C594C5",red:"#FF5656",yellow:"#FFC172"},novaDark:{background:"#1A2026",currentLine:"#212930",selection:"#36424F",foreground:"#C0C6D9",comment:"#5B6C7F",cyan:"#84CEE4",green:"#89DD6D",orange:"#FFB46E",pink:"#FF7CAB",purple:"#BB80B3",red:"#FC6161",yellow:"#FAB795"},oceanBlue:{background:"#12232E",currentLine:"#1D3B53",selection:"#205072",foreground:"#A8DADC",comment:"#5E81AC",cyan:"#7FB2F0",green:"#88C0D0",orange:"#FFB86C",pink:"#FFA0A0",purple:"#D4A3D9",red:"#EF8E8E",yellow:"#FFD180"},oceanicAzure:{background:"#001A23",currentLine:"#002B36",selection:"#004056",foreground:"#C0C5CE",comment:"#4D5767",cyan:"#75A4C0",green:"#68A3A8",orange:"#FFA45E",pink:"#FF94B0",purple:"#B48EAD",red:"#FF6363",yellow:"#FFD464"},oceanicGruvbox:{background:"#1d2021",currentLine:"#282828",selection:"#458588",foreground:"#ebdbb2",comment:"#928374",cyan:"#89b482",green:"#a9b665",orange:"#d79921",pink:"#d3869b",purple:"#b16286",red:"#fb4934",yellow:"#d5c4a1"},oceanicNext:{background:"#1B2B34",currentLine:"#343D46",selection:"#4F5B66",foreground:"#A7ADBA",comment:"#616E7C",cyan:"#7FB5DA",green:"#98C379",orange:"#EBCB8B",pink:"#EC5f67",purple:"#C594C5",red:"#EC5f67",yellow:"#D29922"},oneDark:{background:"#282c34",currentLine:"#3e4451",selection:"#4f5b66",foreground:"#abb2bf",comment:"#5c6370",cyan:"#56b6c2",green:"#98c379",orange:"#d19a66",pink:"#c678dd",purple:"#c678dd",red:"#e06c75",yellow:"#e5c07b"},polarNight:{background:"#2E3440",currentLine:"#3B4252",selection:"#4C566A",foreground:"#D8DEE9",comment:"#616E88",cyan:"#81A1C1",green:"#A3BE8C",orange:"#EBCB8B",pink:"#BF616A",purple:"#B48EAD",red:"#BF616A",yellow:"#EBCB8B"},radiantRainforest:{background:"#16231A",currentLine:"#1F3927",selection:"#355D43",foreground:"#A7C9A2",comment:"#6F8D77",cyan:"#80C3BB",green:"#76CC8F",orange:"#FFB56C",pink:"#FF8FA6",purple:"#AB8CC2",red:"#FF6C6C",yellow:"#FFD576"},retroTech:{background:"#0C0C0C",currentLine:"#141414",selection:"#1F1F1F",foreground:"#D9D9D9",comment:"#626262",cyan:"#77BFC9",green:"#69CC6D",orange:"#FFC46D",pink:"#FF7D99",purple:"#BB86FC",red:"#FF5555",yellow:"#FACD60"},royalPurple:{background:"#1E1B2E",currentLine:"#272337",selection:"#3E395B",foreground:"#D5D1E2",comment:"#76708E",cyan:"#76D7C4",green:"#47B87C",orange:"#FFC300",pink:"#F39C9D",purple:"#9B59B6",red:"#E74C3C",yellow:"#F1C40F"},sapphireSkies:{background:"#081125",currentLine:"#0F1F3A",selection:"#1E3874",foreground:"#D8DCE6",comment:"#6B7394",cyan:"#7EC4D9",green:"#7DCB9E",orange:"#FFB578",pink:"#FF8FB3",purple:"#B992CC",red:"#FF6767",yellow:"#FFD684"},shadesOfPurple:{background:"#2d2b55",currentLine:"#37355a",selection:"#444267",foreground:"#ecebf0",comment:"#9a99a3",cyan:"#a1efe4",green:"#72f1b8",orange:"#f78c6c",pink:"#ffcc99",purple:"#9a99a3",red:"#ff6188",yellow:"#ffcc99"},solarizedDark:{background:"#002b36",currentLine:"#073642",selection:"#586e75",foreground:"#839496",comment:"#586e75",cyan:"#2aa198",green:"#859900",orange:"#cb4b16",pink:"#d33682",purple:"#6c71c4",red:"#dc322f",yellow:"#b58900"},synthWave84:{background:"#2b213a",currentLine:"#3e3650",selection:"#564d7a",foreground:"#e0def4",comment:"#9c8c98",cyan:"#95e6cb",green:"#00ffb9",orange:"#f28779",pink:"#f771ac",purple:"#d3bfff",red:"#ff6188",yellow:"#ffd866"},tokyoNight:{background:"#1a1b26",currentLine:"#282a36",selection:"#44475a",foreground:"#eff0eb",comment:"#6b6e76",cyan:"#78d1e1",green:"#67b11d",orange:"#e1a80e",pink:"#ff79c6",purple:"#d27bff",red:"#ff5555",yellow:"#f3f99d"},tomorrowNight:{background:"#1d1f21",currentLine:"#282a36",selection:"#373b41",foreground:"#c5c8c6",comment:"#616e7c",cyan:"#81a2be",green:"#b5bd68",orange:"#de935f",pink:"#cc6666",purple:"#b294bb",red:"#cc6666",yellow:"#f0c674"},twilightMeadow:{background:"#14202A",currentLine:"#1F2E3F",selection:"#334D65",foreground:"#A6C0B9",comment:"#6C8F81",cyan:"#80C7D1",green:"#7FCD97",orange:"#FFBC76",pink:"#FF9FB3",purple:"#AE8FC3",red:"#FF7272",yellow:"#FFD674"},urbanTwilight:{background:"#161727",currentLine:"#1F2737",selection:"#35415B",foreground:"#BDC9D7",comment:"#7F8C9C",cyan:"#77AED8",green:"#6CC492",orange:"#FFB677",pink:"#FF95B1",purple:"#B48DC2",red:"#FF6C6C",yellow:"#FFD576"},vibrantInk:{background:"#1C1E26",currentLine:"#242730",selection:"#363B4A",foreground:"#BFC7D5",comment:"#5C6672",cyan:"#6A76FB",green:"#33CC95",orange:"#FF9A65",pink:"#FF75B5",purple:"#AE81FF",red:"#FF6188",yellow:"#FDD269"},vintageRust:{background:"#301F1A",currentLine:"#3E2A23",selection:"#5D3E35",foreground:"#D7C3A7",comment:"#7F6C55",cyan:"#83A4C4",green:"#7EAD90",orange:"#FFA45E",pink:"#FF8C9E",purple:"#B491A9",red:"#FF7262",yellow:"#FFD372"}};class qt{constructor(t){this.id="Ziko-Theme-"+G.string(10),this.use(t)}get currentTheme(){return["background","currentLine","selection","foreground","comment","cyan","green","orange","pink","purple","red","yellow"].reduce(((t,e)=>(t[e]=`var(--${e}-${this.id})`,t)),{})}useThemeIndex(t){const e=Object.keys(Ht);for(let r in Ht[e[t]])document.documentElement.style.setProperty(`--${r}-${this.id}`,Ht[e[t]][r]);return this}useThemeName(t){t=t.toLowerCase();const e=Object.fromEntries(Object.entries(Ht).map((t=>[t[0].toLowerCase(),t[1]])));for(let r in e[t])document.documentElement.style.setProperty(`--${r}-${this.id}`,e[t][r]);return this}useThemeObject(t){for(let e in t)document.documentElement.style.setProperty(`--${e}-${this.id}`,t[e]);return this}use(t){return"number"==typeof t&&this.useThemeIndex(t),"string"==typeof t&&this.useThemeName(t),t instanceof Object&&this.useThemeObject(t),this}}const Wt=(t,e="px")=>("number"==typeof t&&(t+=e),t instanceof Array&&(t=t.map((t=>"number"==typeof t?t+=e:t)).join(" ")),t),Xt=(t,e)=>{t&&Object.assign(t.style,e)};function Yt(){return{style:function(t,{target:e="parent",maskVector:r=null}={}){return"parent"===e||0===e?Xt(this.element,t):"parent"!==e&&0!==e||(r?this.items.map(((e,n)=>1==r[n]&&e.style(t))):this.items.map((e=>e.style(t)))),this},setCss:function(t){return this.element.style.cssText=t,this},addCss:function(t){return this.element.style.cssText+=t,this},size:function(t,e,{target:r,maskVector:n}={}){return this.width(t,{target:r,maskVector:n}),this.height(e,{target:r,maskVector:n}),this},width:function(t,{target:e,maskVector:r}={}){if(t instanceof Object){if(t instanceof Array&&(t={min:t[0],max:t[1]}),"min"in t||"max"in t){let n=t.min??t.max,s=t.max??t.min;n=Wt(n,"px"),s=Wt(s,"px"),this.style({minWidth:n,maxWidth:s},{target:e,maskVector:r})}}else t=Wt(t,"px"),this.style({width:t},{target:e,maskVector:r});return this},height:function(t,{target:e,maskVector:r}={}){if(t instanceof Object){if(t instanceof Array&&(t={min:t[0],max:t[1]}),"min"in t||"max"in t){let n=t.min??t.max,s=t.max??t.min;n=Wt(n,"px"),s=Wt(s,"px"),this.style({minHeight:n,maxHeight:s},{target:e,maskVector:r})}}else t=Wt(t,"px"),this.style({height:t},{target:e,maskVector:r});return this},hide:function({after:t,target:e,maskVector:r}={}){return"number"==typeof t?setTimeout((()=>this.hide({target:e,maskVector:r})),t):(this.cache.isHidden=!0,this.style({display:"none"},{target:e,maskVector:r})),this},show:function({after:t,target:e,maskVector:r}={}){return"number"==typeof t?setTimeout((()=>this.show({target:e,maskVector:r})),t):(this.cache.isHidden=!1,this.style({display:""},{target:e,maskVector:r})),this}}}class Zt{constructor(t={}){this.target=null,this.styles=new Map([["default",t]]),this.cache={isHidden:!1,isFaddedOut:!1,transformation:{Flip:[0,0,0]}}}style(t,{target:e="parent",maskVector:r=null}={}){return"parent"===e||0===e?Xt(this.target.element,t):"parent"!==e&&0!==e||(r?this.items.map(((e,n)=>1==r[n]&&e.style(t))):this.items.map((e=>e.style(t)))),this}linkTo(t){return this.target=t,this}use(t="default"){return this.style(this.styles.get(t)),this}update(t,e){const r=this.styles.get(t);return r?this.styles.set(t,Object.assign(r,e)):this.styles.set(t,e),this}add(t,e){return this.styles.set(t,e),this}replace(t,e){return this.styles.set(t,e),this}delete(...t){return t.forEach((t=>this.styles.delete(t))),this}updateDefaultStyle(){const t=Object.fromEntries(Object.entries(this.target.element.style).filter((t=>isNaN(+t[0]))));return this.update("default",t),this}hover(t){return t&&this.add("hover",t),this.target.element.addEventListener("pointerenter",(()=>this.use("hover"))),this.target.element.addEventListener("pointerleave",(()=>this.use("default"))),this}size(t,e,{target:r,maskVector:n}={}){return this.style({width:t,height:e},{target:r,maskVector:n}),this}width(t,{target:e,maskVector:r}={}){if(t instanceof Object){if(t instanceof Array&&(t={min:t[0],max:t[1]}),"min"in t||"max"in t){let n=t.min??t.max,s=t.max??t.min;n=Wt(n,"px"),s=Wt(s,"px"),this.style({minWidth:n,maxWidth:s},{target:e,maskVector:r})}}else t=Wt(t,"px"),this.style({width:t},{target:e,maskVector:r});return this}height(t,{target:e,maskVector:r}={}){if(t instanceof Object){if(t instanceof Array&&(t={min:t[0],max:t[1]}),"min"in t||"max"in t){let n=t.min??t.max,s=t.max??t.min;n=Wt(n,"px"),s=Wt(s,"px"),this.style({minHeight:n,maxHeight:s},{target:e,maskVector:r})}}else t=Wt(t,"px"),this.style({height:t},{target:e,maskVector:r});return this}hide({after:t,target:e,maskVector:r}={}){if("number"==typeof t){const n=()=>this.hide({target:e,maskVector:r});setTimeout(n,t),clearTimeout(n)}else this.cache.isHidden=!0,this.style({display:"none"},{target:e,maskVector:r});return this}show({after:t,target:e,maskVector:r}={}){if("number"==typeof t){const n=()=>this.show({target:e,maskVector:r});setTimeout(n,t),clearTimeout(n)}else this.cache.isHidden=!1,this.style({display:""},{target:e,maskVector:r});return this}color(t,{target:e,maskVector:r}={}){return this.style({color:t},{target:e,maskVector:r}),this}background(t,{target:e,maskVector:r}={}){return this.style({background:t},{target:e,maskVector:r}),this}backgroundColor(t,{target:e,maskVector:r}={}){return this.style({backgroundColor:t},{target:e,maskVector:r}),this}opacity(t,{target:e,maskVector:r}={}){return this.style({opacity:t},{target:e,maskVector:r}),this}position(t,{target:e,maskVector:r}={}){return this.style({position:t},{target:e,maskVector:r}),this}display(t,{target:e,maskVector:r}={}){return this.style({display:t},{target:e,maskVector:r}),this}zIndex(t,{target:e,maskVector:r}={}){return this.style({zIndex:t},{target:e,maskVector:r}),this}float(t,{target:e,maskVector:r}={}){return this.style({float:t},{target:e,maskVector:r}),this}border(t="1px solid red",{target:e,maskVector:r}={}){return this.style({border:t},{target:e,maskVector:r}),this}borderTop(t="1px solid red",{target:e,maskVector:r}={}){return this.style({borderTop:t},{target:e,maskVector:r}),this}borderRight(t="1px solid red",{target:e,maskVector:r}={}){return this.style({borderRight:t},{target:e,maskVector:r}),this}borderBottom(t="1px solid red",{target:e,maskVector:r}={}){return this.style({borderBottom:t},{target:e,maskVector:r}),this}borderLeft(t="1px solid red",{target:e,maskVector:r}={}){return this.style({borderLeft:t},{target:e,maskVector:r}),this}borderRadius(t,{target:e,maskVector:r}={}){return t=Wt(t,"px"),this.style({borderRadius:t},{target:e,maskVector:r}),this}margin(t,{target:e,maskVector:r}={}){return t=Wt(t,"px"),this.style({margin:t},{target:e,maskVector:r}),this}marginTop(t,{target:e,maskVector:r}={}){return t=Wt(t,"px"),this.style({marginTop:t},{target:e,maskVector:r}),this}marginRight(t,{target:e,maskVector:r}={}){return t=Wt(t,"px"),this.style({marginRight:t},{target:e,maskVector:r}),this}marginBootom(t,{target:e,maskVector:r}={}){return t=Wt(t,"px"),this.style({marginBootom:t},{target:e,maskVector:r}),this}marginLeft(t,{target:e,maskVector:r}={}){return t=Wt(t,"px"),this.style({marginLeft:t},{target:e,maskVector:r}),this}padding(t,{target:e,maskVector:r}={}){return t=Wt(t,"px"),this.style({padding:t},{target:e,maskVector:r}),this}paddingTop(t,{target:e,maskVector:r}={}){return t=Wt(t,"px"),this.style({paddingTop:t},{target:e,maskVector:r}),this}paddingRight(t,{target:e,maskVector:r}={}){return t=Wt(t,"px"),this.style({paddingRight:t},{target:e,maskVector:r}),this}paddingBootom(t,{target:e,maskVector:r}={}){return t=Wt(t,"px"),this.style({paddingBootom:t},{target:e,maskVector:r}),this}paddingLeft(t,{target:e,maskVector:r}={}){return t=Wt(t,"px"),this.style({paddingLeft:t},{target:e,maskVector:r}),this}font(t,{target:e,maskVector:r}={}){return this.style({font:t},{target:e,maskVector:r}),this}fontFamily(t="",{target:e,maskVector:r}={}){return this.style({fontFamily:t},{target:e,maskVector:r}),this}fontSize(t,{target:e,maskVector:r}={}){return this.style({fontSize:t},{target:e,maskVector:r}),this}cursor(t="pointer"){return this.style({cursor:t}),this}overflow(t,e,{target:r,maskVector:n}={}){const s=["hidden","auto"];return this.style({overflowX:"number"==typeof t?s[t]:t,overflowY:"number"==typeof e?s[e]:e},{target:r,maskVector:n}),this}clip(t,{target:e,maskVector:r}={}){return"string"==typeof t&&(t="polygon("+t+")"),this.style({clipPath:t},{target:e,maskVector:r}),this}fadeOut(t=1){return this.style({transition:t/1e3+"s",opacity:0}),this.cache.isFaddedOut=!0,this}fadeIn(t=1){return this.style({transition:t/1e3+"s",opacity:1}),this.cache.isFaddedOut=!1,this}toggleFade(t=1e3,e=t){return this.cache.isFaddedOut?this.fadeIn(t):this.fadeOut(e),this}translateX(t,e=0){return this.style({transform:"translateX("+t+"px)"}),0!=e&&this.style({transition:`transform ${e/1e3}s ease`}),this}translateY(t,e=0){return this.style({transform:"translateY("+t+"px)"}),0!=e&&this.style({transition:`transform ${e/1e3}s ease`}),this}translate(t,e=t,r=0){return this.style({transform:`translate( ${t}px , ${e}px )`}),0!=r&&this.style({transition:`transform ${r/1e3}s ease`}),this}rotateX(t,e=0){return this.style({transform:"rotateX("+t+"deg)"}),0!=e&&this.style({transition:`transform ${e/1e3}s ease`}),this}rotateY(t,e=0){return this.style({transform:"rotateY("+t+"deg)"}),0!=e&&this.style({transition:`transform ${e/1e3}s ease`}),this}rotateZ(t,e=0){return this.style({transform:"rotateZ("+t+"deg)"}),0!=e&&this.style({transition:`transform ${e/1e3}s ease`}),this}flipeX({t:t=1}={}){return this.cache.transformation.Flip[0]+=180,this.cache.transformation.Flip[0]%=360,this.style({transform:"rotateX("+this.cache.transformation.Flip[0]+"deg)",transition:"all "+t+"s ease"}),this}flipeY(t=1){return this.cache.transformation.Flip[1]+=180,this.cache.transformation.Flip[1]%=360,this.style({transform:"rotateY("+this.cache.transformation.Flip[1]+"deg)",transition:"all "+t+"s ease"}),this}flipeZ(t=1){return this.cache.transformation.Flip[2]+=180,this.cache.transformation.Flip[2]%=360,this.style({transform:"rotateZ("+this.cache.transformation.Flip[2]+"deg)",transition:"all "+t+"s ease"}),this}slideHeightIn(t=1,e=this.h){return this.style({transition:t+"s",height:e}),this}slideHeightOut(t=1){return this.style({transition:t+"s",height:0}),this.target.element.addEventListener("transitionend",(()=>this.style({opacity:"none"}))),this}slideWidthIn(t=1,e=this.w){return this.style({transition:t+"s",width:e}),this}slideWidthOut(t=1){this.style({transition:t+"s",width:0});const e=()=>{this.style({opacity:"none"})};return this.target.element.addEventListener("transitionend",e),this.target.element.removeEventListener("transitionend",e),this}slideIn({t:t=1,w:e="100%",h:r="auto"}={}){return this.style({transition:t+"s",width:e,height:r,visibility:"visible"}),this}slideOut({t:t=1,width:e=0,height:r=0}={}){this.style({visibility:"hidden",transition:t+"s",opacity:"none",width:e,height:r});const n=()=>{this.style({opacity:"none"})};return this.target.element.addEventListener("transitionend",n),this.target.element.removeEventListener("transitionend",n),this}}const Gt={Key:{data:[],dispose:function(){return this.data.map((t=>t?.event?.dispose())),this},destroy:function(){return this.dispose(),this.data.length=0,this}},Pointer:{data:[],dispose:function(){return this.data.map((t=>t?.event?.dispose())),this},destroy:function(){return this.dispose(),this.data.length=0,this}},Drag:{data:[],dispose:function(){return this.data.map((t=>t?.event?.dispose())),this},destroy:function(){return this.dispose(),this.data.length=0,this}}};function Qt(t,e,r,n){return this.event=t,this.cache.preventDefault[e]&&t.preventDefault(),r&&r(),this.cache.stream.enabled[e]&&n&&this.cache.stream.history[e].push(n),this.cache.callbacks[e].map((t=>t(this))),this}class Jt{constructor(t){this.target=null,this.setTarget(t),this.__dispose=this.dispose.bind(this)}get targetElement(){return this.target.element}setTarget(t){return this.target=t,this}__handle(t,e,r){const n="drag"===t?t:`${this.cache.prefixe}${t}`;return this.dispose(r),this.targetElement.addEventListener(n,e),this}__onEvent(t,e,...r){if(0===r.length){if(!(this.cache.callbacks.length>1))return this;this.cache.callbacks.map((t=>e=>t.call(this,e)))}else this.cache.callbacks[t]=r.map((t=>e=>t.call(this,e)));return this.__handle(t,this.__controller[t],e),this}preventDefault(t={}){return Object.assign(this.cache.preventDefault,t),this}pause(t={}){t={...Object.fromEntries(Object.keys(this.cache.stream.enabled).map((t=>[t,!0]))),...t};for(let e in t)t[e]&&(this.targetElement.removeEventListener(`${this.cache.prefixe}${e}`,this.__controller[`${this.cache.prefixe}${e}`]),this.cache.paused[`${this.cache.prefixe}${e}`]=!0);return this}resume(t={}){t={...Object.fromEntries(Object.keys(this.cache.stream.enabled).map((t=>[t,!0]))),...t};for(let e in t)t[e]&&(this.targetElement.addEventListener(`${this.cache.prefixe}${e}`,this.__controller[`${this.cache.prefixe}${e}`]),this.cache.paused[`${this.cache.prefixe}${e}`]=!1);return this}dispose(t={}){return this.pause(t),this}stream(t={}){this.cache.stream.t0=Date.now();return t={...Object.fromEntries(Object.keys(this.cache.stream.enabled).map((t=>[t,!0]))),...t},Object.assign(this.cache.stream.enabled,t),this}clear(t={}){t={...Object.fromEntries(Object.keys(this.cache.stream.clear).map((t=>[t,!0]))),...t};for(let e in t)t[e]&&(this.cache.stream.history[e]=[]);return this}get Garbage(){return Gt}}function Kt(t){Qt.call(this,t,"down",(()=>{this.dx=parseInt(t.offsetX),this.dy=parseInt(t.offsetY),this.isDown=!0}),{x:this.dx,y:this.dy,t:Date.now()-this.cache.stream.t0})}function te(t){Qt.call(this,t,"move",(()=>{this.mx=parseInt(t.offsetX),this.my=parseInt(t.offsetY),this.isMoving=!0}),{x:this.mx,y:this.my,t:Date.now()-this.cache.stream.t0})}function ee(t){Qt.call(this,t,"up",(()=>{this.ux=parseInt(t.offsetX),this.uy=parseInt(t.offsetY),this.isDown=!1;const e=this.dx,r=this.dy,n=this.ux,s=this.uy,i=(n-e)/this.Target.Width,o=(r-s)/this.Target.Height,a=i<0?"left":i>0?"right":"none",l=o<0?"bottom":o>0?"top":"none";this.swippe={h:a,v:l,delta_x:i,delta_y:o}}),{x:this.ux,y:this.uy,t:Date.now()-this.cache.stream.t0})}function re(t){Qt.call(this,t,"enter",null,null)}function ne(t){Qt.call(this,t,"leave",null,null)}function se(t){Qt.call(this,t,"out",null,null)}class ie extends Jt{constructor(t){super(t),this.event=null,this.dx=0,this.dy=0,this.dt=0,this.mx=0,this.my=0,this.mt=0,this.ux=0,this.uy=0,this.ut=0,this.swippe={h:null,v:null,delta_x:0,delta_y:0},this.isMoving=!1,this.isDown=!1,this.cache={prefixe:"pointer",preventDefault:{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!1},paused:{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!1},stream:{enabled:{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!1},clear:{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!1},history:{down:[],move:[],up:[],enter:[],out:[],leave:[]}},callbacks:{down:[t=>console.log({dx:t.dx,dy:t.dy,down:t.down,move:t.move,t:t.dt})],move:[t=>console.log({mx:t.mx,my:t.my,down:t.down,move:t.move,t:t.dt})],up:[t=>console.log({ux:t.ux,uy:t.uy,down:t.down,move:t.move,t:t.dt})],enter:[t=>console.log({dx:t.dx,dy:t.dy,down:t.down,move:t.move,t:t.dt})],out:[t=>console.log({mx:t.mx,my:t.my,down:t.down,move:t.move,t:t.dt})],leave:[t=>console.log({ux:t.ux,uy:t.uy,down:t.down,move:t.move,t:t.dt})]}},this.__controller={down:Kt.bind(this),move:te.bind(this),up:ee.bind(this),enter:re.bind(this),out:se.bind(this),leave:ne.bind(this)}}onDown(...t){return 0===t.length&&(t=[()=>{}]),this.__onEvent("down",{down:!0,move:!1,up:!1,enter:!1,out:!1,leave:!1},...t),this}onMove(...t){return 0===t.length&&(t=[()=>{}]),this.__onEvent("move",{down:!1,move:!0,up:!1,enter:!1,out:!1,leave:!1},...t),this}onUp(...t){return 0===t.length&&(t=[()=>{}]),this.__onEvent("up",{down:!1,move:!1,up:!0,enter:!1,out:!1,leave:!1},...t),this}onEnter(...t){return 0===t.length&&(t=[()=>{}]),this.__onEvent("enter",{down:!1,move:!1,up:!1,enter:!0,out:!1,leave:!1},...t),this}onOut(...t){return 0===t.length&&(t=[()=>{}]),this.__onEvent("out",{down:!1,move:!1,up:!1,enter:!1,out:!0,leave:!1},...t),this}onLeave(...t){return 0===t.length&&(t=[()=>{}]),this.__onEvent("leave",{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!0},...t),this}}var oe=t=>new ie(t);function ae(t){Qt.call(this,t,"down",(()=>this.kd=t.key),{key:t.key,t:10})}function le(t){Qt.call(this,t,"press",(()=>this.kp=t.key),{key:t.key,t:10})}function he(t){Qt.call(this,t,"up",(()=>this.ku=t.key),{key:t.key,t:10})}class ce extends Jt{constructor(t){super(t),this.kp=null,this.kd=null,this.ku=null,this.t=0,this.cache={prefixe:"key",preventDefault:{down:!1,press:!1,up:!1},paused:{down:!1,press:!1,up:!1},stream:{enabled:{down:!1,press:!1,up:!1},clear:{down:!0,press:!1,up:!1},history:{down:[],press:[],up:[]}},callbacks:{down:[t=>console.log({kd:t.kd})],press:[t=>console.log({kp:t.kp})],up:[t=>console.log({ku:t.ku})]},successifKeysCallback:{down:[t=>console.log(1111)],press:[t=>console.log(1112)],kyup:[t=>console.log(1113)]}},this.__controller={down:ae.bind(this),press:le.bind(this),up:he.bind(this)}}onDown(...t){return this.__onEvent("down",{down:!0},...t),this}onPress(...t){return this.__onEvent("press",{press:!0},...t),this}onUp(...t){return this.__onEvent("up",{up:!0},...t),this}}var ue=t=>new ce(t);function me(t){Qt(this,t,"start",null)}function de(t){Qt.call(this,t,"drag",null,null)}function pe(t){Qt.call(this,t,"end",null,null)}function fe(t){Qt.call(this,t,"drop",null,null)}class ge extends Jt{constructor(t){super(t),this.Target.setAttribute("draggable",!0),this.cache={prefixe:"drag",preventDefault:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},paused:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},enabled:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},callbacks:{drag:[],start:[],end:[],enter:[],leave:[],over:[]},stream:{enabled:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},clear:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},history:{drag:[],start:[],end:[],enter:[],leave:[],over:[]}}},this.__controller={start:me.bind(this),drag:de.bind(this),end:pe.bind(this)}}onStart(...t){return this.__onEvent("start",{},...t),this}onDrag(...t){return this.__onEvent("drag",{},...t),this}onEnd(...t){return this.__onEvent("end",{},...t),this}}class ye extends Jt{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{drop:!1},paused:{drop:!1},stream:{enabled:{drop:!1},clear:{drop:!1},history:{drop:[]}},callbacks:{drop:[t=>console.log({dx:t.dx,dy:t.dy,drop:t.drop,move:t.move,t:t.dt})]}},this.__controller={drop:fe.bind(this)}}onDrop(...t){return this.__onEvent("drop",{},...t),this}}const be=t=>new ge(t),Fe=t=>new ye(t);function we(t){Qt.call(this,t,"click",null,null)}function xe(t){Qt.call(this,t,"dbclick",null,null)}class ve extends Jt{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{click:!1,dbclick:!1},paused:{click:!1,dbclick:!1},stream:{enabled:{click:!1,dbclick:!1},clear:{click:!1,dbclick:!1},history:{click:[],dbclick:[]}},callbacks:{click:[],dbclick:[]}},this.__controller={click:we.bind(this),dbclick:xe.bind(this)}}onClick(...t){return this.__onEvent("click",{},...t),this}onDbClick(...t){return this.__onEvent("dbclick",{},...t),this}}const Ce=t=>new ve(t);function Ee(t){Qt.call(this,t,"copy",null,null)}function ke(t){Qt.call(this,t,"cut",null,null)}function Ae(t){Qt.call(this,t,"paste",null,null)}function Be(t){Qt.call(this,t,"select",null,null)}class De extends Jt{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{copy:!1,cut:!1,paste:!1,select:!1},paused:{copy:!1,cut:!1,paste:!1,select:!1},stream:{enabled:{copy:!1,cut:!1,paste:!1,select:!1},clear:{copy:!1,cut:!1,paste:!1,select:!1},history:{copy:[],cut:[],paste:[],select:[]}},callbacks:{copy:[],cut:[],paste:[],select:[]}},this.__controller={copy:Ee.bind(this),cut:ke.bind(this),paste:Ae.bind(this),select:Be.bind(this)}}onCopy(...t){return this.__onEvent("copy",{},...t),this}onCut(...t){return this.__onEvent("cut",{},...t),this}onPaste(...t){return this.__onEvent("paste",{},...t),this}onSelect(...t){return this.__onEvent("select",{},...t),this}}const Me=t=>new De(t);function Te(t){Qt.call(this,t,"focus",null,null)}function _e(t){Qt.call(this,t,"blur",null,null)}class Oe extends Jt{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{focus:!1,blur:!1},paused:{focus:!1,blur:!1},stream:{enabled:{focus:!1,blur:!1},clear:{focus:!1,blur:!1},history:{focus:[],blur:[]}},callbacks:{focus:[],blur:[]}},this.__controller={focus:Te.bind(this),blur:_e.bind(this)}}onFocus(...t){return this.__onEvent("focus",{},...t),this}onBlur(...t){return this.__onEvent("blur",{},...t),this}}const Ie=t=>new Oe(t);function Se(t){Qt.call(this,t,"input",null,null)}function Le(t){Qt.call(this,t,"change",null,null)}class Ve extends Jt{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{input:!1,change:!1},paused:{input:!1,change:!1},stream:{enabled:{input:!1,change:!1},clear:{input:!1,change:!1},history:{input:[],change:[]}},callbacks:{input:[],change:[]}},this.__controller={input:Se.bind(this),change:Le.bind(this)}}get value(){return this.target.value}onInput(...t){return this.__onEvent("input",{},...t),this}onChange(...t){return this.__onEvent("change",{},...t),this}}const je=t=>new Ve(t),Re=t=>function(e){Qt.call(this,e,t,null,null)};class Pe extends Jt{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{},paused:{},stream:{enabled:{},clear:{},history:{}},callbacks:{}},this.__controller={}}#r(t){return this.cache.preventDefault[t]=!1,this.cache.paused[t]=!1,this.cache.stream.enabled=!1,this.cache.stream.clear=!1,this.cache.stream.history=[],this.cache.callbacks[t]=[],this.__controller[t]=Re(t).bind(this),this}on(t,...e){return this.__controller[t]||this.#r(t),this.__onEvent(t,{},...e),this}emit(t,e={}){this.__controller[t]||this.#r(t),this.detail=e;const r=new Event(t);return this.targetElement.dispatchEvent(r),this}}const Ne=t=>new Pe(t);class ze{constructor(t=""){this.channel=new BroadcastChannel(t),this.EVENTS_DATAS_PAIRS=new Map,this.EVENTS_HANDLERS_PAIRS=new Map,this.LAST_RECEIVED_EVENT="",this.UUID="ziko-channel"+G.string(10),this.SUBSCRIBERS=new Set([this.UUID])}get broadcast(){return this}emit(t,e){return this.EVENTS_DATAS_PAIRS.set(t,e),this.#n(t),this}on(t,e=console.log){return this.EVENTS_HANDLERS_PAIRS.set(t,e),this.#s(),this}#s(){return this.channel.onmessage=t=>{this.LAST_RECEIVED_EVENT=t.data.last_sended_event;const e=t.data.userId;this.SUBSCRIBERS.add(e);const r=t.data.EVENTS_DATAS_PAIRS.get(this.LAST_RECEIVED_EVENT),n=this.EVENTS_HANDLERS_PAIRS.get(this.LAST_RECEIVED_EVENT);r&&n&&n(r)},this}#n(t){return this.channel.postMessage({EVENTS_DATAS_PAIRS:this.EVENTS_DATAS_PAIRS,last_sended_event:t,userId:this.UUID}),this}close(){return this.channel.close(),this}}const $e={Pointer:oe,Key:ue,Drag:be,Drop:Fe,Click:Ce,Clipboard:Me,Focus:Ie,Input:je,CustomEvent:Ne,Channel:t=>new ze(t),ExtractAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const r=t[e];"ExtractAll"!==r&&"RemoveAll"!==r&&(globalThis[r]=this[r])}return this},RemoveAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const r=t[e];"RemoveAll"!==r&&delete globalThis[r]}return this}};class Ue{constructor(t,e){this.target=t,this.contentRect=null,this.observer=new ResizeObserver((()=>{e(this)}))}get BoundingRect(){return this.target.element.getBoundingClientRect()}get width(){return this.BoundingRect.width}get height(){return this.BoundingRect.height}get top(){return this.BoundingRect.top}get bottom(){return this.BoundingRect.bottom}get right(){return this.BoundingRect.right}get left(){return this.BoundingRect.left}get x(){return this.BoundingRect.x}get y(){return this.boundingRect.y}start(){return this.observer.observe(this.target.element),this}stop(){return this.observer.unobserve(this.target.element),this}}class He{constructor(t,e,{threshold:r=0,margin:n=0}={}){this.target=t,this.config={threshold:r,margin:n},this.observer=new IntersectionObserver((t=>{this.entrie=t[0],e(this)}),{threshold:this.threshold})}get ratio(){return this.entrie.intersectionRatio}get isIntersecting(){return this.entrie.isIntersecting}setThreshould(t){return this.config.threshold=t,this}setMargin(t){return t="number"==typeof t?t+"px":t,this.config.margin=t,this}start(){return this.observer.observe(this.target.element),this}stop(){return this}}class qe{constructor(t){var e;this.target=document.body,"string"==typeof t&&(t=document.createElement(t)),this.element=t,Object.assign(this,Yt.call(this)),this.uuid=this.constructor.name+"-"+G.string(10),this.cache={isRoot:!1,isHidden:!1,isFrozzen:!1,transformMatrix:K([[0,0,0],[0,0,0],[1,1,0]]),style:(e={},new Zt(e)),attributes:{},filters:{}},this.items=[],this.events={ptr:null,key:null,drag:null,drop:null,click:null,clipboard:null,focus:null,custom:null},this.observer={resize:null,intersection:null},this.cache.style.linkTo(this),this.style({position:"relative",boxSizing:"border-box",fontFamily:"verdana",margin:0,padding:0}),this.size("auto","auto")}get st(){return this.cache.style}get attr(){return this.cache.attributes}get evt(){}get __app__(){if(this.cache.isRoot)return this;let t=this.parent;for(;;){if(!t)return null;if(t.cache.isRoot)return t;t=t.parent}}clone(){const t=new this.constructor,e=[...this.items];return{UI:t.append(...e),items:e}}get Width(){return this.element.getBoundingClientRect().width}get Height(){return this.element.getBoundingClientRect().height}get Top(){return this.element.getBoundingClientRect().top}get Right(){return this.element.getBoundingClientRect().right}get Bottom(){return this.element.getBoundingClientRect().bottom}get Left(){return this.element.getBoundingClientRect().left}freeze(t){return this.cache.isFrozzen=t,this}at(t){return this.items.at(t)}maintain(){for(let t=0;t<this.items.length;t++)Object.assign(this,{[[t]]:this.items[t]});return this.length=this.items.length,this}setTarget(t){return t instanceof qe&&(t=t.element),this.remove(),this.target=t,this.render(),this}render(t=!0,e=this.target){return e instanceof qe&&(e=e.element),this.target=e,t?this.target.appendChild(this.element):this.remove(),this}append(...t){if(this.cache.isFrozzen)return console.warn("You can't append new item to frozzen element"),this;for(let e=0;e<t.length;e++)["number","string"].includes(typeof t[e])&&(t[e]=Ye(t[e])),t[e]instanceof qe?(t[e].parent=this,this.element.appendChild(t[e].element),t[e].Target=this.element,this.items.push(t[e])):t[e]instanceof Object&&(t[e]?.style&&this.style(t[e]?.style),t[e]?.attr&&Object.entries(t[e].attr).forEach((t=>this.setAttr(""+t[0],t[1]))));return this.maintain(),this}remove(...t){if(0==t.length)this.target.children.length&&[...this.target.children].includes(this.element)&&this.target.removeChild(this.element);else{const e=t=>{"number"==typeof t&&(t=this.items[t]),t instanceof qe&&this.element.removeChild(t.element),this.items=this.items.filter((e=>e!==t))};for(let r=0;r<t.length;r++)e(t[r]);for(let t=0;t<this.items.length;t++)Object.assign(this,{[[t]]:this.items[t]})}return this}removeAfter(t=1){return setTimeout((()=>this.remove()),t),this}removeItem(...t){const e=t=>{t instanceof qe?this.element.removeChild(t.element):"number"==typeof t&&this.element.removeChild(this.element.children[t])};for(let r=0;r<t.length;r++)e(t[r]);for(let t=0;t<this.items.length;t++)Object.assign(this,{[[t]]:this.items[t]});return this}insertAt(t,...e){if(t>=this.element.children.length)this.append(...e);else for(let r=0;r<e.length;r++)["number","string"].includes(typeof e[r])&&(e[r]=Ye(e[r])),this.element.insertBefore(e[r].element,this.items[t].element),this.items.splice(t,0,e[r]);return this}setAttr(t,e){return this.element.setAttribute(t,e),Object.assign(this.cache.attributes,Object.fromEntries([[t,e]])),this}removeAttr(t){return this.element.removeAttribute(t),this}setContentEditable(t=!0){return this.setAttr("contenteditable",t),this}get children(){return[...this.element.children]}get cloneElement(){return this.element.cloneNode(!0)}get styleObject(){return Object.fromEntries(Object.entries(this.element.style).filter((t=>""!=t[1]&&"initial"!==t[1]&&isNaN(+t[0]))))}setClasses(...t){return this.setAttr("class",t.join(" ")),this}get Classes(){const t=this.element.getAttribute("class");return null===t?[]:t.split(" ")}addClass(){}setId(t){return this.element.setAttribute("id",t),this}get Id(){return this.element.getAttribute("id")}useTheme(t){}forEach(t){return this.items.forEach(t),this}filter(t,e,r){return this.items.filter(t).forEach(e),this}filterByTextContent(t,e=!1){return this.items.map((t=>t.render())),this.items.filter((r=>{const n=r.element.textContent;return!(e?n===t:n.includes(t))})).map((t=>t.render(!1))),this}filterByClass(t){return this.items.map((t=>t.render())),this.items.filter((e=>!e.Classes.includes(t))).map((t=>t.render(!1))),this}sortByTextContent(t,e){let r=this.children;return r.filter((e=>!e.textContent.toLowerCase().includes(t.toLowerCase()))).map((t=>{t.style.display="none"})),r.filter((e=>e.textContent.toLowerCase().includes(t.toLowerCase()))).map(((t,r)=>t.style.display=e[r])),r.filter((t=>"none"!=t.style.display)),this}onPtrMove(...t){return this.events.ptr||(this.events.ptr=oe(this)),this.events.ptr.onMove(...t),this}onPtrDown(...t){return this.events.ptr||(this.events.ptr=oe(this)),this.events.ptr.onDown(...t),this}onPtrUp(...t){return this.events.ptr||(this.events.ptr=oe(this)),this.events.ptr.onUp(...t),this}onPtrEnter(...t){return this.events.ptr||(this.events.ptr=oe(this)),this.events.ptr.onEnter(...t),this}onPtrLeave(...t){return this.events.ptr||(this.events.ptr=oe(this)),this.events.ptr.onLeave(...t),this}onPtrOut(...t){return this.events.ptr||(this.events.ptr=oe(this)),this.events.ptr.onOut(...t),this}onKeyDown(...t){return this.events.key||(this.events.key=ue(this)),this.events.key.onDown(...t),this}onKeyPress(...t){return this.events.key||(this.events.key=ue(this)),this.events.key.onPress(...t),this}onKeyUp(...t){return this.events.key||(this.events.key=ue(this)),this.events.key.onUp(...t),this}onKeysDown({keys:t=[],callback:e}={}){return this.events.key||(this.events.key=ue(this)),this.events.key.handleSuccessifKeys({keys:t,callback:e}),this}onDragStart(...t){return this.events.drag||(this.events.drag=be(this)),this.events.drag.onStart(...t),this}onDrag(...t){return this.events.drag||(this.events.drag=be(this)),this.events.drag.onDrag(...t),this}onDragEnd(...t){return this.events.drag||(this.events.drag=be(this)),this.events.drag.onEnd(...t),this}onDrop(...t){return this.events.drop||(this.events.drop=Fe(this)),this.events.drop.onDrop(...t),this}onClick(...t){return this.events.click||(this.events.click=Ce(this)),this.events.click.onClick(...t),this}onDbClick(...t){return this.events.click||(this.events.click=Ce(this)),this.events.click.onDbClick(...t),this}onCopy(...t){return this.events.clipboard||(this.events.clipboard=Me(this)),this.events.clipboard.onCopy(...t),this}onCut(...t){return this.events.clipboard||(this.events.clipboard=Me(this)),this.events.clipboard.onCut(...t),this}onPaste(...t){return this.events.clipboard||(this.events.clipboard=Me(this)),this.events.clipboard.onPaste(...t),this}onSelect(...t){return this.events.clipboard||(this.events.clipboard=Me(this)),this.events.clipboard.onSelect(...t),this}onFocus(...t){return this.events.focus||(this.events.focus=Ie(this)),this.events.focus.onFocus(...t),this}onBlur(...t){return this.events.focus||(this.events.focus=Ie(this)),this.events.focus.onFocus(...t),this}on(t,...e){return this.events.custom||(this.events.custom=Ne(this)),this.events.custom.on(t,...e),this}emit(t,e={}){return this.events.custom||(this.events.custom=Ne(this)),this.events.custom.emit(t,e),this}WatchAttributes(){}WatchChildren(){}WatchSize(t){return this.observer.resize||(this.observer.resize=((t,e)=>new Ue(t,e))(this,t)),this.observer.resize.start(),this}WatchIntersection(t,e){return this.observer.intersection||(this.observer.intersection=((t,e,r)=>new He(t,e,r))(this,t,e)),this.observer.intersection.start(),this}get Visible_area(){let t=this.element.getBoundingClientRect(),e=document.documentElement.clientHeight,r=document.documentElement.clientWidth,n=t.top>0&&t.top<e,s=t.bottom<e&&t.bottom>0,i=t.left>0&&t.left<r,o=t.right>0&&t.right<r;return{top:n,bottom:s,left:i,right:o,heightRatio:(t.height+t.y)/t.height,isVisible:n||s||o||i}}toggleSlide(){}scaleX(t,e=1){return this.style({transform:"scaleX("+t+")",transition:"all "+e+"s ease"}),this}scaleY(t,e=1){return this.style({transform:"scaleY("+t+")",transition:"all "+e+"s ease"}),this}skewX(t,e=1){return this.style({transform:"skewX("+t+"deg)",transition:"all "+e+"s ease"}),this}skewY(t,e=1){return this.style({transform:"skewY("+t+"deg)",transition:"all "+e+"s ease"}),this}skew(t,e,r=1){return this.style({transform:"skew("+t+"deg , "+e+"deg)",transition:"all "+r+"s ease"}),this}scale(t,e=t,r=1){return this.style({transform:"scale("+t+","+e+")",transition:"all "+r+"s ease"}),this}resize(t=0){switch(t){case 0:this.style({resize:"none"});break;case 1:this.style({resize:"horizontal"});break;case 2:this.style({resize:"vertical"});break;case 3:this.style({resize:"both"});break;default:this.style({resize:t})}return this}Glassmorphism(t="rgba(255,255,255,0.1)",e="1px"){return this.style({background:t,backdropFilter:e}),this}Neumorphism(t="50px",e="cyan",r="13px -13px 49px #5d8fac"){return this.style({borderRadius:t,background:e,boxShadow:r}),this}fullScreen(t=!0,e){return t?this.element.requestFullscreen(e):document.exitFullscreen(),this}toggleFullScreen(t){return document.fullscreenElement?document.exitFullscreen():this.element.requestFullscreen(t),this}resizeObserver(t){return new ResizeObserver((e=>t(e))).observe(this.element)}intersectionObserver(t,e="parent"){return"parent"==e?new IntersectionObserver((e=>t(e[0]))).observe(this.element):this.items.map((e=>e.intersectionObserver((e=>t(e)))))}intersectRatio(t){return new IntersectionObserver((e=>t(e[0].intersectionRatio))).observe(this.element)}get coords(){var t=this.element.getBoundingClientRect();return{parent:{cX:Math.floor(t.left+(t.right-t.left)/2),cY:Math.floor(t.top+(t.bottom-t.top)/2)}}}exportHTML(){}toPdf(){return"Install @ziko/jspdf"}}const We={text:[],p:[],pre:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],br:[],hr:[],btn:[],ol:[],ul:[],image:[],video:[],audio:[],Article:[],Main:[],Section:[],Aside:[],Nav:[],Header:[],Footer:[],Flex:[],FlexMain:[],FlexNav:[],FlexHeader:[],FlexFooter:[],FlexSection:[],FLexArticle:[],FlexAside:[],Table:[],Svg:[],Canvas:[]};class Xe extends qe{constructor(...t){super(),this.element=document.createElement("span"),this.text="",this.addValue(...t),this.st.display("inline-block"),this.render()}clear(){return this.element.textContent="",this}get value(){return this.element.textContent}setValue(t="",e=!1){["string","number"].includes(typeof t)&&(this.text=""+t,this.text.includes("\n")&&(this.text=this.text.split("\n").map((t=>"<span>".concat(t,"</span></br>"))).join(""))),t instanceof r&&(this.text=""+t.UI()),e?this.element.innerHTML+=this.text:this.element.innerHTML=this.text,(t instanceof Array||t instanceof Set)&&(t instanceof Set&&(t=[...t]),this.addValue(...t))}addValue(...t){return t.map((t=>{this.setValue(" ",!0),this.setValue(t,!0)})),this}toggleValues(...t){let e=(t=t.map((t=>""+t))).indexOf(""+this.value);return-1!=e&&e!=t.length-1?this.setValue(t[e+1]):this.setValue(t[0]),this}}const Ye=(...t)=>{const e=new Xe(...t);return We.text.push(e),e.cache.order=We.text.length,e};class Ze extends qe{constructor(...t){super(),this.element=document.createElement("p"),this.addValue(...t),this.style({margin:0,padding:0}),this.render()}addValue(...t){for(let e=0;e<t.length;e++)"string"==typeof t[e]||"number"==typeof t[e]?(this.element.appendChild(document.createTextNode(t[e])),this.element.appendChild(document.createElement("br"))):t[e]instanceof qe?this.element.appendChild(t[e].element):t[e]instanceof r&&Ye(t.a+" + "+t.b+"i");return this}clear(){return this.element.childNodes.forEach((t=>t.remove())),this}setValue(...t){return this.clear(),this.addValue(...t),this}}const Ge=(...t)=>{const e=(new Ze).append(...t);return We.p.push(e),e.cache.order=We.p.length,e};class Qe extends qe{constructor(t=1,e=""){super(),this.element=document.createElement("h"+t),this.element.textContent=e,this.render()}get value(){return this.element.innerText}setValue(t=""){this.element.innerText=t}addValue(t=""){return this.element.innerText+=t,this}}const Je=(t="")=>{const e=new Qe(1,t);return We.h1.push(e),e.cache.order=We.text.length,e},Ke=(t="")=>{const e=new Qe(2,t);return We.h2.push(e),e.cache.order=We.text.length,e},tr=(t="")=>{const e=new Qe(3,t);return We.h3.push(e),e.cache.order=We.text.length,e},er=(t="")=>{const e=new Qe(4,t);return We.h4.push(e),e.cache.order=We.text.length,e},rr=(t="")=>{const e=new Qe(5,t);return We.h5.push(e),e.cache.order=We.text.length,e},nr=(t="")=>{const e=new Qe(6,t);return We.h6.push(e),e.cache.order=We.text.length,e};class sr extends qe{constructor(t){super(t),this.render()}}class ir extends qe{constructor(){super(),this.element=document.createElement("br"),this.render(),delete this.append}}class or extends qe{constructor(){super(),this.element=document.createElement("hr"),this.render(),delete this.append}}class ar extends qe{constructor(t){super(),this.element=document.createElement("a"),this.setHref(t),this.render()}setHref(t){this.element.href=t}}const lr=()=>new ir,hr=()=>new or,cr=(t=1)=>new Array(t).fill(new ir),ur=(t=1)=>new Array(t).fill(new or),mr=(t,...e)=>new ar(t).append(...e),dr=(t,...e)=>new sr(t).append(...e);class pr extends qe{constructor(t){super(),this.element=document.createElement("li"),this.append(t),this.render()}}class fr extends qe{constructor(){super(),delete this.append}append(...t){for(let e=0;e<t.length;e++){let r=null;["string","number"].includes(typeof t[e])&&(t[e]=Ye(t[e])),t[e]instanceof qe&&(r=new pr(t[e])),r.setTarget(this.element),this.items.push(r[0]),this.maintain()}}remove(...t){if(0==t.length)this.Target.children.length&&this.Target.removeChild(this.element);else{const e=t=>{"number"==typeof t&&(t=this.items[t]),t instanceof qe&&this.element.removeChild(t.parent.element),this.items=this.items.filter((e=>e!==t))};for(let r=0;r<t.length;r++)e(t[r]);for(let t=0;t<this.items.length;t++)Object.assign(this,{[[t]]:this.items[t]})}return this}insertAt(t,...e){if(t>=this.element.children.length)this.append(...e);else for(let r=0;r<e.length;r++){let n=null;["number","string"].includes(typeof e[r])&&(e[r]=Ye(e[r])),e[r]instanceof qe&&(n=new pr(e[r])),this.element.insertBefore(n.element,this.items[t].parent.element),this.items.splice(t,0,e[r][0])}return this}filterByTextContent(t,e=!1){return this.items.map((t=>t.parent.render())),this.items.filter((r=>{const n=r.element.textContent;return!(e?n===t:n.includes(t))})).map((t=>t.parent.render(!1))),this}sortByTextContent(t=1){return this.items.map((t=>t.parent.render(!1))),this.sortedItems=this.items.sort(((e,r)=>t*e.element.textContent.localeCompare(r.element.textContent))),this.append(...this.sortedItems),this}filterByClass(t){return this.items.map((t=>t.parent.render(!0))),this.items.filter((e=>!e.Classes.includes(t))).map((t=>t.parent.render(!1))),this}delete(t){return[...this.element.children].indexOf(t)}push(){}pop(){}unshift(){}shift(){}sort(){}filter(){}slice(){}}class gr extends fr{constructor(...t){super(),this.element=document.createElement("ol"),this.append(...t),this.render()}type(t=1){return this.element.setAttribute("type",t),this}start(t=1){return this.element.setAttribute("start",t),this}}class yr extends fr{constructor(...t){super(),this.element=document.createElement("ul"),this.append(...t),this.render()}}const br=(...t)=>new gr(...t),Fr=(...t)=>new yr(...t);class wr extends qe{constructor(t="button"){super(),this.element=document.createElement("button"),this.setValue(t),this.render(),this.st.cursor("pointer")}setValue(t){return t instanceof qe?t.setTarget(this.element):(this.element.appendChild(document.createTextNode("")),this.element.childNodes[0].data=t),this}get value(){return this.element.innerText}toggleValues(...t){let e=(t=t.map((t=>""+t))).indexOf(""+this.value);return-1!=e&&e!=t.length-1?this.setValue(t[e+1]):this.setValue(t[0]),this}}const xr=t=>new wr(t);class vr extends qe{constructor(t=""){super(),this.element=document.createElement("option"),t instanceof Object&&"value"in t?(this.setValue(t.value),this.setText(t?.text??t.value)):this.setValue(t)}setValue(t=""){return this.element.value=t,this}setText(t=""){return t&&(this.element.textContent=t),this}}class Cr extends qe{constructor(){super(),this.element=document.createElement("textarea"),this.render()}get value(){return this.element.textContent}}const Er=()=>new Cr;class kr extends qe{constructor(t="",e){super(),this.element=document.createElement("input"),Object.assign(this.events,{input:null}),this.setValue(t),e&&this.linkDatalist(e),this.render()}onInput(...t){return this.events.input||(this.events.input=je(this)),this.events.input.onInput(...t),this}onChange(...t){return this.events.input||(this.events.input=je(this)),this.events.input.onChange(...t),this}linkDatalist(t){let e;if(t instanceof Rr)e=t.Id;else if(t instanceof Array){const r=new Rr(...t);e=r.Id,console.log(r)}else e=t;return this.element.setAttribute("list",e),this}get value(){return this.element.value}_setType(t){return this.element.type=t,this}setValue(t=""){return this.element.value=t,this}useState(t){return this.setValue(t),[{value:this.value},t=>this.setValue(t)]}setPlaceholder(t){return t&&(this.element.placeholder=t),this}get isValide(){return this.element.checkValidity()}setRequired(t=!0){return this.element.required=t,this}select(){return this.element.select(),this}copy(){return this.element.select(),document.execCommand("copy"),this}cut(){return this.element.select(),document.execCommand("cut"),this}accept(t){return this.element.accept=t,this}}class Ar extends kr{constructor(){super(),this._setType("search"),this.Length=0}onsearch(t){return this.element.addEventListener("search",(()=>t())),this}connect(...t){return this}displayLength(t){return this.element.addEventListener("keyup",(()=>t.setValue(this.Length))),this}}class Br extends kr{constructor(t,e,r=1){super(),this._setType("number"),this.setMin(t).setMax(e).setStep(r),this.render()}get value(){return+this.element.value}setMin(t){return this.element.min=t,this}setMax(t){return this.element.max=t,this}setStep(t){return this.element.step=t,this}}class Dr extends Br{constructor(t=0,e=0,r=10,n=1){super(),this._setType("range"),this.setMin(e).setMax(r).setValue(t).setStep(n),this.render()}}class Mr extends kr{constructor(){super(),this._setType("color"),this.background(this.value),this.render(),this.onInput((()=>this.background(this.value)))}}class Tr extends kr{constructor(){super(),this._setType("password"),this.render()}}class _r extends kr{constructor(){super(),this._setType("email"),this.render()}}class Or extends kr{constructor(){super(),this._setType("time"),this.render()}}class Ir extends kr{constructor(){super(),this._setType("date"),this.render()}}class Sr extends kr{constructor(){super(),this._setType("datetime-local"),this.render()}}class Lr extends kr{constructor(){super(),this._setType("checkbox"),this.cursor("pointer")}get checked(){return this.element.checked}check(t=!0){return this.element.checked=t,this}color(t){return this.element.style.accentColor=t,this}}class Vr extends kr{constructor(){super(),this._setType("radio"),this.cursor("pointer")}get checked(){return this.element.checked}check(t=!0){return this.element.checked=t,this}color(t){return this.element.style.accentColor=t,this}}class jr extends qe{constructor(t="File"){super(),this._aux_element=xr(t).setTarget(this.Target),this.element=document.createElement("input"),this.element.setAttribute("type","file"),this.element.setAttribute("accept","image"),this._aux_element.onClick((()=>this.element.click())),this.element.onChange=this.handleImage.bind(this)}handleImage(t){const e=new FileReader,r=new Image;e.onload=function(t){r.src=t.target.result,console.log(r.src)},e.readAsDataURL(t.target.files[0]),this.img=r}get value(){return this.img}render(t=!0){return t?this.Target.appendChild(this._aux_element.element):this.remove(),this}remove(){return this.Target.children.length&&this.Target.removeChild(this._aux_element.element),this}}class Rr extends qe{constructor(...t){super(),this.element=document.createElement("datalist"),this.addOptions(...t).setId("ziko-datalist-id"+G.string(10)),this.render()}addOptions(...t){return t.map((t=>this.append(new vr(t)))),this}}const Pr=(t,e)=>{if(t instanceof Object){const{datalist:e,placeholder:r}=t;return t=t.value??"",new kr(t,e).setPlaceholder(r)}return new kr(t,e)},Nr=(...t)=>new Rr(...t),zr=(t,e,r,n)=>{if(t instanceof Object){const{min:e=0,max:r=10,step:n=1}=t;return new Dr(t=t?.value??5,e,r,n)}return new Dr(t,e,r,n)},$r=(t,e,r)=>{if(t instanceof Object){const{value:e,max:r=10,step:n=1,placeholder:s=""}=t;return new Dr(t=t?.min??0,r,n).setValue(e).setPlaceholder(s)}return new Br(t,e,r)},Ur=(...t)=>(new Ar).connect(...t),Hr=t=>new jr(t),qr=()=>new Tr,Wr=()=>new _r,Xr=()=>new Mr,Yr=()=>new Or,Zr=()=>new Ir,Gr=()=>new Sr,Qr=()=>new Lr,Jr=()=>new Vr;class Kr extends qe{constructor(){super(),this.element=document.createElement("select"),this.render()}addOptions(...t){return t.map((t=>this.append(new vr(t)))),this}}const tn=()=>new Kr;class en extends qe{constructor(t="",e="100%",r="50vh"){super(),this.element=document.createElement("video"),"VIDEO"===t.nodeName?this.element.setAttribute("src",t.src):this.element.setAttribute("src",t),"number"==typeof e&&(e+="%"),"number"==typeof r&&(r+="%"),this.style({width:e,height:r}),this.render()}controls(t=!0){return this.element.controls=t,this}play(){return this.element.play(),this}pause(){return this.element.pause(),this}poster(t=""){return this.element.poster=t,this}PIP(t){return this.element.requestPictureInPicture(t),this}}class rn extends en{constructor(){super(),this.element.setAttribute("src",""),this.constraints={audio:!0,video:{width:1280,height:720}}}start(){return navigator.mediaDevices.getUserMedia(this.constraints).then((t=>{this.element.srcObject=t,this.element.onloadedmetadata=()=>{this.element.play()}})).catch((function(t){console.log(t.name+": "+t.message)})),this}}const nn=()=>new rn;class sn extends qe{constructor(t,e,r){super(),this.element=document.createElement("img"),this.value=t,"IMG"===t.nodeName?this.element.setAttribute("src",t.src):this.element.setAttribute("src",t),"number"==typeof e&&(e+="%"),"number"==typeof r&&(r+="%"),this.style({border:"1px solid black",width:e,height:r}),this.render()}updateSrc(t){return this.value=t,this.element.src=t,this}toggleSrc(...t){let e=(t=t.map((t=>""+t))).indexOf(""+this.value);return-1!=e&&e!=t.length-1?this.updateSrc(t[e+1]):this.updateSrc(t[0]),this}alt(t){return this.element.alt=t,this}}class on extends qe{constructor(t){super(),this.element=document.createElement("audio"),this.element.setAttribute("src",t),this.render(),this.controls()}controls(t=!0){return this.element.controls=t,this}play(){return this.element.play(),this}pause(){return this.element.pause(),this}}class an extends qe{constructor(t,e){super(),this.element=document.createElement("figure"),this.img=t.width("100%").element,this.caption=document.createElement("figcaption"),this.caption.append(e.element),this.element.append(this.img),this.element.append(this.caption),this.render()}}const ln=(t,e,r)=>new sn(t,e,r),hn=t=>new on(t),cn=(t,e)=>new an(t,e),un=(t,e,r)=>new en(t,e,r);function mn(t){return 1==t?this.style({flexDirection:"column"}):-1==t&&this.style({flexDirection:"column-reverse"}),this}function dn(t){return 1==t?this.style({flexDirection:"row"}):-1==t&&this.style({flexDirection:"row-reverse"}),this}function pn(t){return"number"==typeof t&&(t=["flex-start","center","flex-end"][t+1]),t}function fn(t){return pn(-t)}class gn extends qe{constructor(t="div",e="100%",r="100%"){super(),this.element=document.createElement(t),this.direction="cols","number"==typeof e&&(e+="%"),"number"==typeof r&&(r+="%"),this.style({width:e,height:r}),this.style({display:"flex"}),this.render()}resp(t,e=!0){return this.wrap(e),this.element.clientWidth<t?this.vertical():this.horizontal(),this}setSpaceAround(){return this.style({justifyContent:"space-around"}),this}setSpaceBetween(){return this.style({justifyContent:"space-between"}),this}setBaseline(){return this.style({alignItems:"baseline"}),this}gap(t){return"row"===this.direction?this.style({columnGap:t}):"column"===this.direction&&this.style({rowGap:t}),this}wrap(t="wrap"){return this.style({flexWrap:"string"==typeof t?t:["no-wrap","wrap","wrap-reverse"][+t]}),this}_justifyContent(t="center"){return this.style({justifyContent:t}),this}vertical(t,e,r=1){return mn.call(this,r),this.style({alignItems:"number"==typeof t?pn.call(this,t):t,justifyContent:"number"==typeof e?fn.call(this,e):e}),this}horizontal(t,e,r=1){return dn.call(this,r),this.style({alignItems:"number"==typeof e?fn.call(this,e):e,justifyContent:"number"==typeof t?pn.call(this,t):t}),this}show(){return this.isHidden=!1,this.style({display:"flex"}),this}}const yn=(...t)=>{let e="div";return"string"==typeof t[0]&&(e=t[0],t.pop()),new gn(e).append(...t)};class bn extends qe{constructor(t="div",e="50vw",r="50vh"){super(),this.element=document.createElement(t),this.direction="cols","number"==typeof e&&(e+="%"),"number"==typeof r&&(r+="%"),this.style({border:"1px solid black",width:e,height:r}),this.style({display:"grid"}),this.render()}columns(t){let e="";for(let r=0;r<t;r++)e=e.concat(" auto");return this.#i(e),this}#i(t="auto auto"){return this.style({gridTemplateColumns:t}),this}gap(t=10,e=t){return"number"==typeof t&&(t+="px"),"number"==typeof e&&(e+="px"),this.style({gridColumnGap:t,gridRowGap:e}),this}}const Fn=(...t)=>new bn("div").append(...t);class wn extends gn{constructor(...t){super(),this.style({position:"relative",overflow:"hidden",touchAction:"none",userSelect:"none"}),this.horizontal("space-around",0),this.track=Section(...t).style({display:"inline-flex"}),this.track.size(100*this.track.children.length+"vw"),this.track.setTarget(this),this.track.items.map((t=>t.style({pointerEvents:"none",margin:"auto 10px"}))),this.x0=null,this.tx=0,this.onPtrMove((t=>{if(t.isDown){let e=t.event.pageX-this.x0;this.track.translateX(this.tx+e,0)}})),this.onPtrDown((t=>{console.log(t.event),this.x0=t.event.pageX;const e=window.getComputedStyle(this.track.element).getPropertyValue("transform");"none"!==e&&(this.tx=+e.split(",")[4])})),this.onPtrUp((t=>console.log(t.isDown))),this.onPtrLeave((t=>{}))}}const xn=(...t)=>new wn(...t);class vn extends gn{constructor(){super()}addSection(){const t=Section().style({width:"80%",height:"50px",margin:"5px 0px",border:"1px red solid"});return this.append(t),this}}const Cn=()=>new vn;class En extends gn{#o=0;constructor(t,e){super(),this.style({boxSizing:"border-box",backgroundColor:"blanchedalmond",border:"1px red solid",margin:"30px"}),this.append(yn().size("auto","auto").style({boxSizing:"border-box",justifyContent:"center",alignItems:"center",textAlign:"center",minWidth:"50px",minHeight:"50px",backgroundColor:"darkblue",border:"1px darkblue solid"}),yn().style({boxSizing:"border-box",justifyContent:"center",alignItems:"center",textAlign:"center",width:"100%",height:"100%",backgroundColor:"darkslategrey"})),this.Controller=this.items[0].setAttribute("role","tablist"),this.Content=this.items[1],t.length!==e.length?console.error(""):(this.Controller.append(...t),this.Content.append(...e)),this.init(),this.display(0)}init(){for(let t=0;t<this.Controller.length;t++)this.Controller[t].setAttribute("role","tab").setAttribute("aria-controls",`tab${t}`),this.Content[t].setAttribute("role","tabpanel").setAttribute("aria-labelledby",`tab${t}`).setAttribute("tabindex",-1);return this.Controller.forEach((t=>t.onClick((t=>{const e=t.Target.element.getAttribute("aria-controls"),r=+e.slice(3);this.Content.filter((t=>t.element.getAttribute("aria-labelledby")===e),(()=>{this.#o!==r&&this.display(r)}))})))),this}addPairs(t,e){this.Controller.append(t),this.Content.append(e);const r=this.Controller.length;return this.Controller.at(-1).setAttribute("role","tab").setAttribute("aria-controls","tab"+(r-1)),this.Content.at(-1).setAttribute("role","tabpanel").setAttribute("aria-labelledby","tab"+(r-1)).setAttribute("tabindex",-1),this}removePairs(t){}display(t){return this.#o=t%this.Content.length,this.Controller.forEach((t=>t.setAttribute("tabindex",-1).setAttribute("aria-selected",!1))),this.Controller.at(this.#o).setAttribute("tabindex",0).setAttribute("aria-selected",!0),(async()=>{await this.Content.forEach((t=>t.hide())),await this.Content.at(this.#o).setAttribute("tabindex",0).show()})(),this}next(t=1){return this.display(this.#o+t),this}previous(t=1){return this.display(this.#o-t),this}useHorizontalSwippe(){return this.onPtrDown(),this.onPtrUp((t=>this.next(Math.sign(t.swippe.delta_x)))),this}useVerticalSwippe(){return this.onPtrDown(),this.onPtrUp((t=>this.next(Math.sign(t.swippe.delta_y)))),this}}const kn=(t,e)=>new En(t,e);class An extends qe{constructor(t,e,r="😁"){super(),this.element=document.createElement("details"),this.summary=dr("summary",t).style({fontSize:"1.1em",padding:"0.625rem",fontWeight:"bold",listStyleType:`"${r}"`,cursor:"pointer"}),this.summary[0].style({marginLeft:"0.5em"}),this.content=e.style({margin:"0.7em"}),this.append(this.summary,this.content),this.style({marginBottom:"0.7em"}),this.render()}get isOpen(){return this.element.open}open(){return this.element.open=!0,this}onOpen(t){return this}close(){return this.element.open=!0,this}onClose(t){return this}toggle(){return this.element.open=!this.element.open,this}}const Bn=(t,e,r)=>new An(t,e,r);class Dn extends qe{constructor(){super(),this.element=document.createElement("main"),this.render()}}class Mn extends qe{constructor(){super(),this.element=document.createElement("header"),this.render()}}class Tn extends qe{constructor(){super(),this.element=document.createElement("nav"),this.render()}}class _n extends qe{constructor(){super(),this.element=document.createElement("section"),this.style({position:"relative"}),this.render()}}class On extends qe{constructor(){super(),this.element=document.createElement("article"),this.render()}}class In extends qe{constructor(){super(),this.element=document.createElement("aside"),this.render()}}class Sn extends qe{constructor(){super(),this.element=document.createElement("footer"),this.render()}}const Ln=(...t)=>(new _n).append(...t),Vn=(...t)=>(new On).append(...t),jn=(...t)=>(new Dn).append(...t),Rn=(...t)=>(new Mn).append(...t),Pn=(...t)=>(new Sn).append(...t),Nn=(...t)=>(new Tn).append(...t),zn=(...t)=>(new In).append(...t);class $n extends qe{constructor(...t){super(),this.element=document.createElement("Tr"),this.append(...t)}}class Un extends qe{constructor(...t){super(),this.element=document.createElement("Td"),this.append(...t)}}class Hn extends qe{constructor(...t){super(),this.element=document.createElement("Thead"),this.append(...t)}}class qn extends qe{constructor(...t){super(),this.element=document.createElement("Tbody"),this.append(...t)}}class Wn extends qe{constructor(t){super(),this.element=document.createElement("Caption"),this.append(t)}}const Xn=(...t)=>(t=t.map((t=>(t instanceof qe||(t=Ye(t)),t))),new Un(...t)),Yn=t=>new Wn(t),Zn=t=>{var e=new Array(t.rows).fill(null).map((()=>((...t)=>new $n(...t))())),r=t.arr.map((t=>t.map((()=>null))));for(let n=0;n<r.length;n++)for(let s=0;s<r[0].length;s++)r[n][s]=Xn(t.arr[n][s]),e[n].append(r[n][s]);return e};class Gn extends qe{constructor(t=K(0,0),{caption:e=null,head:r=null,foot:n=null}={}){super(),this.element=document.createElement("table"),this.structure={caption:e,head:r,body:null,foot:n},this.fromMatrix(t),e&&this.setCaption(e),this.render()}get caption(){return this.structure.caption}get header(){}get body(){}get footer(){}setCaption(t){return this.removeCaption(),this.structure.caption=Yn(t),this.append(this.structure.caption),this}removeCaption(){return this.structure.caption&&this.removeItem(...this.items.filter((t=>t instanceof Wn))),this.structure.caption=null,this}setHeader(...t){return this.tHead=((...t)=>(t=t.map((t=>(t instanceof qe||(t=Xn(t)),t))),new Hn(...UI)))(...t),this.append(this.tHead),this}removeHeader(){return this.removeItem(...this.items.filter((t=>t instanceof Wn))),this}setFooter(t){return this.structure.caption=Yn(t),this.append(this.structure.caption),this}removeFooter(){return this.removeItem(...this.items.filter((t=>t instanceof Wn))),this}fromMatrix(t){return this.bodyMatrix=t instanceof Array?K(t):t,this.structure.body&&this.structure.body.remove(),this.structure.body=((...t)=>new qn(...t))(),this.append(this.structure.body),this.structure.body.append(...Zn(this.bodyMatrix)),this}transpose(){return this.fromMatrix(this.bodyMatrix.T),this}hstack(t){return t instanceof Gn&&(t=t.bodyMatrix),this.fromMatrix(this.bodyMatrix.clone.hstack(t)),this}vstack(t){return t instanceof Gn&&(t=t.bodyMatrix),this.fromMatrix(this.bodyMatrix.clone.vstack(t)),this}slice(t=0,e=0,r=this.bodyMatrix.rows-1,n=this.bodyMatrix.cols-1){return this.fromMatrix(this.bodyMatrix.slice(t,e,r,n)),this}sortByCols(t,e={type:"num",order:"asc"}){return this.fromMatrix(this.bodyMatrix.clone.sortTable(t,e)),this}sortByRows(t,e={type:"num",order:"asc"}){return this.fromMatrix(this.bodyMatrix.T.clone.sortTable(t,e).T),this}filterByRows(t){return this.fromMatrix(this.bodyMatrix.clone.filterByRows(t)),this}filterByCols(t){return this.fromMatrix(this.bodyMatrix.clone.filterByCols(t)),this}forEachRow(t){return this.structure.body.forEach(t),this}forEachItem(t){return this.structure.body.forEach((e=>e.forEach(t))),this}}const Qn=(t,e)=>new Gn(t,e),Jn={Themes:Ht,ZikoHtml:dr,text:Ye,p:Ge,h1:Je,h2:Ke,h3:tr,h4:er,h5:rr,h6:nr,btn:xr,br:lr,hr:hr,brs:cr,hrs:ur,link:mr,ol:br,ul:Fr,input:Pr,search:Ur,slider:zr,checkbox:Qr,radio:Jr,datalist:Nr,inputNumber:$r,inputColor:Xr,inputDate:Zr,inputDateTime:Gr,inputEmail:Wr,inputImage:Hr,inputPassword:qr,inputTime:Yr,select:tn,textarea:Er,inputCamera:nn,image:ln,video:un,audio:hn,figure:cn,Flex:yn,Carousel:xn,Grid:Fn,Header:Rn,Main:jn,Section:Ln,Article:Vn,Aside:zn,Nav:Nn,Footer:Pn,Table:Qn,CodeNote:Cn,Tabs:kn,Accordion:Bn,ExtractAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const r=t[e];"ExtractAll"!==r&&"RemoveAll"!==r&&(globalThis[r]=this[r])}return this},RemoveAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const r=t[e];"RemoveAll"!==r&&delete globalThis[r]}return this}};class Kn{constructor(t,{fps:e,step:r,t:n=[0,null],start:s=!0}={}){this.callback=t,this.cache={isRunning:!1,AnimationId:null,startTime:null,step:r,fps:e,t:n,started:s},this.adjust(),this.i=0}adjust(){if(this.cache.step&&this.cache.fps&&(console.warn(`Fps will be adjusted from ${this.cache.fps} to ${1e3/this.cache.step} to ensure a smoother animation`),this.cache.fps=1e3/this.cache.step),this.cache.started){const t=this.cache.t;t[0]?this.startAfter(t[0]):this.start(),t[1]&&this.stopAfter(t[1])}return this}get TIME_STEP(){return this.cache.step?this.cache.step:1e3/this.cache.fps}start(){return this.cache.isRunning||(this.i=0,this.cache.isRunning=!0,this.cache.startTime=Date.now(),this.animate()),this}pause(){return this.cache.isRunning&&(clearTimeout(this.cache.AnimationId),this.cache.isRunning=!1),this}stop(){return this.pause(),this.i=0,this}resume(){return this.cache.isRunning=!0,this.animate(),this}startAfter(t=1e3){return setTimeout(this.start.bind(this),t),this}stopAfter(t=1e3){return setTimeout(this.stop.bind(this),t),this}animate=()=>{if(this.cache.isRunning){const t=Date.now(),e=t-this.cache.startTime;e>this.TIME_STEP&&(this.callback(this),this.i++,this.cache.startTime=t-e%this.TIME_STEP),this.cache.AnimationId=setTimeout(this.animate,0)}}}const ts=(t,e)=>new Kn(t,e),es={Linear:function(t){return t},InSin:t=>1-Math.cos(t*Math.PI/2),OutSin:t=>Math.sin(t*Math.PI/2),InOutSin:t=>-(Math.cos(Math.PI*t)-1)/2,InQuad:t=>t**2,OutQuad:t=>1-Math.pow(1-t,2),InOutQuad:t=>t<.5?2*Math.pow(t,2):1-Math.pow(-2*t+2,2)/2,InCubic:t=>t**3,OutCubic:t=>1-Math.pow(1-t,3),InOutCubic:t=>t<.5?4*Math.pow(t,3):1-Math.pow(-2*t+2,3)/2,InQuart:t=>t**4,OutQuart:t=>1-Math.pow(1-t,4),InOutQuart:t=>t<.5?8*Math.pow(t,4):1-Math.pow(-2*t+2,4)/2,InQuint:t=>t**5,OutQuint:t=>1-Math.pow(1-t,5),InOutQuint:t=>t<.5?16*Math.pow(t,5):1-Math.pow(-2*t+2,5)/2,InExpo:t=>0===t?0:Math.pow(2,10*t-10),OutExpo:t=>1===t?1:1-Math.pow(2,-10*t),InOutExpo:t=>0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,InCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),OutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),InOutCic:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,Arc:t=>1-Math.sin(Math.acos(t)),Back:t=>Math.pow(t,2)*(2*t-1),Elastic:t=>-2*Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*t/3*t),InBack(t){const e=1.70158;return 2.70158*Math.pow(t,3)-e*t**2},OutBack(t){const e=1.70158;return 1+2.70158*Math.pow(t-1,3)+e*Math.pow(t-1,2)},InOutBack(t){const e=2.5949095;return t<.5?Math.pow(2*t,2)*(7.189819*t-e)/2:(Math.pow(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2},InElastic(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*e)},OutElastic(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1},InOutElastic(t){const e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1},InBounce:t=>1-es.OutBounce(1-t),OutBounce(t){const e=7.5625,r=2.75;return t<1/r?e*t*t:t<2/r?e*(t-=1.5/r)*t+.75:t<2.5/r?e*(t-=2.25/r)*t+.9375:e*(t-=2.625/r)*t+.984375},InOutBounce:t=>t<.5?(1-es.OutBounce(1-2*t))/2:(1+es.OutBounce(2*t-1))/2},rs=(t,e=1e3)=>(...r)=>setTimeout((()=>t(...r)),e),ns=(t,e)=>{let r=0;return(...n)=>{const s=(new Date).getTime();s-r<e||(r=s,t(...n))}},ss=t=>{const e=Date.now(),r=performance.memory.usedJSHeapSize,n=t();return{elapsedTime:Date.now()-e,usedMemory:performance.memory.usedJSHeapSize-r,result:n}},is=t=>new Promise((e=>{if(t.element)return e(t.element);const r=new MutationObserver((()=>{t.element&&(e(t.element),r.disconnect())}));r.observe(document.body,{childList:!0,subtree:!0})})),os=(t,e=2e3)=>{const r=Date.now();for(;Date.now()-r<e;)if(t.element)return t.element},as=t=>new Promise((e=>setTimeout(e,t))),ls=t=>{console.time("timeTaken");const e=t();return console.timeEnd("timeTaken"),e};class hs{constructor(t,{ease:e=es.Linear,step:r=50,t:n=[0,null],start:s=!0,duration:i=3e3}={}){this.cache={isRunning:!1,AnimationId:null,startTime:null,ease:e,step:r,intervall:n,started:s,duration:i},this.t=0,this.tx=0,this.ty=0,this.i=0,this.callback=t}#a(){this.t+=this.cache.step,this.i++,this.tx=vt(this.t,0,this.cache.duration,0,1),this.ty=this.cache.ease(this.tx),this.callback(this),this.t>=this.cache.duration&&(clearInterval(this.cache.AnimationId),this.cache.isRunning=!1)}reset(t=!0){return this.t=0,this.tx=0,this.ty=0,this.i=0,t&&this.start(),this}#l(t=!0){return this.cache.isRunning||(t&&this.reset(!1),this.cache.isRunning=!0,this.cache.startTime=Date.now(),this.cache.AnimationId=setInterval(this.#a.bind(this),this.cache.step)),this}start(){return this.#l(!0),this}pause(){return this.cache.isRunning&&(clearTimeout(this.cache.AnimationId),this.cache.isRunning=!1),this}resume(){return this.#l(!1),this}stop(){return this.pause(),this.reset(!1),this}}const cs=(t,e)=>new hs(t,e),us={wait:as,timeTaken:ls,throttle:ns,debounce:rs,Ease:es,time_memory_Taken:ss,loop:ts,animation:cs,waitForUIElm:is,waitForUIElmSync:os,ExtractAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const r=t[e];"ExtractAll"!==r&&"RemoveAll"!==r&&(globalThis[r]=this[r])}return this},RemoveAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const r=t[e];"RemoveAll"!==r&&delete globalThis[r]}return this}},ms=t=>t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2">$1</a>').replace(/!\[(.*?)\]\((.*?)\)/g,'<img src="$2" alt="$1">'),ds=t=>`<tr>${t.split("|").map((t=>t.trim())).filter((t=>""!==t)).map((t=>`<td>${ms(t)}</td>`)).join("")}</tr>\n`,ps=(t,e)=>{const r=t.slice(1,-1).join("\n");return`<pre>${e?`<code data-language="${e}">${r}</code>`:`<code>${r}</code>`}</pre>\n`},fs=t=>{const e=t.match(/^\d+\.\s/);if(e){let r=+e[1];return`<ol${1===r?"":` start=${r}`}>\n<li>${ms(t.slice(e[0].length))}</li>\n</ol>\n`}return`<ul>\n<li>${ms(t)}</li>\n</ul>\n`},gs=t=>{const e=t.split("\n");let r="",n=!1,s=!1,i=[],o="";for(let t=0;t<e.length;t++){let a=e[t];if(a.startsWith("|"))n||(n=!0,r+="<table>\n"),r+=ds(a);else if(n&&(n=!1,r+="</table>\n"),a.startsWith("```"))s?(s=!1,r+=ps(i,o)):(s=!0,i=[],o=a.slice(3).trim());else if(s)i.push(a);else if(a.startsWith("# ")){const t=a.indexOf(" "),e=a.slice(t+1);r+=`<h${t}>${ms(e)}</h${t}>\n`}else a.startsWith("- ")||a.startsWith("* ")||a.match(/^\d+\.\s/)?r+=fs(a):r+=`<p>${ms(a)}</p>\n`}return r},ys=(t,e=",")=>t.trim().trimEnd().split("\n").map((t=>t.split(e))),bs=(t,e=",")=>new Q(ys(t,e)),Fs=(t,e=",")=>{const[r,...n]=ys(t,e);return n.map((t=>{const e={};return r.forEach(((r,n)=>{e[r]=t[n]})),e}))},ws=(t,e=",")=>JSON.stringify(Fs(t,e)),xs=(t,e)=>{const r=t.trim().trimEnd().split("\n").filter((t=>t));let n=`INSERT INTO ${e} (${r[0].split(",").join(", ")}) Values `,s=[];for(let t=1;t<r.length;t++){const e=r[t].split(",");s.push(`(${e})`)}return n+s.join(",\n")},vs=t=>t instanceof Array?[Object.keys(t[0]),...t.map((t=>Object.values(t)))]:[Object.keys(t)],Cs=(t,e)=>vs(t).map((t=>t.join(e))).join("\n"),Es=t=>vs(t instanceof Object?t:JSON.parse(t)),ks=(t,e=",")=>Cs(t instanceof Object?t:JSON.parse(t),e),As=(t,e)=>{const r=ks(t,e),n=new Blob([r],{type:"text/csv;charset=utf-8;"});return{str:r,blob:n,url:URL.createObjectURL(n)}},Bs=(t,e)=>{const r=[];if(Array.isArray(t))t.forEach((t=>{if("object"==typeof t&&null!==t){r.push(`${e}-`);const n=Bs(t,`${e}  `);r.push(...n)}else r.push(`${e}- ${t}`)}));else for(const n in t)if(t.hasOwnProperty(n)){const s=t[n];if("object"==typeof s&&null!==s){r.push(`${e}${n}:`);const t=Bs(s,`${e}  `);r.push(...t)}else r.push(`${e}${n}: ${s}`)}return r},Ds=(t,e="")=>Bs(t,e).join("\n"),Ms=(t,e)=>Ds(t instanceof Object?t:JSON.parse(t),e),Ts=(t,e)=>{const r=Ms(t,e),n=new Blob([r],{type:"text/yml;charset=utf-8;"});return{str:r,blob:n,url:URL.createObjectURL(n)}},_s=(t,e=1)=>{let r="";for(const n in t)if(t.hasOwnProperty(n)){const s=t[n];r+="\n"+" ".repeat(e)+`<${n}>`,r+="object"==typeof s?_s(s,e+2):`${s}`,r+=`</${n}>`}return r.trim()},Os=(t,e)=>{const r=_s(t,e),n=new Blob([r],{type:"text/xml;charset=utf-8;"});return{str:r,blob:n,url:URL.createObjectURL(n)}},Is=t=>(new XMLSerializer).serializeToString(t),Ss=t=>btoa(Is(t)),Ls=t=>"data:image/svg+xml;base64,"+Ss(t),Vs=(t,e=!0)=>ln(Ls(t)).render(e);function js(t){const e={type:t.nodeName,attributes:{},children:[]};for(let r=0;r<t.attributes.length;r++){const n=t.attributes[r];e.attributes[n.name]=n.value}for(let r=0;r<t.childNodes.length;r++){const n=t.childNodes[r];n.nodeType===Node.ELEMENT_NODE?e.children.push(js(n)):n.nodeType===Node.TEXT_NODE&&(e.text=n.textContent.trim())}return e}const Rs=t=>{const e=new XMLHttpRequest;if(e.open("GET",t,!1),e.send(),200===e.status)return e.responseText;throw new Error(`Failed to fetch data from ${t}. Status: ${e.status}`)};globalThis.fetchdom=async function(t="https://github.com/zakarialaoui10"){const e=await fetch(t),r=await e.text();return(new DOMParser).parseFromString(r,"text/xml").documentElement},globalThis.fetchdomSync=function(t="https://github.com/zakarialaoui10"){const e=Rs(t);return(new DOMParser).parseFromString(e,"text/xml").documentElement};const Ps={parseXML:function(t){return js((new DOMParser).parseFromString(t,"text/xml").documentElement)},preload:Rs,markdown2html:gs,csv2arr:ys,csv2matrix:bs,csv2object:Fs,csv2json:ws,csv2sql:xs,json2arr:Es,json2csv:ks,json2csvFile:As,json2yml:Ms,json2ymlFile:Ts,json2xml:_s,json2xmlFile:Os,svg2str:Is,svg2ascii:Ss,svg2imgUrl:Ls,svg2img:Vs,ExtractAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const r=t[e];"ExtractAll"!==r&&"RemoveAll"!==r&&(globalThis[r]=this[r])}return this},RemoveAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const r=t[e];"RemoveAll"!==r&&delete globalThis[r]}return this}};class Ns{color({stroke:t,fill:e}){return this.element.setAttribute("stroke",t),this.element.setAttribute("fill",e),this}fill(t="none"){return this.element.setAttribute("fill",t),this}stroke(t="none",e){return this.element.setAttribute("stroke",t),e&&this.strokeWidth(e),this}strokeWidth(t=1){return this.element.setAttribute("stroke-width",t),this}opacity(t=1){return this.element.setAttribute("opacity",t),this}}class zs extends Ns{constructor(t,e,r,n,s=!0){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.setX(t).setY(e).width(r).height(n),this.rx=this.x+this.w/2,this.ty=this.y+this.h/2}setX(t){return this.element.x.baseVal.value=t,this.x=t,this}setY(t){return this.element.y.baseVal.value=t,this.y=t,this}r(t,e){return this.rx=t,this.ry=e,this.setX(this.rx-this.w/2),this.setY(this.ry-this.h/2),this}width(t){return this.element.width.baseVal.value=t,this.w=t,this}height(t){return this.element.height.baseVal.value=t,this.h=t,this}}const $s=(t,e,r,n,s)=>new zs(t,e,r,n,s);class Us extends Ns{constructor(t,e,r){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.cx(t).cy(e).r(r)}cx(t){return this.element.cx.baseVal.value=t,this}cy(t){return this.element.cy.baseVal.value=t,this}r(t){return this.element.r.baseVal.value=t,this}get R(){return this.element.r.baseVal.value}get Cx(){return this.element.cx.baseVal.value}get Cy(){return this.element.cy.baseVal.value}}const Hs=(t,e,r)=>new Us(t,e,r);class qs extends Ns{constructor(t,e,r,n){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","ellipse"),this.cx(t).cy(e).rx(r).ry(n)}cx(t){return this.element.cx.baseVal.value=t,this}cy(t){return this.element.cy.baseVal.value=t,this}rx(t){return this.element.rx.baseVal.value=t,this}ry(t){return this.element.ry.baseVal.value=t,this}}const Ws=(t,e,r,n)=>new qs(t,e,r,n);class Xs extends Ns{constructor(t,e,r,n){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","line"),this.x1(t).y1(e).x2(r).y2(n).stroke("black")}x1(t){return this.element.x1.baseVal.value=t,this}y1(t){return this.element.y1.baseVal.value=t,this}x2(t){return this.element.x2.baseVal.value=t,this}y2(t){return this.element.y2.baseVal.value=t,this}}const Ys=(t,e,r,n)=>new Xs(t,e,r,n);class Zs extends Ns{constructor(t=[],e=[]){super(),this.X=t,this.Y=e,this.element=document.createElementNS("http://www.w3.org/2000/svg","polygon"),this.element.setAttribute("points","")}addPoint(t,e){let r=this.element.parentElement.createSVGPoint();return r.x=t,r.y=e,this.element.points.appendItem(r),this}addPoints(t,e){for(let r=0;r<t.length;r++){let n=this.element.parentElement.createSVGPoint();n.x=t[r],n.y=e[r],this.element.points.appendItem(n)}return this}}const Gs=(t,e)=>new Zs(t,e);class Qs extends Ns{constructor(t="",e="100%",r="100%",n=0,s=0){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","image"),this.setSrc(t).width(e).height(r).x(n).y(s)}x(t){return this.element.x.baseVal.value=t,this}y(t){return this.element.y.baseVal.value=t,this}width(t){return this.element.setAttribute("width",t),this}height(t){return this.element.setAttribute("height",t),this}setSrc(t=""){return this.element.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),this}}const Js=(t,e,r,n,s)=>new Qs(t,e,r,n,s);class Ks extends Ns{constructor(t,e,r){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","text"),this.setText(t),this.x(e).y(r)}x(t){return this.element.setAttribute("x",t),this}y(t){return this.element.setAttribute("y",t),this}setText(t=""){return this.element.textContent=t,this}}const ti=(t,e,r)=>new Ks(t,e,r);class ei extends Ns{constructor(...t){super(),this.items=[],this.element=document.createElementNS("http://www.w3.org/2000/svg","g"),this.add(...t)}add(...t){for(let e=0;e<t.length;e++)this.element.appendChild(t[e].element),this.items.push(t[e]);return 1===t.length?t[0]:t}remove(...t){for(let e=0;e<t.length;e++)this.element.removeChild(t[e].element),this.items=this.items.filter((e=>!t));return this}}const ri=(...t)=>new ei(...t);class ni extends qe{constructor(t=360,e=300){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.setAttribute("width",t),this.setAttribute("height",e),this.style({border:"1px black solid"}),this.render()}view(t,e,r,n){let s=Math.abs(r-t),i=Math.abs(n-e);return this.element.setAttribute("viewBox",[t,e,s,i].join(" ")),this}add(...t){for(let e=0;e<t.length;e++)this.element.appendChild(t[e].element),this.items.push(t[e]);return this.maintain(),this}remove(...t){for(let e=0;e<t.length;e++)this.element.removeChild(t[e].element),this.items=this.items.filter((e=>!t));return this.maintain(),this}text(t,e,r){let n=ti(t,e,r);return this.element.appendChild(n.element),n.x(e-n.element.getComputedTextLength()/2),n}rect(t,e,r,n){let s=$s(t,e,r,n);return this.add(s),s}line(t,e,r,n){let s=Ys(t,e,r,n);return this.element.appendChild(s.element),s}circle(t,e,r){let n=Hs(t,e,r);return this.element.appendChild(n.element),n}ellipse(t,e,r,n){let s=Ws(t,e,r,n);return this.element.appendChild(s.element),s}polygon(t,e){let r=Gs(t,e);return this.element.appendChild(r.element),r.addPoints(t,e),r}image(t,e,r,n,s){let i=Js(t,e,r,n,s);return this.element.appendChild(i.element),i}mask(){}toString(){return(new XMLSerializer).serializeToString(this.element)}btoa(){return btoa(this.toString())}toImg(){return"data:image/svg+xml;base64,"+this.btoa()}toImg2(){return"data:image/svg+xml;charset=utf8,"+this.toString().replaceAll("<","%3C").replaceAll(">","%3E").replaceAll("#","%23").replaceAll('"',"'")}}const si=(t,e)=>new ni(t,e);class ii extends qe{constructor(t,e){super(),this.element=document.createElement("canvas"),this.ctx=this.element.getContext("2d"),this.style({border:"1px red solid"}),this.transformMatrix=new Q([[1,0,0],[0,1,0],[0,0,1]]),this.axisMatrix=new Q([[-10,-10],[10,10]]),this.render(),setTimeout((()=>this.resize(t,e)),0),this.on("sizeupdated",(()=>this.adjust()))}get Width(){return this.element.width}get Height(){return this.element.height}get Xmin(){return this.axisMatrix[0][0]}get Ymin(){return this.axisMatrix[0][1]}get Xmax(){return this.axisMatrix[1][0]}get Ymax(){return this.axisMatrix[1][1]}get ImageData(){return this.ctx.getImageData(0,0,c.Width,c.Height)}draw(t=!0){return t?(this.clear(),this.items.forEach((t=>{t.parent=this,t.draw(this.ctx)}))):(this.items.at(-1).parent=this,this.items.at(-1).draw(this.ctx)),this.maintain(),this}applyTransformMatrix(){return this.ctx.setTransform(this.transformMatrix[0][0],this.transformMatrix[1][0],this.transformMatrix[0][1],this.transformMatrix[1][1],this.transformMatrix[0][2],this.transformMatrix[1][2]),this}resize(t,e){return this.size(t,e),this.lineWidth(),this.view(this.axisMatrix[0][0],this.axisMatrix[0][1],this.axisMatrix[1][0],this.axisMatrix[1][1]),this.emit("sizeupdated"),this}adjust(){return this.element.width=this.element.getBoundingClientRect().width,this.element.height=this.element.getBoundingClientRect().height,this.view(this.axisMatrix[0][0],this.axisMatrix[0][1],this.axisMatrix[1][0],this.axisMatrix[1][1]),this}view(t,e,r,n){return this.transformMatrix[0][0]=this.Width/(r-t),this.transformMatrix[1][1]=-this.Height/(n-e),this.transformMatrix[0][2]=this.Width/2,this.transformMatrix[1][2]=this.Height/2,this.axisMatrix=new Q([[t,e],[r,n]]),this.applyTransformMatrix(),this.clear(),this.lineWidth(1),this.draw(),this}reset(){return this.ctx.setTransform(1,0,0,0,0,0),this}append(t){return this.items.push(t),this.draw(!1),this}background(t){this.ctx.fillStyle=t,this.ctx.setTransform(1,0,0,1,0,0),this.ctx.fillRect(0,0,this.Width,this.Height),this.applyTransformMatrix(),this.draw()}lineWidth(t){return this.ctx.lineWidth=t/this.transformMatrix[0][0],this}ImageData(t=0,e=0,r=this.Width,n=this.Height){return this.ctx.getImageData(t,e,r,n)}clear(){return this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.Width,this.Height),this.applyTransformMatrix(),this}clone(){console.log(this.Width);const t=new ii;return t.items=this.items,t.transformMatrix=this.transformMatrix,t.axisMatrix=this.axisMatrix,Object.assign(t.cache,{...this.cache}),this.size(element.style.width,element.style.width),this.applyTransformMatrix(),this.draw(),this.adjust(),t}toImage(){return this.img=document.createElement("img"),this.img.src=this.element.toDataURL("image/png"),this}toBlob(){this.element.toBlob((function(t){var e=document.createElement("img"),r=URL.createObjectURL(t);e.onload=function(){URL.revokeObjectURL(r)},e.src=r,console.log(e)}))}zoomIn(){}zoomOut(){}undo(t){}redo(t){}stream(){}}const oi=(t,e)=>new ii(t,e);class ai{constructor(t,e){this.parent=null,this.position={x:t,y:e},this.cache={interact:null,config:{draggable:!1,selected:!1,highlighted:!1,rendered:!1},style:{normal:{strokeEnabled:!0,fillEnabled:!1,strokeColor:"#111111",fillColor:"#777777"},highlighted:{strokeEnabled:!0,fillEnabled:!1,strokeColor:null,fillColor:null}}},this.history={position:[],styles:[]},this.render()}get px(){return(this.position.x??0)+(this.parent?.position?.x??0)}get py(){return(this.position.y??0)+(this.parent?.position?.y??0)}isIntersectedWith(){}isInStroke(t,e){let r;return this.parent&&(this.parent.ctx.setTransform(1,0,0,1,0,0),r=this.parent.ctx.isPointInStroke(this.path,t,e),this.parent.applyTransformMatrix()),r}isInPath(t,e){let r;return this.parent&&(this.parent.ctx.setTransform(1,0,0,1,0,0),r=this.parent.ctx.isPointInPath(this.path,t,e),this.parent.applyTransformMatrix()),r}posX(t){return this.position.x=t,this.parent&&this.parent.draw(),this}posY(t){return this.position.y=t,this.parent&&this.parent.draw(),this}color({stroke:t=this.cache.style.normal.strokeColor,fill:e=this.cache.style.normal.fillColor}={stroke:t,fill:e}){return this.cache.style.normal.strokeColor=t,this.cache.style.normal.fillColor=e,this.parent&&this.parent.draw(),this}translate(t=0,e=0){this.position.x+=t,this.position.y+=e,this.parent&&this.parent.draw()}applyNormalStyle(t){return t.strokeStyle=this.cache.style.normal.strokeColor,t.fillStyle=this.cache.style.normal.fillColor,this}applyHighlightedStyle(t){return t.strokeStyle=this.cache.style.highlighted.strokeColor,t.fillStyle=this.cache.style.highlighted.fillColor,this}stroke(t=this.cache.style.normal.strokeColor,e=!0){return this.cache.style.normal.strokeEnabled=e,this.cache.style.normal.strokeColor=t,this.parent&&this.parent.draw(),this}fill(t=this.cache.style.normal.fillColor,e=!0){return this.cache.style.normal.fillEnabled=e,this.cache.style.normal.filleColor=t,this.parent&&this.parent.draw(),this}render(t=!0){return this.cache.config.rendered=t,this}}class li extends ai{constructor(t,e,r,n){super(t,e),this.r=r,this.angle=n,this.path=null}draw(t){if(this.cache.config.rendered){t.save(),this.applyNormalStyle(t),t.beginPath(),this.path=new Path2D,this.path.arc(this.px,this.py,this.r,0,this.angle);const{strokeEnabled:e,fillEnabled:r}=this.cache.style.normal;e&&t.stroke(this.path),r&&t.fill(this.path),t.closePath(),t.restore()}return this}radius(t){return this.r=t,this.parent&&this.parent.draw(),this}}const hi=(t,e,r,n)=>new li(t,e,r,n),ci=(t,e,r)=>new li(t,e,r,2*Math.PI);class ui extends ai{constructor(t,e){super(),this.pointsMatrix=null,this.path=new Path2D,this.fromXY(t,e)}get points(){return this.pointsMatrix.T.arr}draw(t){if(this.cache.config.rendered){t.save(),this.applyNormalStyle(t),t.beginPath(),this.path.moveTo(this.points[1][0]+this._x,this.points[1][1]+this._y);for(let t=1;t<this.points.length;t++)this.path.lineTo(this.points[t][0]+this._x,this.points[t][1]+this._y);t.stroke(this.path),t.restore()}return this}fromXY(t,e){return this.pointsMatrix=K([t,e]),this}push(t,e){return this.pointsMatrix.hstack(K([t,e])),this.parent&&this.parent.draw(),this}isIn(t,e){let r;return this.parent&&(this.parent.ctx.setTransform(1,0,0,1,0,0),r=this.parent.ctx.isPointInPath(this.path,t,e),this.parent.applyTransformMatrix()),r}}const mi=(t=[],e=[])=>new ui(t,e);class di extends ai{constructor(t,e,r,n){super(),this.x0=t,this.x1=r,this.y0=e,this.y1=n,delete this.fill}draw(t){return this.cache.config.rendered&&(t.save(),this.applyNormalStyle(t),t.beginPath(),t.moveTo(this.x0+this._x,this.y0+this._y_),t.lineTo(this.x1+this._x,this.y1+this._y),t.stroke(),this.cache.style.normal.strokeEnabled&&t.stroke(),t.restore()),this}}const pi=(t,e,r,n)=>new di(t,e,r,n);class fi extends ai{constructor(t,e,r,n){super(t,e),this.w=r,this.h=n,this.path=new Path2D}draw(t){if(this.cache.config.rendered){t.save(),this.applyNormalStyle(t),t.beginPath(),this.path.rect(this.px,this.py,this.w,this.h);const{strokeEnabled:e,fillEnabled:r}=this.cache.style.normal;e&&t.stroke(this.path),r&&t.fill(this.path),t.closePath(),t.restore()}return this}width(t){return this.w=t,this.parent&&this.parent.draw(),this}height(t){return this.h=t,this.parent&&this.parent.draw(),this}}const gi=(t,e,r,n)=>new fi(t,e,r,n),yi={Svg:si,ZikoUISvg:ni,svgCircle:Hs,svgEllipse:Ws,svgImage:Js,svgLine:Ys,svgPolygon:Gs,svgRect:$s,svgText:ti,svgGroupe:ri,Canvas:oi,canvasArc:hi,canvasCircle:ci,canvasPoints:mi,canvasLine:pi,canvasRect:gi,ExtractAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const r=t[e];"ExtractAll"!==r&&"RemoveAll"!==r&&(globalThis[r]=this[r])}return this},RemoveAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const r=t[e];"RemoveAll"!==r&&delete globalThis[r]}return this}};class bi{#h;constructor(){this.#h=function(t){try{let e=new Function("return "+t.data.fun)()();postMessage({result:e})}catch(t){postMessage({error:t.message})}finally{t.data.close&&self.close()}}.toString(),this.blob=new Blob(["this.onmessage = "+this.#h],{type:"text/javascript"}),this.worker=new Worker(window.URL.createObjectURL(this.blob))}call(t,e,r=!0){return this.worker.postMessage({fun:t.toString(),close:r}),this.worker.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data.result)},this}}const Fi=(t,e,r)=>{const n=new bi;return t&&n.call(t,e,r),n};class wi{constructor(t,e){this.root_UI=t,this.routes=new Map([[404,Ye("Error 404")],...Object.entries(e)]),this.patterns=new Map,this.maintain(),window.onpopstate=this.render(location.pathname)}get(t,e){return t instanceof RegExp?this.patterns.set(t,e):this.routes.set(t,e),this.maintain(),this}maintain(){return this.root_UI.append(...this.routes.values()),[...this.routes.values()].map((t=>t.render(!1))),this.render(location.pathname),this}render(t){if(this.routes.get(t))this.routes.get(t).render(!0);else{const e=[...this.patterns.keys()].find((e=>e.test(t)));e?this.patterns.get(e)(t):this.routes.get(404).render(!0)}return window.history.pushState({},"",t),this}}const xi=(t,e,r)=>new wi(t,e,r);class vi{constructor(t){this.app=t,this.meta={},this.#c("generator","zikojs")}#c(t,e){const r=document.querySelector(`meta[name=${t}]`);return this.meta=r||document.createElement("meta"),this.meta.setAttribute("name",t),this.meta.setAttribute("content",e),r||this.app.head.append(this.meta),this}charset(t="utf-8"){const e=document.querySelector("meta[charset]");return this.meta=e||document.createElement("meta"),this.meta.setAttribute("charset",t),e||this.app.head.append(this.meta),this}description(t){return this.#c("description",t),this}viewport(t="width=device-width, initial-scale=1.0"){return this.#c("viewport",t),this}keywords(...t){return t.push("zikojs"),t=[...new Set(t)].join(", "),this.#c("keywords",t),this}author(t="",e=""){const r=[t,e].join(", ");return this.#c("author",r),this}}class Ci{constructor(t){this.id="Ziko-Style-"+G.string(10),this.use(t),this.keys=new Set,this.styles={default:{fontSize:"1em"}}}get currentStyle(){return[...this.keys].reduce(((t,e)=>(t[e]=`var(--${e}-${this.id})`,t)),{})}add(t,e={}){return t instanceof Object?Object.assign(this.styles,t):Object.assign(this.styles,{[t]:e}),this}#u(t){const e=Object.keys(this.styles);for(let r in this.styles[e[t]])document.documentElement.style.setProperty(`--${r}-${this.id}`,this.styles[e[t]][r]),this.keys.add(r);return this}#m(t){for(let e in this.styles[t])document.documentElement.style.setProperty(`--${e}-${this.id}`,this.styles[t][e]),this.keys.add(e);return this}#d(t){for(let e in t)document.documentElement.style.setProperty(`--${e}-${this.id}`,t[e]),this.keys.add(e);return this}use(t){return"number"==typeof t&&this.#u(t),"string"==typeof t&&this.#m(t),t instanceof Object&&this.#d(t),this}}const Ei=t=>new Ci(t);class ki extends gn{constructor(){super(),this.root=document.documentElement,this.head=null,this.#r(),this.seo=new vi(this),Object.assign(this.cache,{theme:null,isRoot:!0}),this.render()}#r(){this.root.setAttribute("data-engine","zikojs");const t=this.root.getElementsByTagName("head")[0];this.head=t||(this.head=document.createElement("head")),t||this.root.insertBefore(this.head,document.body);const e=this.head.getElementsByTagName("title")[0];this.Title=e||document.createElement("title"),e||this.head.append(this.Title)}title(t=this.title.textContent){return this.Title.textContent=t,this}prefetch(){}description(){}get current(){return{theme:this._theme?.currentTheme,style:this._style?.currentStyle}}useTheme(t){return this._theme||(this._theme=((t=0)=>new qt(t))(t)),this._theme.use(t),this}initStyle(t){return this._style||(this._style=Ei()),this._style.init(t),this}useStyle(t,e){return this._style||(this._style=Ei()),e&&this._style.add(e),this._style.use(t),this}}const Ai=(...t)=>(new ki).append(...t),Bi=()=>document.documentElement.setAttribute("data-engine","zikojs");document&&(document.addEventListener("DOMContentLoaded",Bi),document.removeEventListener("DOMContentLoaded",Bi));const Di={App:Ai,Math:Ut,UI:Jn,Time:us,Graphics:yi,Events:$e,Data:Ps,Multi:Fi,SPA:xi,ALL_UI_ELEMENTS:We};globalThis.__Ziko__=Di,t.Accordion=Bn,t.App=Ai,t.Article=Vn,t.Aside=zn,t.Base=H,t.Canvas=oi,t.Carousel=xn,t.CodeNote=Cn,t.Combinaison=W,t.Complex=r,t.Data=Ps,t.E=ft,t.EPSILON=gt,t.Ease=es,t.Events=$e,t.ExtractAll=function(){return Jn.ExtractAll(),Ut.ExtractAll(),us.ExtractAll(),$e.ExtractAll(),yi.ExtractAll(),Ps.ExtractAll(),this},t.Fixed=h,t.Flex=yn,t.Footer=Pn,t.Graphics=yi,t.Grid=Fn,t.Header=Rn,t.LinearSystem=J,t.Logic=U,t.Main=jn,t.Math=Ut,t.Matrix=Q,t.Multi=Fi,t.Nav=Nn,t.PI=pt,t.Permutation=q,t.PowerSet=X,t.Random=G,t.RemoveAll=function(){Jn.RemoveAll(),Ut.RemoveAll(),us.ExtractAll(),$e.RemoveAll(),yi.RemoveAll(),Ps.ExtractAll()},t.SPA=xi,t.Section=Ln,t.Signal=$t,t.Svg=si,t.Table=Qn,t.Tabs=kn,t.Time=us,t.UI=Jn,t.Utils=Lt,t.Ziko=Di,t.ZikoHtml=dr,t.ZikoUIAudio=on,t.ZikoUICanvas=ii,t.ZikoUIElement=qe,t.ZikoUIFigure=an,t.ZikoUIHtmlTag=sr,t.ZikoUIImage=sn,t.ZikoUISection=_n,t.ZikoUISvg=ni,t.ZikoUIVideo=en,t.abs=u,t.acos=E,t.acosh=O,t.acot=B,t.add=ht,t.animation=cs,t.arange=Et,t.asin=k,t.asinh=I,t.atan=A,t.atan2=R,t.atanh=S,t.audio=hn,t.br=lr,t.brs=cr,t.btn=xr,t.canvasArc=hi,t.canvasCircle=ci,t.canvasLine=pi,t.canvasPoints=mi,t.canvasRect=gi,t.cartesianProduct=Ot,t.ceil=L,t.checkbox=Qr,t.clamp=Ct,t.complex=n,t.cos=y,t.cosh=D,t.cot=C,t.coth=_,t.csc=v,t.csv2arr=ys,t.csv2json=ws,t.csv2matrix=bs,t.csv2object=Fs,t.csv2sql=xs,t.datalist=Nr,t.debounce=rs,t.deg2rad=Dt,t.div=mt,t.e=f,t.fact=P,t.figure=cn,t.floor=V,t.geomspace=Bt,t.h1=Je,t.h2=Ke,t.h3=tr,t.h4=er,t.h5=rr,t.h6=nr,t.hr=hr,t.hrs=ur,t.hypot=$,t.image=ln,t.inRange=Tt,t.input=Pr,t.inputCamera=nn,t.inputColor=Xr,t.inputDate=Zr,t.inputDateTime=Gr,t.inputEmail=Wr,t.inputImage=Hr,t.inputNumber=$r,t.inputPassword=qr,t.inputTime=Yr,t.isApproximatlyEqual=_t,t.json2arr=Es,t.json2csv=ks,t.json2csvFile=As,t.json2xml=_s,t.json2xmlFile=Os,t.json2yml=Ms,t.json2ymlFile=Ts,t.lerp=xt,t.li=t=>new pr(t),t.link=mr,t.linspace=kt,t.ln=g,t.logspace=At,t.loop=ts,t.map=vt,t.mapfun=nt,t.markdown2html=gs,t.matrix=K,t.matrix2=tt,t.matrix3=et,t.matrix4=rt,t.max=a,t.min=o,t.modulo=dt,t.mul=ut,t.norm=wt,t.nums=Ft,t.ol=br,t.ones=bt,t.p=Ge,t.pgcd=It,t.pow=d,t.ppcm=St,t.prod=i,t.rad2deg=Mt,t.radio=Jr,t.round=j,t.search=Ur,t.sec=w,t.select=tn,t.sig=z,t.sign=N,t.sin=b,t.sinc=x,t.sinh=M,t.slider=zr,t.sqrt=m,t.sqrtn=p,t.sub=ct,t.subset=Y,t.sum=s,t.svg2ascii=Ss,t.svg2img=Vs,t.svg2imgUrl=Ls,t.svg2str=Is,t.svgCircle=Hs,t.svgEllipse=Ws,t.svgGroupe=ri,t.svgImage=Js,t.svgLine=Ys,t.svgPolygon=Gs,t.svgRect=$s,t.svgText=ti,t.tan=F,t.tanh=T,t.text=Ye,t.textarea=Er,t.throttle=ns,t.timeTaken=ls,t.time_memory_Taken=ss,t.ul=Fr,t.video=un,t.wait=as,t.waitForUIElm=is,t.waitForUIElmSync=os,t.zeros=yt}));
