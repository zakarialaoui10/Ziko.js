!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Ziko={})}(this,(function(t){"use strict";class e{}let s=class t extends e{constructor(e=0,s=0){super(),e instanceof t?(this.a=e.a,this.b=e.b):"object"==typeof e?"a"in s&&"b"in e?(this.a=e.a,this.b=e.b):"a"in s&&"z"in e?(this.a=e.a,this.b=m(e.z**2-e.a**2)):"a"in s&&"phi"in e?(this.a=e.a,this.b=e.a*b(e.phi)):"b"in s&&"z"in e?(this.b=e.b,this.a=m(e.z**2-e.b**2)):"b"in s&&"phi"in e?(this.b=s,this.a=e.b/b(e.phi)):"z"in s&&"phi"in e&&(this.a=e.z*y(e.phi),this.a=e.z*x(e.phi)):"number"==typeof e&&"number"==typeof s&&(this.a=+e.toFixed(32),this.b=+s.toFixed(32))}get clone(){return new t(this.a,this.b)}get z(){return O(this.a,this.b)}get phi(){return C(this.b,this.a)}static get ZERO(){return new t(0,0)}get conj(){return new t(this.a,-this.b)}get inv(){return new t(this.a/(p(this.a,2)+p(this.b,2)),-this.b/(p(this.a,2)+p(this.b,2)))}add(...e){for(let s=0;s<e.length;s++)"number"==typeof e[s]&&(e[s]=new t(e[s],0));let s=e.map((t=>t.a)),r=e.map((t=>t.b));return this.a+=+n(...s).toFixed(15),this.b+=+n(...r).toFixed(15),this}sub(...e){for(let s=0;s<e.length;s++)"number"==typeof e[s]&&(e[s]=new t(e[s],0));let s=e.map((t=>t.a)),r=e.map((t=>t.b));return this.a-=+n(...s).toFixed(15),this.b-=+n(...r).toFixed(15),this}mul(...e){for(let s=0;s<e.length;s++)"number"==typeof e[s]&&(e[s]=new t(e[s],0));let s=+i(this.z,...e.map((t=>t.z))).toFixed(15),r=+n(this.phi,...e.map((t=>t.phi))).toFixed(15);return this.a=+(s*y(r).toFixed(15)).toFixed(14),this.b=+(s*x(r).toFixed(15)).toFixed(14),this}div(...e){for(let s=0;s<e.length;s++)"number"==typeof e[s]&&(e[s]=new t(e[s],0));let s=+(this.z/i(...e.map((t=>t.z)))).toFixed(15),r=+(this.phi-n(...e.map((t=>t.phi)))).toFixed(15);return this.a=+(s*y(r).toFixed(15)).toFixed(15),this.b=+(s*x(r).toFixed(15)).toFixed(15),this}pow(t){if(M(t)===t&&t>0){let e=+(this.z**t).toFixed(15),s=+(this.phi*t).toFixed(15);this.a=+(e*y(s).toFixed(15)).toFixed(15),this.b=+(e*x(s).toFixed(15)).toFixed(15)}return this}static fromExpo(e,s){return new t(+(e*y(s)).toFixed(13),+(e*x(s)).toFixed(13))}get expo(){return[this.z,this.phi]}static add(t,...e){return t.clone.add(...e)}static sub(t,...e){return t.clone.sub(...e)}static mul(t,...e){return t.clone.mul(...e)}static div(t,...e){return t.clone.div(...e)}static pow(t,e){return t.clone.pow(e)}static xpowZ(t){return r(t**this.a*y(this.b*g(t)),t**this.a*x(this.b*g(t)))}sqrtn(t=2){return r(d(this.z,t)*y(this.phi/t),d(this.z,t)*x(this.phi/t))}get sqrt(){return this.sqrtn(2)}get log(){return r(this.z,this.phi)}get cos(){return r(y(this.a)*v(this.b),x(this.a)*k(this.b))}get sin(){return r(x(this.a)*v(this.b),y(this.a)*k(this.b))}get tan(){const t=y(2*this.a)+v(2*this.b);return r(x(2*this.a)/t,k(2*this.b)/t)}printInConsole(){let t=this.a+" + "+this.b+" * i";return console.log(t),t}print(){}UI(){return"<span>"+this.a+" + i * "+this.b+"</span>"}};const r=(t,e)=>{if((t instanceof Array||ArrayBuffer.isView(t))&&(e instanceof Array||ArrayBuffer.isView(t)))return t.map(((s,n)=>r(t[n],e[n])));if(t instanceof P&&e instanceof P){if(t.shape[0]!==e.shape[0]||t.shape[1]!==e.shape[1])return Error(0);const s=t.arr.map(((s,n)=>r(t.arr[n],e.arr[n])));return new P(t.rows,t.cols,...s)}return new s(t,e)},n=(...t)=>{if(t.every((t=>"number"==typeof t))){let e=t[0];for(let s=1;s<t.length;s++)e+=t[s];return e}const e=[];for(let s=0;s<t.length;s++)t[s]instanceof Array?e.push(n(...t[s])):t[s]instanceof Object&&e.push(n(...Object.values(t[s])));return 1===e.length?e[0]:e},i=(...t)=>{if(t.every((t=>"number"==typeof t))){let e=t[0];for(let s=1;s<t.length;s++)e*=t[s];return e}const e=[];for(let s=0;s<t.length;s++)t[s]instanceof Array?e.push(i(...t[s])):t[s]instanceof Object&&e.push(i(...Object.values(t[s])));return 1===e.length?e[0]:e},a=(...t)=>{if(t.every((t=>"number"==typeof t)))return Math.min(...t);const e=[];for(let s=0;s<t.length;s++)t[s]instanceof Array?e.push(a(...t[s])):t[s]instanceof Object&&e.push(Object.fromEntries([Object.entries(t[s]).sort(((t,e)=>t[1]-e[1]))[0]]));return 1===e.length?e[0]:e},o=(...t)=>{if(t.every((t=>"number"==typeof t)))return Math.max(...t);const e=[];for(let s=0;s<t.length;s++)t[s]instanceof Array?e.push(a(...t[s])):t[s]instanceof Object&&e.push(Object.fromEntries([Object.entries(t[s]).sort(((t,e)=>e[1]-t[1]))[0]]));return 1===e.length?e[0]:e},h=(...t)=>{if(t.every((t=>"number"==typeof t))){let e=t.reduce(((t,e)=>[...t,t[t.length-1]+e]),[0]);return e.shift(),e}const e=[];for(let s=0;s<t.length;s++)t[s]instanceof Array?e.push(h(...t[s])):t[s]instanceof Object&&e.push(null);return 1===e.length?e[0]:e},l={cos:t=>+Math.cos(t).toFixed(15),sin:t=>+Math.sin(t).toFixed(15),tan:t=>+Math.tan(t).toFixed(31),sinc:t=>+Math.sin(Math.PI*t)/(Math.PI*t),sec:t=>1/Math.cos(t).toFixed(15),csc:t=>1/Math.sin(t).toFixed(15),cot:t=>1/Math.tan(t).toFixed(15),acos:t=>+Math.acos(t).toFixed(15),asin:t=>+Math.asin(t).toFixed(15),atan:t=>+Math.atan(t).toFixed(15),acot:t=>+Math.PI/2-Math.atan(t).toFixed(15),cosh:t=>+Math.cosh(t).toFixed(15),sinh:t=>+Math.sinh(t).toFixed(15),tanh:t=>+Math.tanh(t).toFixed(15),coth:t=>+(.5*Math.log((1+t)/(1-t))).toFixed(15),acosh:t=>+Math.acosh(t).toFixed(15),asinh:t=>+Math.asinh(t).toFixed(15),atanh:t=>+Math.atanh(t).toFixed(15)};function u(...t){return z(Math.abs,...t)}function m(...t){return z(Math.sqrt,...t)}function p(t,e){if("number"==typeof t)return"number"==typeof e?Math.pow(t,e):e instanceof s?s.fromExpo(t**e.a,e.b*g(t)):z((e=>p(t,e)),...e);if(t instanceof s)return"number"==typeof e?s.fromExpo(t.z**e,t.phi*e):e instanceof s?s.fromExpo(t.z**e.a*f(-t.phi*e.b),g(t.z)*e.b+e.a*t.phi):z((e=>p(t,e)),...e);if(t instanceof Array){if("number"==typeof e)return z((t=>p(t,e)),...t);if(e instanceof Array){const s=[];for(let r=0;r<t.length;r++)s.push(z((e=>p(t[r],e)),...e));return s}}}function d(t,e){if("number"==typeof t)return"number"==typeof e?Math.pow(t,1/e):z((e=>d(t,e)),...e);if(t instanceof s)return"number"==typeof e?s.fromExpo(d(t.z,e),t.phi/e):z((e=>d(t,e)),...e);if(t instanceof Array){if("number"==typeof e)return z((t=>d(t,e)),...t);if(e instanceof Array){const s=[];for(let r=0;r<t.length;r++)s.push(z((e=>d(t[r],e)),...e));return s}}}function f(...t){return z(Math.exp,...t)}function g(...t){return z(Math.log,...t)}function y(...t){return z(l.cos,...t)}function x(...t){return z(l.sin,...t)}function b(...t){return z(l.tan,...t)}function w(...t){return z(l.sinc,...t)}function v(...t){return z(l.cosh,...t)}function k(...t){return z(l.sinh,...t)}function M(...t){return z(Math.floor,...t)}function C(t,e,s=!0){if("number"==typeof t)return"number"==typeof e?s?Math.atan2(t,e):180*Math.atan2(t,e)/Math.PI:z((e=>C(t,e,s)),...e);if(t instanceof Array){if("number"==typeof e)return z((t=>C(t,e,s)),...t);if(e instanceof Array){const s=[];for(let r=0;r<t.length;r++)s.push(z((e=>p(t[r],e)),...e));return s}}}function T(...t){return z(Math.sign,...t)}const O=(...t)=>t.every((t=>"number"==typeof t))?Math.hypot(...t):t.every((t=>t instanceof Array))?z(Math.hypot,...t):void 0,_={_mode:Number,_map:function(t,e,r){return e instanceof P?new P(e.rows,e.cols,e.arr.flat(1).map((e=>t(e,r)))):e instanceof s?new s(t(e.a,r),t(e.b,r)):e instanceof Array?e.map((e=>t(e,r))):void 0},not:function(t){return["number","boolean"].includes(typeof t)?_._mode(!t):this._map(this.not,t)},and:function(t,...e){return["number","boolean"].includes(typeof t)?_._mode(e.reduce(((t,e)=>t&e),t)):this._map(this.and,t,e)},or:function(t,...e){return["number","boolean"].includes(typeof t)?_._mode(e.reduce(((t,e)=>t|e),t)):this._map(this.or,t,e)},nand:function(t,...e){return this.not(this.and(t,e))},nor:function(t,...e){return this.not(this.or(t,e))},xor:function(t,...e){let s=[t,...e];return["number","boolean"].includes(typeof t)?this._mode(1===s.reduce(((t,e)=>(1==+e&&(t+=1),t)),0)):this._map(this.xor,t,e)},xnor:function(t,...e){return _.not(_.xor(t,e))}};var I={_mode:Number,_map:function(t,e,r){return e instanceof P?new P(e.rows,e.cols,e.arr.flat(1).map((e=>t(e,r)))):e instanceof s?new s(t(e.a,r),t(e.b,r)):e instanceof Array?e.map((e=>t(e,r))):void 0},dec2base(t,e){return this._mode=e<=10?Number:String,"number"==typeof t?this._mode((t>>>0).toString(e)):this._map(this.dec2base,t,e)},dec2bin(t){return this.dec2base(t,2)},dec2oct(t){return this.dec2base(t,8)},dec2hex(t){return this.dec2base(t,16)},bin2base(t,e){return this.dec2base(this.bin2dec(t),e)},bin2dec(t){return this._mode("0b"+t)},bin2oct(t){return this.bin2base(t,8)},bin2hex(t){return this.bin2base(t,16)},oct2dec(t){return this._mode("0o"+t)},oct2bin(t){return this.dec2bin(this.oct2dec(t))},oct2hex(t){return this.dec2hex(this.oct2dec(t))},oct2base(t,e){return this.dec2base(this.oct2dec(t),e)},hex2dec(t){return this._mode("0x"+t)},hex2bin(t){return this.dec2bin(this.hex2dec(t))},hex2oct(t){return this.dec2oct(this.hex2dec(t))},hex2base(t,e){return this.dec2base(this.hex2dec(t),e)},IEEE32toDec(t){let e=t.split(" ").join("").padEnd(32,"0"),s=e[0],r=2**(+("0b"+e.slice(1,9))-127);return(-1)**s*(1+e.slice(9,32).split("").map((t=>+t)).map(((t,e)=>t*2**(-e-1))).reduce(((t,e)=>t+e),0))*r},IEEE64toDec(t){let e=t.split(" ").join("").padEnd(64,"0"),s=e[0],r=2**(+("0b"+e.slice(1,12))-1023);return(-1)**s*(1+e.slice(13,64).split("").map((t=>+t)).map(((t,e)=>t*2**(-e-1))).reduce(((t,e)=>t+e),0))*r}};class V{static withDiscount(t,e=t.length){if(1===e)return t.map((t=>[t]));const s=[];let r;return r=this.withDiscount(t,e-1),t.forEach((t=>{r.forEach((e=>{s.push([t].concat(e))}))})),s}static withoutDiscount(t){if(1===t.length)return t.map((t=>[t]));const e=[],s=this.withoutDiscount(t.slice(1)),r=t[0];for(let t=0;t<s.length;t++){const n=s[t];for(let t=0;t<=n.length;t++){const s=n.slice(0,t),i=n.slice(t);e.push(s.concat([r],i))}}return e}}class S{static withDiscount(t,e){if(1===e)return t.map((t=>[t]));const s=[];return t.forEach(((r,n)=>{this.withDiscount(t.slice(n),e-1).forEach((t=>{s.push([r].concat(t))}))})),s}static withoutDiscount(t,e){if(1===e)return t.map((t=>[t]));const s=[];return t.forEach(((r,n)=>{this.withoutDiscount(t.slice(n+1),e-1).forEach((t=>{s.push([r].concat(t))}))})),s}}function D(t){const e=[],s=2**t.length;for(let r=0;r<s;r+=1){const s=[];for(let e=0;e<t.length;e+=1)r&1<<e&&s.push(t[e]);e.push(s)}return e}var j=(...t)=>{let e=at(0,2**t.length,1).toBin.map((e=>e.padStart(t.length,0))).map((t=>t.split("").map((t=>+t)))),s=e.map((e=>e.map(((e,s)=>t[s]))));for(let t=0;t<s.length;t++)for(let r=0;r<s[t].length;r++)s[t][r]={n:s[t][r],m:e[t][r]};return s=s.map((t=>t.filter((t=>1==t.m)))),s=s.map((t=>t.map((t=>t.n)))),s},R={Logic:_,Base:I,Permutation:V,Combinaison:S,PowerSet:D,subset:j};class F{static float(t=1,e){return e?Math.random()*(e-t)+t:t*Math.random()}static int(t,e){return Math.floor(this.float(t,e))}static char(t){t=t??this.bool();const e=String.fromCharCode(this.int(97,120));return t?e.toUpperCase():e}static bool(){return[!1,!0][Math.floor(2*Math.random())]}static string(t,e){return t instanceof Array?new Array(this.int(...t)).fill(0).map((()=>this.char(e))).join(""):new Array(t).fill(0).map((()=>this.char(e))).join("")}static bin(){return this.int(2)}static oct(){return this.int(8)}static dec(){return this.int(8)}static hex(){return this.int(16)}static choice(t=[1,2,3],e=new Array(t.length).fill(1/t.length)){let s=new Array(100);e=yt.accum(...e).map((t=>100*t)),s.fill(t[0],0,e[0]);for(let r=1;r<t.length;r++)s.fill(t[r],e[r-1],e[r]);return s[this.int(s.length-1)]}static shuffleArr(t){return t.sort((()=>.5-Math.random()))}static shuffleMatrix(t){const{rows:e,cols:s,arr:r}=t;return B(e,s,r.flat().sort((()=>.5-Math.random())))}static floats(t,e,s){return new Array(t).fill(0).map((()=>this.float(e,s)))}static ints(t,e,s){return new Array(t).fill(0).map((()=>this.int(e,s)))}static bools(t){return new Array(t).fill(0).map((()=>this.bool()))}static bins(t){return new Array(t).fill(0).map((()=>this.int(2)))}static octs(t){return new Array(t).fill(0).map((()=>this.int(8)))}static decs(t){return new Array(t).fill(0).map((()=>this.int(10)))}static hexs(t){return new Array(t).fill(0).map((()=>this.int(16)))}static choices(t,e,s){return new Array(t).fill(0).map((()=>this.choice(e,s)))}static permutation(...t){return t.permS[this.int(t.length)]}static color(){return"#"+I.dec2hex(this.float(16777216)).padStart(6,0)}static colors(t){return new Array(t).fill(null).map((()=>this.color()))}static complex(t=[0,1],e=[0,1]){return t instanceof Array?new s(this.float(t[0],t[1]),this.float(e[0],e[1])):new s(...this.floats(2,t,e))}static complexInt(t=[0,1],e=[0,1]){return new s(this.int(t[0],t[1]),this.int(e[0],e[1]))}static complexBin(){return new s(...this.bins(2))}static complexOct(){return new s(...this.octs(2))}static complexDec(){return new s(...this.decs(10))}static complexHex(){return new s(...this.octs(2))}static complexes(t,e=0,s=1){return new Array(t).fill(0).map((()=>this.complex(e,s)))}static complexesInt(t,e=0,s=1){return new Array(t).fill(0).map((()=>this.complexInt(e,s)))}static complexesBin(t){return new Array(t).fill(0).map((()=>this.complexBin()))}static complexesOct(t){return new Array(t).fill(0).map((()=>this.complexOct()))}static complexesDec(t){return new Array(t).fill(0).map((()=>this.complexDec()))}static complexesHex(t){return new Array(t).fill(0).map((()=>this.complexHex()))}static matrix(t,e,s,r){return B(t,e,this.floats(t*e,s,r))}static matrixInt(t,e,s,r){return B(t,e,this.ints(t*e,s,r))}static matrixBin(t,e){return B(t,e,this.bins(t*e))}static matrixOct(t,e){return B(t,e,this.octs(t*e))}static matrixDec(t,e){return B(t,e,this.decs(t*e))}static matrixHex(t,e){return B(t,e,this.hex(t*e))}static matrixColor(t,e){return B(t,e,this.colors(t*e))}static matrixComplex(t,e,s,r){return B(t,e,this.complexes(t*e,s,r))}static matrixComplexInt(t,e,s,r){return B(t,e,this.complexesInt(t*e,s,r))}static matrixComplexBin(t,e){return B(t,e,this.complexesBin(t*e))}static matrixComplexOct(t,e){return B(t,e,this.complexesBin(t*e))}static matrixComplexDec(t,e){return B(t,e,this.complexesBin(t*e))}static matrixComplexHex(t,e){return B(t,e,this.complexesBin(t*e))}}let P=class t extends e{constructor(e,s,r=[],n){if(super(),e instanceof t)this.arr=e.arr,this.rows=e.rows,this.cols=e.cols;else{let t,n,i=[];if(arguments[0]instanceof Array)e=arguments[0].length,s=arguments[0][0].length,i=arguments[0];else for(t=0;t<e;t++)for(i.push([]),i[t].push(new Array(s)),n=0;n<s;n++)i[t][n]=r[t*s+n],null==r[t*s+n]&&(i[t][n]=0);this.rows=e,this.cols=s,this.arr=i}this._maintain()}at(t=0,e=void 0){return t<0&&(t=this.rows+t),null==e?this.arr[t]:(e<0&&(e=this.cols+e),this.arr[t][e])}reshape(e,s){if(e*s==this.rows*this.cols)return new t(e,s,this.arr.flat(1));console.error("Err")}static eye(e){let s=new t(e,e);for(let t=0;t<e;t++)for(let r=0;r<e;r++)s.arr[t][r]=t===r?1:0;return s}get clone(){return new t(this.rows,this.cols,this.arr.flat(1))}get size(){return this.rows*this.cols}get shape(){return[this.rows,this.cols]}get reel(){return new t(this.cols,this.rows,this.arr.flat(1).reel)}get imag(){return new t(this.cols,this.rows,this.arr.flat(1).imag)}_maintain(){for(let t=0;t<this.arr.length;t++)Object.assign(this,{[[t]]:this.arr[t]});return this}get(t=0,e=0){return-1==e?this.arr[t]:-1==t?this.arr.map((t=>t[e])):this.arr[t][e]}set(t=0,e=0,s){if(-1==e)return this.arr[t]=s;if(-1==t){for(let t=0;t<this.cols;t++)this.arr[t][e]=s[t]||0;return this.arr}return this.arr[t][e]=s}get isSquare(){return this.rows/this.cols==1}get isSym(){if(!this.isSquare)return!1;const e=this.T,s=this.clone;return 0==t.sub(s,e).max&&0==t.sub(s,e).min}get isAntiSym(){if(!this.isSquare)return!1;const e=this.T,s=this.clone;return 0==t.add(s,e).max&&0==t.add(s,e).min}get isDiag(){if(!this.isSquare)return!1;const e=this.T,s=this.clone,r=t.mul(s,e),n=t.dot(e,s);return 0==t.sub(r,n).max&&0==t.sub(r,n).min}get isOrtho(){return!!this.isSquare&&(this.isDiag&&(1==this.det||-1==this.det))}get isIdemp(){if(!this.isSquare)return!1;const e=this.clone,s=t.dot(e,e);return 0==t.sub(s,e).max&&0==t.sub(s,e).min}get T(){let e=[];for(let t=0;t<this.arr[0].length;t++){e[t]=[];for(let s=0;s<this.arr.length;s++)e[t][s]=this.arr[s][t]}return new t(this.cols,this.rows,e.flat(1))}get det(){if(!this.isSquare)return new Error("is not square matrix");if(1==this.rows)return this.arr[0][0];function e(t,e){var s=[];for(let e=0;e<t.length;e++)s.push(t[e].slice(0));s.splice(0,1);for(let t=0;t<s.length;t++)s[t].splice(e,1);return s}return function s(r){if(2==r.length)return r.flat(1).some((e=>e instanceof t))?void console.warn("Tensors are not completely supported yet ..."):yt.sub(yt.mul(r[0][0],r[1][1]),yt.mul(r[0][1],r[1][0]));for(var n=0,i=0;i<r.length;i++){const t=yt.add(yt.mul(p(-1,i),yt.mul(r[0][i],s(e(r,i)))));n=yt.add(n,t)}return n}(this.arr)}get inv(){if(!this.isSquare)return new Error("is not square matrix");if(0===this.det)return"determinat = 0 !!!";let e=function(t){if(t.length!==t[0].length)return;var e=0,s=0,r=0,n=t.length,i=0,a=[],o=[];for(e=0;e<n;e+=1)for(a[a.length]=[],o[o.length]=[],r=0;r<n;r+=1)a[e][r]=e==r?1:0,o[e][r]=t[e][r];for(e=0;e<n;e+=1){if(0==(i=o[e][e])){for(s=e+1;s<n;s+=1)if(0!=o[s][e]){for(r=0;r<n;r++)i=o[e][r],o[e][r]=o[s][r],o[s][r]=i,i=a[e][r],a[e][r]=a[s][r],a[s][r]=i;break}if(0==(i=o[e][e]))return}for(r=0;r<n;r++)o[e][r]=o[e][r]/i,a[e][r]=a[e][r]/i;for(s=0;s<n;s++)if(s!=e)for(i=o[s][e],r=0;r<n;r++)o[s][r]-=i*o[e][r],a[s][r]-=i*a[e][r]}return a}(this.arr);return new t(this.rows,this.cols,e.flat(1))}static zeros(e,s){let r=new t(e,s);for(let t=0;t<e;t++)for(var n=0;n<s;n++)r.arr[t][n]=0;return r}static ones(e,s){let r=new t(e,s);for(let t=0;t<e;t++)for(let e=0;e<s;e++)r.arr[t][e]=1;return r}static nums(e,s,r){let n=new t(e,s);for(let t=0;t<e;t++)for(let e=0;e<s;e++)n.arr[t][e]=r;return n}static get rand(){return{int:(e,s,r,n)=>{let i=new t(e,s);for(let t=0;t<e;t++)for(let e=0;e<s;e++)i.arr[t][e]=F.randInt(r,n);return i},bin:(e,s)=>{let r=new t(e,s);for(let t=0;t<e;t++)for(let e=0;e<s;e++)r.arr[t][e]=F.randBin;return r},hex:(e,s)=>{let r=new t(e,s);for(let t=0;t<e;t++)for(let e=0;e<s;e++)r.arr[t][e]=F.randHex;return r},choices:(e,s,r,n)=>{let i=new t(e,s);for(let t=0;t<e;t++)for(let e=0;e<s;e++)i.arr[t][e]=F.choice(r,n);return i},permutation:(t,e,s)=>{}}}static rands(e,s,r=1,n){let i=new t(e,s);for(let t=0;t<e;t++)for(let e=0;e<s;e++)i.arr[t][e]=F.rand(r,n);return i}map(t,e,s,r){return yt.map(this,t,e,s,r)}lerp(t,e){return yt.lerp(this,t,e)}norm(t,e){return yt.norm(this,t,e)}clamp(t,e){return yt.clamp(this,t,e)}static map(t,e,s,r,n){return yt.map(t,e,s,r,n)}static lerp(t,e,s){return yt.lerp(t,e,s)}static norm(t,e,s){return yt.norm(t,e,s)}static clamp(t,e,s){return yt.clamp(B,e,s)}toPrecision(t){for(let e=0;e<this.cols;e++)for(let s=0;s<this.rows;s++)this.arr[e][s]=+this.arr[e][s].toPrecision(t);return this}get toBin(){let e=this.arr.flat(1).toBin;return new t(this.rows,this.cols,e)}get toOct(){let e=this.arr.flat(1).toOct;return new t(this.rows,this.cols,e)}get toHex(){let e=this.arr.flat(1).toHex;return new t(this.rows,this.cols,e)}max2min(){let e=this.arr.flat(1).max2min;return new t(this.rows,this.cols,e)}min2max(){let e=this.arr.flat(1).min2max;return new t(this.rows,this.cols,e)}sortRows(e=void 0){let s=this.arr.map((t=>t.sort(e))).flat(1);return new t(this.rows,this.cols,s)}sortCols(e=void 0){let s=this.T.arr.map((t=>t.sort(e))).flat(1);return new t(this.rows,this.cols,s).T}filterByRows(e){var s=this.arr.map((t=>t.map((t=>+(""+t).includes(e))))).map((t=>!!Logic.or(...t))),r=this.arr.filter(((t,e)=>!0===s[e]));return 0===r.length&&r.push([]),console.log(r),new t(r)}filterByCols(e){return new t(this.T.arr.filter((t=>t.includes(e))))}sortAll(e=void 0){let s=this.arr.flat(1).sort(e);return new t(this.rows,this.cols,s)}count(t){return this.arr.flat(1).count(t)}toBase(e){let s=this.arr.flat(1).toBase(e);return new t(this.rows,this.cols,s)}#t(e){if(this.rows!==e.rows)return;let s=this.arr;for(let t=0;t<this.rows;t++)for(let r=this.cols;r<this.cols+e.cols;r++)s[t][r]=e.arr[t][r-this.cols];return this.cols+=e.cols,new t(this.rows,this.cols,s.flat(1))}hstack(...t){const e=[this,...t].reduce(((t,e)=>t.#t(e)));return Object.assign(this,e),this}static hstack(t,...e){return t.clone.hstack(...e)}#e(e){if(this.cols!==e.cols)return;let s=this.arr;for(let t=this.rows;t<this.rows+e.rows;t++){s[t]=[];for(let r=0;r<this.cols;r++)s[t][r]=e.arr[t-this.rows][r]}return this.rows+=e.rows,new t(this.rows,this.cols,s.flat(1))}vstack(...t){const e=[this,...t].reduce(((t,e)=>t.#e(e)));return Object.assign(this,e),this}static vstack(t,...e){return t.clone.vstack(...e)}hqueue(...t){const e=[this,...t].reverse().reduce(((t,e)=>t.#t(e)));return Object.assign(this,e),this}vqueue(...t){const e=[this,...t].reverse().reduce(((t,e)=>t.#e(e)));return Object.assign(this,e),this}static hqueue(t,...e){return t.clone.hqueue(...e)}static vqueue(t,...e){return t.clone.vqueue(...e)}slice(e=0,s=0,r=this.rows-1,n=this.cols-1){let i=r-e,a=n-s,o=new Array(a);for(let t=0;t<i;t++){o[t]=[];for(let r=0;r<a;r++)o[t][r]=this.arr[t+e][r+s]}return new t(i,a,o.flat(1))}static slice(t,e=0,s=0,r=this.rows-1,n=this.cols-1){return t.slice(e,s,r,n)}getRows(t,e=t+1){return this.slice(t,0,e,this.cols)}getCols(t,e=t+1){return this.slice(0,t,this.rows,e)}static getRows(t,e,s=e+1){return t.slice(e,0,s,t.cols)}static getCols(t,e,s=e+1){return t.slice(0,e,t.rows,s)}add(...e){for(let n=0;n<e.length;n++){("number"==typeof e[n]||e[n]instanceof s)&&(e[n]=t.nums(this.rows,this.cols,e[n]));for(let t=0;t<this.rows;t++)for(var r=0;r<this.cols;r++)this.arr[t][r]=yt.add(this.arr[t][r],e[n].arr[t][r])}return new t(this.rows,this.cols,this.arr.flat(1))}sub(...e){for(let r=0;r<e.length;r++){"number"==typeof e[r]&&(e[r]=t.nums(this.rows,this.cols,e[r]));for(let t=0;t<this.rows;t++)for(var s=0;s<this.cols;s++)this.arr[t][s]=yt.sub(this.arr[t][s],e[r].arr[t][s])}return new t(this.rows,this.cols,this.arr.flat(1))}static add(t,...e){return t.clone.add(...e)}static sub(t,...e){return t.clone.sub(...e)}mul(...e){for(let n=0;n<e.length;n++){"number"==typeof e[n]&&(e[n]=t.nums(this.rows,this.cols,e[n]));for(var s=0;s<this.rows;s++)for(var r=0;r<this.cols;r++)this.arr[s][r]=yt.mul(this.arr[s][r],e[n].arr[s][r])}return new t(this.rows,this.cols,this.arr.flat(1))}div(...e){for(let r=0;r<e.length;r++){"number"==typeof e[r]&&(e[r]=t.nums(this.rows,this.cols,e[r]));for(let t=0;t<this.rows;t++)for(var s=0;s<this.cols;s++)this.arr[t][s]=yt.div(this.arr[t][s],e[r].arr[t][s])}return new t(this.rows,this.cols,this.arr.flat(1))}static div(t,...e){return t.clone.div(...e)}static mul(t,...e){return t.clone.mul(...e)}modulo(...e){for(let r=0;r<e.length;r++){"number"==typeof e[r]&&(e[r]=t.nums(this.rows,this.cols,e[r]));for(let t=0;t<this.rows;t++)for(var s=0;s<this.cols;s++)this.arr[t][s]=yt.modulo(this.arr[t][s],e[r].arr[t][s])}return new t(this.rows,this.cols,this.arr.flat(1))}static modulo(t,...e){return t.clone.modulo(...e)}dot(e){for(var s=[],r=0;r<this.arr.length;r++){s[r]=[];for(var n=0;n<e.arr[0].length;n++){s[r][n]=0;for(var i=0;i<this.arr[0].length;i++)s[r][n]=yt.add(s[r][n],yt.mul(this.arr[r][i],e.arr[i][n]))}}return new t(this.arr.length,e.arr[0].length,s.flat(1))}static dot(t,e){return t.dot(e)}pow(t){let e=this.clone,s=this.clone;for(let r=0;r<t-1;r++)s=s.dot(e);return s}static pow(t,e){return t.clone.pow(e)}get somme(){let t=0;for(let e=0;e<this.rows;e++)for(let s=0;s<this.cols;s++)t+=this.arr[e][s];return t}get DoesItContainComplexNumbers(){return this.arr.flat(1/0).some((t=>t instanceof s))}get min(){this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable");let t=[];for(let e=0;e<this.rows;e++)t.push(a(...this.arr[e]));return a(...t)}get max(){this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable");let t=[];for(let e=0;e<this.rows;e++)t.push(o(...this.arr[e]));return o(...t)}get minRows(){this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable");let t=[];for(let e=0;e<this.rows;e++)t.push(a(...this.arr[e]));return t}get maxRows(){this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable");let t=[];for(let e=0;e<this.rows;e++)t.push(o(...this.arr[e]));return t}get minCols(){return this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable"),this.T.minRows}get maxCols(){return this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable"),this.T.maxRows}static fromVector(e){return new t(e.length,1,e)}get toArray(){let t=[];for(let e=0;e<this.rows;e++)for(let s=0;s<this.cols;s++)t.push(this.arr[e][s]);return t}get print(){let t="[";for(let e=0;e<this.arr.length;e++)t+=(0!=e?" ":"")+` [${this.arr[e].map((t=>" "+t.toString()+" "))}],\n`;console.log(t.substring(0,t.length-2)+" ]"),document.write(t.substring(0,t.length-2)+" ]")}get table(){console.table(this.arr)}get serialize(){return JSON.stringify(this)}static deserialize(e){"string"==typeof e&&(e=JSON.parse(e));let s=new t(e.rows,e.cols);return s.arr=e.arr,s}toTable(){var t=new DocumentFragment,e=new Array(this.rows).fill(null).map((()=>document.createElement("tr"))),s=this.arr.map((t=>t.map((()=>document.createElement("td")))));for(let t=0;t<s.length;t++)for(let r=0;r<s[0].length;r++)s[t][r].innerHTML=this.arr[t][r],e[t].appendChild(s[t][r]);return e.map((e=>t.appendChild(e))),t}toGrid(t,e={}){let s=Grid();return s.append(...this.map(t).arr.flat(1).map((t=>t.style(e)))),s.Columns(this.cols),s}sortTable(e=0,{type:s="num",order:r="asc"}={}){var n=this.T.arr.map((t=>t.map(((t,e)=>Object.assign({},{x:t,y:e}))))),i=this.T.arr.map((t=>t.map(((t,e)=>Object.assign({},{x:t,y:e})))));"num"===s?"asc"===r?n[e].sort(((t,e)=>t.x-e.x)):"desc"===r?n[e].sort(((t,e)=>e.x-t.x)):"toggle"===r&&(n[e][0].x>n[e][1].x?n[e].sort(((t,e)=>e.x-t.x)):n[e].sort(((t,e)=>t.x-e.x))):"alpha"===s&&("asc"===r?n[e].sort(((t,e)=>(""+t.x).localeCompare(""+e.x))):"desc"===r&&n[e].sort(((t,e)=>(""+e.x).localeCompare(""+t.x)))),r=n[e].map((t=>t.y));for(let t=0;t<n.length;t++)t!==e&&n[t].map(((t,e)=>t.y=r[e]));for(let t=0;t<n.length;t++)t!==e&&i[t].map(((e,s)=>e.x=n[t][r[s]].x));i[e]=n[e];var a=i.map((t=>t.map((t=>t.x))));return new t(a).T}};var B=(t,e,s)=>new P(t,e,s);const z=(t,...e)=>{const n=e.map((e=>{if(null===e)return t(null);if(["number","string","boolean","bigint","undefined"].includes(typeof e))return t(e);if(e instanceof Array)return e.map((e=>z(t,e)));if(ArrayBuffer.isView(e))return e.map((e=>t(e)));if(e instanceof Set)return new Set(z(t,...e));if(e instanceof Map)return new Map([...e].map((e=>[e[0],z(t,e[1])])));if(e instanceof P)return new P(e.rows,e.cols,z(e.arr.flat(1)));if(e instanceof s){const[s,n,i,a]=[e.a,e.b,e.z,e.phi];switch(t){case Math.log:return r(g(i),a);case Math.exp:return r(f(s)*y(n),f(s)*x(n));case Math.abs:return i;case Math.sqrt:return r(m(i)*y(a/2),m(i)*x(a/2));case l.cos:return r(y(s)*v(n),-x(s)*k(n));case l.sin:return r(x(s)*v(n),y(s)*k(n));case l.tan:{const t=y(2*s)+v(2*n);return r(x(2*s)/t,k(2*n)/t)}case l.cosh:return r(v(s)*y(n),k(s)*x(n));case l.sinh:return r(k(s)*y(n),v(s)*x(n));case l.tanh:{const t=v(2*s)+y(2*n);return r(k(2*s)/t,x(2*n)/t)}}}else if(e instanceof Object)return Object.fromEntries(Object.entries(e).map((e=>[e[0],z(t,e[1])])))}));return 1==n.length?n[0]:n},{PI:N,E:L}=Math,H=Number.EPSILON,U=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t+e;if(e instanceof Complex)return complex(t+e.a,e.b);if(e instanceof Matrix)return Matrix.nums(e.rows,e.cols,t).add(e);if(e instanceof Array)return e.map((e=>Y(e,t)))}else{if(t instanceof Complex||t instanceof Matrix)return e instanceof Array?e.map((e=>t.clone.add(e))):t.clone.add(e);if(t instanceof Array){if(!(e instanceof Array))return t.map((t=>Y(t,e)));if(t.length===e.length)return t.map(((t,s)=>Y(t,e[s])))}}},q=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t-e;if(e instanceof Complex)return complex(t-e.a,-e.b);if(e instanceof Matrix)return Matrix.nums(e.rows,e.cols,t).sub(e);if(e instanceof Array)return e.map((e=>Z(e,t)))}else{if(t instanceof Complex||t instanceof Matrix)return e instanceof Array?e.map((e=>t.clone.sub(e))):t.clone.sub(e);if(t instanceof Array){if(!(e instanceof Array))return t.map((t=>Z(t,e)));if(e instanceof Array&&t.length===e.length)return t.map(((t,s)=>Z(t,e[s])))}}},W=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t*e;if(e instanceof Complex)return complex(t*e.a,t*e.b);if(e instanceof Matrix)return Matrix.nums(e.rows,e.cols,t).mul(e);if(e instanceof Array)return e.map((e=>G(t,e)))}else{if(t instanceof Complex||t instanceof Matrix)return e instanceof Array?e.map((e=>t.clone.mul(e))):t.clone.mul(e);if(t instanceof Array){if(!(e instanceof Array))return t.map((t=>G(t,e)));if(e instanceof Array&&t.length===e.length)return t.map(((t,s)=>G(t,e[s])))}}},X=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t/e;if(e instanceof Complex)return complex(t/e.a,t/e.b);if(e instanceof Matrix)return Matrix.nums(e.rows,e.cols,t).div(e);if(e instanceof Array)return e.map((e=>Q(t,e)))}else{if(t instanceof Complex||t instanceof Matrix)return e instanceof Array?e.map((e=>t.clone.div(e))):t.clone.div(e);if(t instanceof Array){if(!(e instanceof Array))return t.map((t=>Q(t,e)));if(e instanceof Array&&t.length===e.length)return t.map(((t,s)=>Q(t,e[s])))}}},$=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t%e;if(e instanceof Complex)return complex(t%e.a,t%e.b);if(e instanceof Matrix)return Matrix.nums(e.rows,e.cols,t).modulo(e);if(e instanceof Array)return e.map((e=>Q(t,e)))}else{if(t instanceof Complex||t instanceof Matrix)return e instanceof Array?e.map((e=>t.clone.div(e))):t.clone.div(e);if(t instanceof Array&&!(e instanceof Array))return t.map((t=>Y(t,e)))}},Y=(t,...e)=>{var s=t;for(let t=0;t<e.length;t++)s=U(s,e[t]);return s},Z=(t,...e)=>{var s=t;for(let t=0;t<e.length;t++)s=q(s,e[t]);return s},G=(t,...e)=>{var s=t;for(let t=0;t<e.length;t++)s=W(s,e[t]);return s},Q=(t,...e)=>{var s=t;for(let t=0;t<e.length;t++)s=X(s,e[t]);return s},K=(t,...e)=>{var s=t;for(let t=0;t<e.length;t++)s=$(s,e[t]);return s},J=t=>new Array(t).fill(0),tt=t=>new Array(t).fill(1),et=(t,e)=>new Array(e).fill(t),st=(t,e,r)=>{if("number"==typeof t)return e!==r?(t-e)/(r-e):0;if(t instanceof Matrix)return new Matrix(t.rows,t.cols,st(t.arr.flat(1),e,r));if(t instanceof s)return new s(st(t.a,e,r),st(t.b,e,r));if(t instanceof Array){if(t.every((t=>typeof("number"===t))))return t.map((t=>st(t,e,r)));{let e=new Array(t.length);for(let s=0;s<t.length;s++)e[s]=st(t[s])}}},rt=(t,e,r)=>{if("number"==typeof t)return(r-e)*t+e;if(t instanceof Matrix)return new Matrix(t.rows,t.cols,rt(t.arr.flat(1),e,r));if(t instanceof s)return new s(rt(t.a,e,r),rt(t.b,e,r));if(t instanceof Array){if(t.every((t=>typeof("number"===t))))return t.map((t=>rt(t,e,r)));{let e=new Array(t.length);for(let s=0;s<t.length;s++)e[s]=rt(t[s])}}},nt=(t,e,r,n,i)=>{if("number"==typeof t)return rt(st(t,e,r),n,i);if(t instanceof Matrix)return new Matrix(t.rows,t.cols,nt(t.arr.flat(1),e,r,n,i));if(t instanceof s)return new s(nt(t.a,r,n,i),nt(t.b,e,r,n,i));if(t instanceof Array){if(t.every((t=>typeof("number"===t))))return t.map((t=>nt(t,e,r,n,i)));{let s=new Array(t.length);for(let a=0;a<t.length;a++)s[a]=nt(t[a],e,r,n,i)}}},it=(t,e,r)=>{if("number"==typeof t)return e(r(t,e),r);if(t instanceof Matrix)return new Matrix(t.rows,t.cols,it(t.arr.flat(1),e,r));if(t instanceof s)return new s(it(t.a,e,r),it(t.b,e,r));if(t instanceof Array){if(t.every((t=>typeof("number"===t))))return t.map((t=>it(t,e,r)));{let s=new Array(t.length);for(let n=0;n<t.length;n++)s[n]=it(t[n],e,r)}}},at=(t,e,s,r=!1)=>{let n=[];if(t<e)for(let i=t;r?i<=e:i<e;i+=s)n.push(10*i/10);else for(let i=t;r?i>=e:i>e;i-=s)n.push(10*i/10);return n},ot=(t,e,n=abs(e-t)+1,i=!0)=>{if(Math.floor(n)===n){if([t,e].every((t=>"number"==typeof t))){const[s,r]=[t,e].sort(((t,e)=>e-t));var a=[];let h;h=i?(s-r)/(n-1):(s-r)/n;for(var o=0;o<n;o++)t<e?a.push(r+h*o):a.push(s-h*o);return a}if([t,e].some((t=>t instanceof s))){const s=r(t),a=r(e);n=n||Math.abs(s.a-a.a)+1;const o=ot(s.a,a.a,n,i),h=ot(s.b,a.b,n,i);let l=new Array(n).fill(null);return l=l.map(((t,e)=>r(o[e],h[e]))),l}}},ht=(t,e,s=e-t+1,r=E,n=!0)=>ot(t,e,s,n).map((t=>pow(r,t))),lt=(t,e,n=abs(e-t)+1,i=!0)=>{if(Math.floor(n)===n){if([t,e].every((t=>"number"==typeof t))){const[s,r]=[t,e].sort(((t,e)=>e-t));let a;a=d(s/r,i?n-1:n);const o=[r];for(let t=1;t<n;t++)o.push(o[t-1]*a);return t<e?o:o.reverse()}if([t,e].some((t=>t instanceof s))){const s=r(t),a=r(e);let o;n=n||Math.abs(s.a-a.a)+1,o=d(a.div(s),i?n-1:n);const h=[s];for(let t=1;t<n;t++)h.push(mul(h[t-1],o));return h}}},ct=(...t)=>z((t=>t*Math.PI/180),...t),ut=(...t)=>z((t=>t/Math.PI*180),...t),mt=(t,e,s)=>{const[r,n]=[Math.min(e,s),Math.max(e,s)];return t>=r&&t<=n},pt=(t,e,s=1e-4)=>Math.abs(t-e)<=s,dt=(t,e)=>t.reduce(((t,s)=>[...t,...e.map((t=>[s,t]))]),[]),ft=(t,e)=>{let s,r=1;if(t==floor(t)&&e==floor(e)){for(s=2;s<=t&&s<=e;++s)t%s==0&&e%s==0&&(r=s);return r}console.log("error")},gt=(t,e)=>{let s;if(t==floor(t)&&e==floor(e)){for(s=t>e?t:e;s%t!=0||s%e!=0;)++s;return s}console.log("error")},yt={add:Y,sub:Z,mul:G,div:Q,modulo:K,zeros:J,ones:tt,nums:et,norm:st,lerp:rt,map:nt,clamp:it,arange:at,linspace:ot,logspace:ht,geomspace:lt,sum:n,prod:i,accum:h,cartesianProduct:dt,ppcm:gt,pgcd:ft,deg2rad:ct,rad2deg:ut,inRange:mt,isApproximatlyEqual:pt};const xt=t=>{const e=[],n=t.length;t[0]instanceof s||(t=t.map((t=>r(t,0))));for(let s=0;s<n;s++){let i=0,a=0;for(let e=0;e<n;e++){const r=2*PI*s*e/n;i+=t[e].a*cos(r)+t[e].b*sin(r),a+=-t[e].a*sin(r)+t[e].b*cos(r)}i/=n,a/=n,e[s]=r(i,a)}return{output:e,re:e.map((t=>t.a)),im:e.map((t=>t.b)),z:e.map((t=>t.z)),phi:e.map((t=>t.phi))}},bt=t=>{const e=[],n=t.length;t[0]instanceof s||(t=t.map((t=>r(t,0))));for(let s=0;s<n;s++){let i=0,a=0;for(let e=0;e<n;e++){const r=2*PI*s*e/n;i+=t[e].a*cos(r)+t[e].b*sin(r),a+=t[e].a*sin(r)+t[e].b*cos(r)}i/=n,a/=n,e[s]=r(i,a)}return{output:e,re:e.map((t=>t.a)),im:e.map((t=>t.b)),z:e.map((t=>t.z)),phi:e.map((t=>t.phi))}},wt=(t,e,s=!0)=>{const r=t.length,n=e.length,i=[],a=s?Math.max(r,n):r+n-1;for(let s=0;s<a;s++){let a=0;for(let i=0;i<n;i++){const o=s+i-Math.floor(n/2);a+=(o>=0&&o<r?t[o]:0)*e[i]}i.push(a)}return i},vt=(t,e,s=!0)=>{t instanceof P||(t=B(t)),e instanceof P||(e=B(e));const r=t.rows,n=t.cols,i=s?Math.max(t.rows,e.rows):t.rows+e.rows-1,a=s?Math.max(t.cols,e.cols):t.cols+e.cols-1,o=e.rows,h=[];for(let s=0;s<i;s++){const i=[];for(let h=0;h<a;h++){let a=0;for(let i=0;i<o;i++)for(let l=0;l<o;l++){const c=s+i-Math.floor(o/2),u=h+l-Math.floor(o/2);a+=(c>=0&&c<r&&u>=0&&u<n?t[c][u]:0)*e[i][l]}i.push(a)}h.push(i)}return h},kt=(t,e,s)=>t instanceof P||t instanceof Array&&t[0][0]?vt(t,e,s):wt(t,e,s);class Mt{constructor(t){this.input=t,this.input_fft=xt(this.input),this.output_fft=[]}lowPass(t){return this.input_fft.output.forEach(((e,s)=>{e=e.z<t?this.output_fft[s]=this.input_fft.output[s]:this.output_fft[s]=r(0,0)})),bt(this.output_fft).re}highPass(t){return this.input_fft.output.forEach(((e,s)=>{e=e.z>t?this.output_fft[s]=this.input_fft.output[s]:this.output_fft[s]=r(0,0)})),bt(this.output_fft).re}bandePass(){}bandeCoupe(){}}const Et={zeros:J,ones:tt,nums:et,arange:at,linspace:ot,logspace:ht,geomspace:lt,map:nt,norm:st,lerp:rt,clamp:it,noise:(t,e=0,s=1)=>F.floats(t,e,s),echelon(t,e=0,s=1){t instanceof Array||(t=[t]);const r=z((t=>t>=e?1:0),...t);return r instanceof Array?r.map((t=>t*s)):r*s},rampe(t,e=0,s=1){t instanceof Array||(t=[t]);const r=z((t=>t>=e?t-e:0),...t);return r instanceof Array?r.map((t=>t*s)):r*s},sign(t,e=0,s=1){t instanceof Array||(t=[t]);const r=z((t=>Math.sign(t-e)),...t);return r instanceof Array?r.map((t=>t*s)):r*s},rect(t,e,s=0){t instanceof Array||(t=[t]);const r=z((t=>s-e/2<t&&s+e/2>t?1-2*u(t/e):0),...t);return r instanceof Array?r.map((t=>t*A)):r*A},tri(t,e,s=0,r=1){t instanceof Array||(t=[t]);const n=z((t=>s-e/2<t&&s+e/2>t?1-2*u(t/e):0),...t);return n instanceof Array?n.map((t=>t*r)):n*r},dirac:(t,e)=>z((t=>t===e?1/0:0),...t),lorentz(t,e=0,s=1){t instanceof Array||(t=[t]);const r=z((t=>1/(1+(t-e)**2)),...t);return r instanceof Array?r.map((t=>t*s)):r*s},sinc(t,e,s=1){t instanceof Array||(t=[t]);const r=z((t=>w(t-e)),...t);return r instanceof Array?r.map((t=>t*s)):r*s},square(t,e=1,s=1){t instanceof Array||(t=[t]);const r=z((t=>T(x(2*t*Math.PI/e))),...t);return r instanceof Array?r.map((t=>t*s)):r*s},sawtooth(){},conv:kt,conv1d:wt,conv2d:vt,circularConv:(t,e)=>kt(t,e,!0),linearConv:(t,e)=>kt(t,e,!1),circularConv1d:(t,e)=>wt(t,e,!0),linearConv1d:(t,e)=>wt(t,e,!1),circularConv2d:(t,e)=>vt(t,e,!0),linearConv2d:(t,e)=>vt(t,e,!1),fft:xt,ifft:bt,filter:t=>new Mt(t)};Object.defineProperties(Number.prototype,{inRange:{value:function(t,e){return mt(this.valueOf(),t,e)}},add:{value:function(...t){return Y(this.valueOf(),...t)}},sub:{value:function(...t){return Z(this.valueOf(),...t)}},mul:{value:function(...t){return G(this.valueOf(),...t)}},div:{value:function(...t){return Q(this.valueOf(),...t)}},modulo:{value:function(...t){return K(this.valueOf(),...t)}},norm:{value:function(t,e){return norm(this.valueOf(),t,e)}},lerp:{value:function(t,e){return lerp(this.valueOf(),t,e)}},map:{value:function(t,e,s,r){return map(this.valueOf(),t,e,s,r)}},clamp:{value:function(t,e){return clamp(this.valueOf(),t,e)}},toDeg:{value:function(){return ut(this.valueOf())}},toRad:{value:function(){return ct(this.valueOf())}}}),Object.defineProperties(Array.prototype,{inRange:{value:function(t,e){return mt(this.valueOf(),t,e)}},add:{value:function(...t){return Y(this.valueOf(),...t)}},sub:{value:function(...t){return Z(this.valueOf(),...t)}},mul:{value:function(...t){return G(this.valueOf(),...t)}},div:{value:function(...t){return Q(this.valueOf(),...t)}},modulo:{value:function(...t){return K(this.valueOf(),...t)}},norm:{value:function(t,e){return norm(this.valueOf(),t,e)}},lerp:{value:function(t,e){return lerp(this.valueOf(),t,e)}},_map:{value:function(t,e,s,r){return map(this.valueOf(),t,e,s,r)}},clamp:{value:function(t,e){return clamp(this.valueOf(),t,e)}},deepMap:{value:function(t){return z(t,...this.valueOf())}}});const At={PI:N,E:L,EPSILON:H,Random:F,complex:r,Complex:s,Matrix:P,LinearSystem:class{static resolve(t,e){return t.inv.dot(P.fromVector(e)).arr.flat(1).map((t=>+t.toFixed(10)))}},matrix:B,matrix2:(...t)=>new P(2,2,t),matrix3:(...t)=>new P(3,3,t),matrix4:(...t)=>new P(4,4,t),cos:y,sin:x,tan:b,sinc:w,sec:function(...t){return z(l.sec,...t)},csc:function(...t){return z(l.csc,...t)},cot:function(...t){return z(l.cot,...t)},abs:u,sqrt:m,pow:p,sqrtn:d,e:f,ln:g,acos:function(...t){return z(l.acos,...t)},asin:function(...t){return z(l.asin,...t)},atan:function(...t){return z(l.atan,...t)},acot:function(...t){return z(l.acot,...t)},cosh:v,sinh:k,tanh:function(...t){return z(l.tanh,...t)},coth:function(...t){return z(l.coth,...t)},acosh:function(...t){return z(l.acosh,...t)},asinh:function(...t){return z(l.asinh,...t)},atanh:function(...t){return z(l.atanh,...t)},min:a,max:o,sign:T,floor:M,ceil:function(...t){return z(Math.ceil,...t)},round:function(...t){return z(Math.round,...t)},fact:function(...t){return z((t=>{let e,s=1;if(0==t)s=1;else if(t>0)for(e=1;e<=t;e++)s*=e;else s=NaN;return s}),...t)},hypot:O,sig:function(...t){return z((t=>1/(1+f(-t))),...t)},atan2:C,Utils:yt,nums:et,zeros:J,ones:tt,sum:n,prod:i,add:Y,mul:G,div:Q,sub:Z,modulo:K,rad2deg:ut,deg2rad:ct,arange:at,linspace:ot,logspace:ht,geomspace:lt,norm:st,lerp:rt,map:nt,clamp:it,pgcd:ft,ppcm:gt,isApproximatlyEqual:pt,inRange:mt,cartesianProduct:dt,Discret:R,Logic:_,Base:I,Permutation:V,Combinaison:S,PowerSet:D,subset:j,Signal:Et,ExtractAll:function(){for(let t=0;t<Object.keys(this).length;t++)globalThis[Object.keys(this)[t]]=Object.values(this)[t];return this},RemoveAll:function(){for(let t=0;t<Object.keys(this).length;t++)delete globalThis[Object.keys(this)[t]];return this}},Ct=(t,e="px")=>("number"==typeof t&&(t+=e),t instanceof Array&&(t=t.map((t=>"number"==typeof t?t+=e:t)).join(" ")),t);function Tt(){return{style:function(t,{target:e="parent",maskVector:s=null}={}){return"parent"===e||0===e?((t,e)=>{t&&Object.assign(t.style,e)})(this.element,t):"parent"!==e&&0!==e||(s?this.items.map(((e,r)=>1==s[r]&&e.style(t))):this.items.map((e=>e.style(t)))),this},setCss:function(t){return this.element.style.cssText=t,this},addCss:function(t){return this.element.style.cssText+=t,this},size:function(t,e,{target:s,maskVector:r}={}){return this.width(t,{target:s,maskVector:r}),this.height(e,{target:s,maskVector:r}),this},width:function(t,{target:e,maskVector:s}={}){if(t instanceof Object){if(t instanceof Array&&(t={min:t[0],max:t[1]}),"min"in t||"max"in t){let r=t.min??t.max,n=t.max??t.min;r=Ct(r,"px"),n=Ct(n,"px"),this.style({minWidth:r,maxWidth:n},{target:e,maskVector:s})}}else t=Ct(t,"px"),this.style({width:t},{target:e,maskVector:s});return this},height:function(t,{target:e,maskVector:s}={}){if(t instanceof Object){if(t instanceof Array&&(t={min:t[0],max:t[1]}),"min"in t||"max"in t){let r=t.min??t.max,n=t.max??t.min;r=Ct(r,"px"),n=Ct(n,"px"),this.style({minHeight:r,maxHeight:n},{target:e,maskVector:s})}}else t=Ct(t,"px"),this.style({height:t},{target:e,maskVector:s});return this},hide:function({after:t,target:e,maskVector:s}={}){return"number"==typeof t?setTimeout((()=>this.hide({target:e,maskVector:s})),t):(this.cache.isHidden=!0,this.style({display:"none"},{target:e,maskVector:s})),this},show:function({after:t,target:e,maskVector:s}={}){return"number"==typeof t?setTimeout((()=>this.show({target:e,maskVector:s})),t):(this.cache.isHidden=!1,this.style({display:""},{target:e,maskVector:s})),this}}}class Ot{constructor(t={}){this.target=null,this.styles=new Map([["default",t]]),this.cache={isHidden:!1,isFaddedOut:!1,transformation:{Flip:[0,0,0]}}}linkTo(t){return this.target=t,this}use(t="default"){return this.target.style(this.styles.get(t)),this}update(t,e){const s=this.styles.get(t);return s?this.styles.set(t,Object.assign(s,e)):this.styles.set(t,e),this}add(t,e){return this.styles.set(t,e),this}replace(t,e){return this.styles.set(t,e),this}delete(...t){return t.forEach((t=>this.styles.delete(t))),this}size(t,e,{target:s,maskVector:r}={}){return this.target.style({width:t,height:e},{target:s,maskVector:r}),this}width(t,{target:e,maskVector:s}={}){if(t instanceof Object){if(t instanceof Array&&(t={min:t[0],max:t[1]}),"min"in t||"max"in t){let r=t.min??t.max,n=t.max??t.min;r=Ct(r,"px"),n=Ct(n,"px"),this.target.style({minWidth:r,maxWidth:n},{target:e,maskVector:s})}}else t=Ct(t,"px"),this.target.style({width:t},{target:e,maskVector:s});return this}height(t,{target:e,maskVector:s}={}){if(t instanceof Object){if(t instanceof Array&&(t={min:t[0],max:t[1]}),"min"in t||"max"in t){let r=t.min??t.max,n=t.max??t.min;r=Ct(r,"px"),n=Ct(n,"px"),this.target.style({minHeight:r,maxHeight:n},{target:e,maskVector:s})}}else t=Ct(t,"px"),this.target.style({height:t},{target:e,maskVector:s});return this}hide({after:t,target:e,maskVector:s}={}){if("number"==typeof t){const r=()=>this.hide({target:e,maskVector:s});setTimeout(r,t),clearTimeout(r)}else this.cache.isHidden=!0,this.target.style({display:"none"},{target:e,maskVector:s});return this}show({after:t,target:e,maskVector:s}={}){if("number"==typeof t){const r=()=>this.show({target:e,maskVector:s});setTimeout(r,t),clearTimeout(r)}else this.cache.isHidden=!1,this.target.style({display:""},{target:e,maskVector:s});return this}color(t,{target:e,maskVector:s}={}){return this.target.style({color:t},{target:e,maskVector:s}),this}background(t,{target:e,maskVector:s}={}){return this.target.style({background:t},{target:e,maskVector:s}),this}backgroundColor(t,{target:e,maskVector:s}={}){return this.target.style({backgroundColor:t},{target:e,maskVector:s}),this}opacity(t,{target:e,maskVector:s}={}){return this.target.style({opacity:t},{target:e,maskVector:s}),this}position(t,{target:e,maskVector:s}={}){return this.target.style({position:t},{target:e,maskVector:s}),this}display(t,{target:e,maskVector:s}={}){return this.target.style({display:t},{target:e,maskVector:s}),this}zIndex(t,{target:e,maskVector:s}={}){return this.target.style({zIndex:t},{target:e,maskVector:s}),this}float(t,{target:e,maskVector:s}={}){return this.target.style({float:t},{target:e,maskVector:s}),this}border(t="1px solid red",{target:e,maskVector:s}={}){return this.target.style({border:t},{target:e,maskVector:s}),this}borderTop(t="1px solid red",{target:e,maskVector:s}={}){return this.target.style({borderTop:t},{target:e,maskVector:s}),this}borderRight(t="1px solid red",{target:e,maskVector:s}={}){return this.target.style({borderRight:t},{target:e,maskVector:s}),this}borderBottom(t="1px solid red",{target:e,maskVector:s}={}){return this.target.style({borderBottom:t},{target:e,maskVector:s}),this}borderLeft(t="1px solid red",{target:e,maskVector:s}={}){return this.target.style({borderLeft:t},{target:e,maskVector:s}),this}borderRadius(t,{target:e,maskVector:s}={}){return t=Ct(t,"px"),this.target.style({borderRadius:t},{target:e,maskVector:s}),this}margin(t,{target:e,maskVector:s}={}){return t=Ct(t,"px"),this.target.style({margin:t},{target:e,maskVector:s}),this}marginTop(t,{target:e,maskVector:s}={}){return t=Ct(t,"px"),this.target.style({marginTop:t},{target:e,maskVector:s}),this}marginRight(t,{target:e,maskVector:s}={}){return t=Ct(t,"px"),this.target.style({marginRight:t},{target:e,maskVector:s}),this}marginBootom(t,{target:e,maskVector:s}={}){return t=Ct(t,"px"),this.target.style({marginBootom:t},{target:e,maskVector:s}),this}marginLeft(t,{target:e,maskVector:s}={}){return t=Ct(t,"px"),this.target.style({marginLeft:t},{target:e,maskVector:s}),this}padding(t,{target:e,maskVector:s}={}){return t=Ct(t,"px"),this.target.style({padding:t},{target:e,maskVector:s}),this}paddingTop(t,{target:e,maskVector:s}={}){return t=Ct(t,"px"),this.target.style({paddingTop:t},{target:e,maskVector:s}),this}paddingRight(t,{target:e,maskVector:s}={}){return t=Ct(t,"px"),this.target.style({paddingRight:t},{target:e,maskVector:s}),this}paddingBootom(t,{target:e,maskVector:s}={}){return t=Ct(t,"px"),this.target.style({paddingBootom:t},{target:e,maskVector:s}),this}paddingLeft(t,{target:e,maskVector:s}={}){return t=Ct(t,"px"),this.target.style({paddingLeft:t},{target:e,maskVector:s}),this}font(t,{target:e,maskVector:s}={}){return this.target.style({font:t},{target:e,maskVector:s}),this}fontFamily(t="",{target:e,maskVector:s}={}){return this.target.style({fontFamily:t},{target:e,maskVector:s}),this}fontSize(t,{target:e,maskVector:s}={}){return this.target.style({fontSize:t},{target:e,maskVector:s}),this}cursor(t="pointer"){return this.target.style({cursor:t}),this}overflow(t,e,{target:s,maskVector:r}={}){const n=["hidden","auto"];return this.target.style({overflowX:"number"==typeof t?n[t]:t,overflowY:"number"==typeof e?n[e]:e},{target:s,maskVector:r}),this}clip(t,{target:e,maskVector:s}={}){return"string"==typeof t&&(t="polygon("+t+")"),this.target.style({clipPath:t},{target:e,maskVector:s}),this}fadeOut(t=1){return this.target.style({transition:t/1e3+"s",opacity:0}),this.cache.isFaddedOut=!0,this}fadeIn(t=1){return this.target.style({transition:t/1e3+"s",opacity:1}),this.cache.isFaddedOut=!1,this}toggleFade(t=1e3,e=t){return this.cache.isFaddedOut?this.fadeIn(t):this.fadeOut(e),this}translateX(t,e=0){return this.target.style({transform:"translateX("+t+"px)"}),0!=e&&this.target.style({transition:`transform ${e/1e3}s ease`}),this}translateY(t,e=0){return this.target.style({transform:"translateY("+t+"px)"}),0!=e&&this.target.style({transition:`transform ${e/1e3}s ease`}),this}translate(t,e=t,s=0){return this.target.style({transform:`translate( ${t}px , ${e}px )`}),0!=s&&this.target.style({transition:`transform ${s/1e3}s ease`}),this}rotateX(t,e=0){return this.target.style({transform:"rotateX("+t+"deg)"}),0!=e&&this.target.style({transition:`transform ${e/1e3}s ease`}),this}rotateY(t,e=0){return this.target.style({transform:"rotateY("+t+"deg)"}),0!=e&&this.target.style({transition:`transform ${e/1e3}s ease`}),this}rotateZ(t,e=0){return this.target.style({transform:"rotateZ("+t+"deg)"}),0!=e&&this.target.style({transition:`transform ${e/1e3}s ease`}),this}flipeX({t:t=1}={}){return this.cache.transformation.Flip[0]+=180,this.cache.transformation.Flip[0]%=360,this.target.style({transform:"rotateX("+this.cache.transformation.Flip[0]+"deg)",transition:"all "+t+"s ease"}),this}flipeY(t=1){return this.cache.transformation.Flip[1]+=180,this.cache.transformation.Flip[1]%=360,this.target.style({transform:"rotateY("+this.cache.transformation.Flip[1]+"deg)",transition:"all "+t+"s ease"}),this}flipeZ(t=1){return this.cache.transformation.Flip[2]+=180,this.cache.transformation.Flip[2]%=360,this.target.style({transform:"rotateZ("+this.cache.transformation.Flip[2]+"deg)",transition:"all "+t+"s ease"}),this}slideHeightIn(t=1,e=this.h){return this.target.style({transition:t+"s",height:e}),this}slideHeightOut(t=1){return this.target.style({transition:t+"s",height:0}),this.target.element.addEventListener("transitionend",(()=>this.target.style({opacity:"none"}))),this}slideWidthIn(t=1,e=this.w){return this.target.style({transition:t+"s",width:e}),this}slideWidthOut(t=1){this.target.style({transition:t+"s",width:0});const e=()=>{this.target.style({opacity:"none"})};return this.target.element.addEventListener("transitionend",e),this.target.element.removeEventListener("transitionend",e),this}slideIn({t:t=1,w:e="100%",h:s="auto"}={}){return this.target.style({transition:t+"s",width:e,height:s,visibility:"visible"}),this}slideOut({t:t=1,width:e=0,height:s=0}={}){this.target.style({visibility:"hidden",transition:t+"s",opacity:"none",width:e,height:s});const r=()=>{this.target.style({opacity:"none"})};return this.target.element.addEventListener("transitionend",r),this.target.element.removeEventListener("transitionend",r),this}}const _t={Key:{data:[],dispose:function(){return this.data.map((t=>t?.event?.dispose())),this},destroy:function(){return this.dispose(),this.data.length=0,this}},Pointer:{data:[],dispose:function(){return this.data.map((t=>t?.event?.dispose())),this},destroy:function(){return this.dispose(),this.data.length=0,this}},Drag:{data:[],dispose:function(){return this.data.map((t=>t?.event?.dispose())),this},destroy:function(){return this.dispose(),this.data.length=0,this}}};function It(t,e,s,r){return this.event=t,this.cache.preventDefault[e]&&t.preventDefault(),s&&s(),this.cache.stream.enabled[e]&&r&&this.cache.stream.history[e].push(r),this.cache.callbacks[e].map((t=>t(this))),this}class Vt{constructor(t){this.Target=window,this.setTarget(t),this.__dispose=this.dispose.bind(this)}get TargetElement(){return this.Target.element}setTarget(t){return this.Target=t,this}__handle(t,e,s){const r="drag"===t?t:`${this.cache.prefixe}${t}`;return this.dispose(s),this.TargetElement.addEventListener(r,e),this}__onEvent(t,e,...s){if(0===s.length){if(!(this.cache.callbacks.length>1))return this;this.cache.callbacks.map((t=>e=>t.call(this,e)))}else this.cache.callbacks[t]=s.map((t=>e=>t.call(this,e)));return this.__handle(t,this.__controller[t],e),this}preventDefault(t={}){return Object.assign(this.cache.preventDefault,t),this}pause(t={}){t={...Object.fromEntries(Object.keys(this.cache.stream.enabled).map((t=>[t,!0]))),...t};for(let e in t)t[e]&&(this.TargetElement.removeEventListener(`${this.cache.prefixe}${e}`,this.__controller[`${this.cache.prefixe}${e}`]),this.cache.paused[`${this.cache.prefixe}${e}`]=!0);return this}resume(t={}){t={...Object.fromEntries(Object.keys(this.cache.stream.enabled).map((t=>[t,!0]))),...t};for(let e in t)t[e]&&(this.TargetElement.addEventListener(`${this.cache.prefixe}${e}`,this.__controller[`${this.cache.prefixe}${e}`]),this.cache.paused[`${this.cache.prefixe}${e}`]=!1);return this}dispose(t={}){return this.pause(t),this}stream(t={}){this.cache.stream.t0=Date.now();return t={...Object.fromEntries(Object.keys(this.cache.stream.enabled).map((t=>[t,!0]))),...t},Object.assign(this.cache.stream.enabled,t),this}clear(t={}){t={...Object.fromEntries(Object.keys(this.cache.stream.clear).map((t=>[t,!0]))),...t};for(let e in t)t[e]&&(this.cache.stream.history[e]=[]);return this}get Garbage(){return _t}}function St(t){It.call(this,t,"down",(()=>{this.dx=parseInt(t.offsetX),this.dy=parseInt(t.offsetY),this.isDown=!0}),{x:this.dx,y:this.dy,t:Date.now()-this.cache.stream.t0})}function Dt(t){It.call(this,t,"move",(()=>{this.mx=parseInt(t.offsetX),this.my=parseInt(t.offsetY),this.isMoving=!0}),{x:this.mx,y:this.my,t:Date.now()-this.cache.stream.t0})}function jt(t){It.call(this,t,"up",(()=>{this.ux=parseInt(t.offsetX),this.uy=parseInt(t.offsetY),this.isDown=!1}),{x:this.ux,y:this.uy,t:Date.now()-this.cache.stream.t0})}function Rt(t){It.call(this,t,"enter",null,null)}function Ft(t){It.call(this,t,"leave",null,null)}function Pt(t){It.call(this,t,"out",null,null)}class Bt extends Vt{constructor(t){super(t),this.event=null,this.dx=0,this.dy=0,this.dt=0,this.mx=0,this.my=0,this.mt=0,this.ux=0,this.uy=0,this.ut=0,this.isMoving=!1,this.isDown=!1,this.cache={prefixe:"pointer",preventDefault:{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!1},paused:{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!1},stream:{enabled:{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!1},clear:{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!1},history:{down:[],move:[],up:[],enter:[],out:[],leave:[]}},callbacks:{down:[t=>console.log({dx:t.dx,dy:t.dy,down:t.down,move:t.move,t:t.dt})],move:[t=>console.log({mx:t.mx,my:t.my,down:t.down,move:t.move,t:t.dt})],up:[t=>console.log({ux:t.ux,uy:t.uy,down:t.down,move:t.move,t:t.dt})],enter:[t=>console.log({dx:t.dx,dy:t.dy,down:t.down,move:t.move,t:t.dt})],out:[t=>console.log({mx:t.mx,my:t.my,down:t.down,move:t.move,t:t.dt})],leave:[t=>console.log({ux:t.ux,uy:t.uy,down:t.down,move:t.move,t:t.dt})]}},this.__controller={down:St.bind(this),move:Dt.bind(this),up:jt.bind(this),enter:Rt.bind(this),out:Pt.bind(this),leave:Ft.bind(this)}}onDown(...t){return this.__onEvent("down",{down:!0,move:!1,up:!1,enter:!1,out:!1,leave:!1},...t),this}onMove(...t){return this.__onEvent("move",{down:!1,move:!0,up:!1,enter:!1,out:!1,leave:!1},...t),this}onUp(...t){return this.__onEvent("up",{down:!1,move:!1,up:!0,enter:!1,out:!1,leave:!1},...t),this}onEnter(...t){return this.__onEvent("enter",{down:!1,move:!1,up:!1,enter:!0,out:!1,leave:!1},...t),this}onOut(...t){return this.__onEvent("out",{down:!1,move:!1,up:!1,enter:!1,out:!0,leave:!1},...t),this}onLeave(...t){return this.__onEvent("leave",{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!0},...t),this}}var zt=t=>new Bt(t);function Nt(t){It.call(this,t,"down",(()=>this.kd=t.key),{key:t.key,t:10})}function Lt(t){It.call(this,t,"press",(()=>this.kp=t.key),{key:t.key,t:10})}function Ht(t){It.call(this,t,"up",(()=>this.ku=t.key),{key:t.key,t:10})}class Ut extends Vt{constructor(t){super(t),this.kp=null,this.kd=null,this.ku=null,this.t=0,this.cache={prefixe:"key",preventDefault:{down:!1,press:!1,up:!1},paused:{down:!1,press:!1,up:!1},stream:{enabled:{down:!1,press:!1,up:!1},clear:{down:!0,press:!1,up:!1},history:{down:[],press:[],up:[]}},callbacks:{down:[t=>console.log({kd:t.kd})],press:[t=>console.log({kp:t.kp})],up:[t=>console.log({ku:t.ku})]},successifKeysCallback:{down:[t=>console.log(1111)],press:[t=>console.log(1112)],kyup:[t=>console.log(1113)]}},this.__controller={down:Nt.bind(this),press:Lt.bind(this),up:Ht.bind(this)}}onDown(...t){return this.__onEvent("down",{down:!0},...t),this}onPress(...t){return this.__onEvent("press",{press:!0},...t),this}onUp(...t){return this.__onEvent("up",{up:!0},...t),this}}var qt=t=>new Ut(t);function Wt(t){It(this,t,"start",null)}function Xt(t){It.call(this,t,"drag",null,null)}function $t(t){It.call(this,t,"end",null,null)}function Yt(t){It.call(this,t,"drop",null,null)}class Zt extends Vt{constructor(t){super(t),this.Target.setAttribute("draggable",!0),this.cache={prefixe:"drag",preventDefault:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},paused:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},enabled:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},callbacks:{drag:[],start:[],end:[],enter:[],leave:[],over:[]},stream:{enabled:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},clear:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},history:{drag:[],start:[],end:[],enter:[],leave:[],over:[]}}},this.__controller={start:Wt.bind(this),drag:Xt.bind(this),end:$t.bind(this)}}onStart(...t){return this.__onEvent("start",{},...t),this}onDrag(...t){return this.__onEvent("drag",{},...t),this}onEnd(...t){return this.__onEvent("end",{},...t),this}}class Gt extends Vt{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{drop:!1},paused:{drop:!1},stream:{enabled:{drop:!1},clear:{drop:!1},history:{drop:[]}},callbacks:{drop:[t=>console.log({dx:t.dx,dy:t.dy,drop:t.drop,move:t.move,t:t.dt})]}},this.__controller={drop:Yt.bind(this)}}onDrop(...t){return this.__onEvent("drop",{},...t),this}}const Qt=t=>new Zt(t),Kt=t=>new Gt(t);function Jt(t){It.call(this,t,"click",null,null)}function te(t){It.call(this,t,"dbclick",null,null)}class ee extends Vt{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{click:!1,dbclick:!1},paused:{click:!1,dbclick:!1},stream:{enabled:{click:!1,dbclick:!1},clear:{click:!1,dbclick:!1},history:{click:[],dbclick:[]}},callbacks:{click:[],dbclick:[]}},this.__controller={click:Jt.bind(this),dbclick:te.bind(this)}}onClick(...t){return this.__onEvent("click",{},...t),this}onDbClick(...t){return this.__onEvent("dbclick",{},...t),this}}const se=t=>new ee(t);function re(t){It.call(this,t,"copy",null,null)}function ne(t){It.call(this,t,"cut",null,null)}function ie(t){It.call(this,t,"paste",null,null)}function ae(t){It.call(this,t,"select",null,null)}class oe extends Vt{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{copy:!1,cut:!1,paste:!1,select:!1},paused:{copy:!1,cut:!1,paste:!1,select:!1},stream:{enabled:{copy:!1,cut:!1,paste:!1,select:!1},clear:{copy:!1,cut:!1,paste:!1,select:!1},history:{copy:[],cut:[],paste:[],select:[]}},callbacks:{copy:[],cut:[],paste:[],select:[]}},this.__controller={copy:re.bind(this),cut:ne.bind(this),paste:ie.bind(this),select:ae.bind(this)}}onCopy(...t){return this.__onEvent("copy",{},...t),this}onCut(...t){return this.__onEvent("cut",{},...t),this}onPaste(...t){return this.__onEvent("paste",{},...t),this}onSelect(...t){return this.__onEvent("select",{},...t),this}}const he=t=>new oe(t);function le(t){It.call(this,t,"focus",null,null)}function ce(t){It.call(this,t,"blur",null,null)}class ue extends Vt{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{focus:!1,blur:!1},paused:{focus:!1,blur:!1},stream:{enabled:{focus:!1,blur:!1},clear:{focus:!1,blur:!1},history:{focus:[],blur:[]}},callbacks:{focus:[],blur:[]}},this.__controller={focus:le.bind(this),blur:ce.bind(this)}}onFocus(...t){return this.__onEvent("focus",{},...t),this}onBlur(...t){return this.__onEvent("blur",{},...t),this}}const me=t=>new ue(t);function pe(t){It.call(this,t,"input",null,null)}function de(t){It.call(this,t,"change",null,null)}class fe extends Vt{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{input:!1,change:!1},paused:{input:!1,change:!1},stream:{enabled:{input:!1,change:!1},clear:{input:!1,change:!1},history:{input:[],change:[]}},callbacks:{input:[],change:[]}},this.__controller={input:pe.bind(this),change:de.bind(this)}}get value(){return this.Target.value}onInput(...t){return this.__onEvent("input",{},...t),this}onChange(...t){return this.__onEvent("change",{},...t),this}}const ge=t=>new fe(t);class ye{constructor(t=""){this.channel=new BroadcastChannel(t),this.EVENTS_DATAS_PAIRS=new Map,this.EVENTS_HANDLERS_PAIRS=new Map,this.LAST_RECEIVED_EVENT="",this.UUID=crypto.randomUUID(),this.SUBSCRIBERS=new Set([this.UUID])}get broadcast(){return this}emit(t,e){return this.EVENTS_DATAS_PAIRS.set(t,e),this.#s(t),this}on(t,e=console.log){return this.EVENTS_HANDLERS_PAIRS.set(t,e),this.#r(),this}#r(){return this.channel.onmessage=t=>{this.LAST_RECEIVED_EVENT=t.data.last_sended_event;const e=t.data.userId;this.SUBSCRIBERS.add(e);const s=t.data.EVENTS_DATAS_PAIRS.get(this.LAST_RECEIVED_EVENT),r=this.EVENTS_HANDLERS_PAIRS.get(this.LAST_RECEIVED_EVENT);s&&r&&r(s)},this}#s(t){return this.channel.postMessage({EVENTS_DATAS_PAIRS:this.EVENTS_DATAS_PAIRS,last_sended_event:t,userId:this.UUID}),this}close(){return this.channel.close(),this}}const xe={Pointer:zt,Key:qt,Drag:Qt,Drop:Kt,Click:se,Clipboard:he,Focus:me,Input:ge,Channel:t=>new ye(t),ExtractAll:function(){for(let t=0;t<Object.keys(this).length;t++)globalThis[Object.keys(this)[t]]=Object.values(this)[t];return this},RemoveAll:function(){for(let t=0;t<Object.keys(this).length;t++)delete globalThis[Object.keys(this)[t]];return this}};class be{constructor(t,e){this.target=t,this.contentRect=null,this.observer=new ResizeObserver((()=>{e(this)}))}get BoundingRect(){return this.target.element.getBoundingClientRect()}get width(){return this.BoundingRect.width}get height(){return this.BoundingRect.height}get top(){return this.BoundingRect.top}get bottom(){return this.BoundingRect.bottom}get right(){return this.BoundingRect.right}get left(){return this.BoundingRect.left}get x(){return this.BoundingRect.x}get y(){return this.boundingRect.y}start(){return this.observer.observe(this.target.element),this}stop(){return this}}class we{constructor(t,e,{threshold:s=0,margin:r=0}={}){this.target=t,this.config={threshold:s,margin:r},this.observer=new IntersectionObserver((t=>{this.entrie=t[0],e(this)}),{threshold:this.threshold})}get ratio(){return this.entrie.intersectionRatio}get isIntersecting(){return this.entrie.isIntersecting}setThreshould(t){return this.config.threshold=t,this}setMargin(t){return t="number"==typeof t?t+"px":t,this.config.margin=t,this}start(){return this.observer.observe(this.target.element),this}stop(){return this}}class ve{constructor(t){var e;this.Target=document.body,"string"==typeof t&&(t=document.createElement(t)),this.element=t,Object.assign(this,Tt.call(this)),this.cache={isHidden:!1,isFrozzen:!1,transformMatrix:B([[0,0,0],[0,0,0],[1,1,0]]),style:(e={},new Ot(e)),attributes:{},filters:{}},this.items=[],this.events={ptr:null,key:null,drag:null,drop:null,click:null,clipboard:null,focus:null},this.observer={resize:null,intersection:null},this.cache.style.linkTo(this),this.style({position:"relative"}),this.size("auto","auto")}get st(){return this.cache.style}get attr(){return this.cache.attributes}get evt(){}clone(){const t=new this.constructor,e=[...this.items];return{UI:t.append(...e),items:e}}get Width(){return this.element.getBoundingClientRect().width}get Height(){return this.element.getBoundingClientRect().height}get Top(){return this.element.getBoundingClientRect().top}get Right(){return this.element.getBoundingClientRect().right}get Bottom(){return this.element.getBoundingClientRect().bottom}get Left(){return this.element.getBoundingClientRect().left}freeze(t){return this.cache.isFrozzen=t,this}at(t){return this.items.at(t)}maintain(){for(let t=0;t<this.items.length;t++)Object.assign(this,{[[t]]:this.items[t]});return this.length=this.items.length,this}setTarget(t){return t instanceof ve&&(t=t.element),this.remove(),this.Target=t,this.render(),this}render(t=!0,e=this.Target){return e instanceof ve&&(e=e.element),this.Target=e,t?this.Target.appendChild(this.element):this.remove(),this}append(...t){if(this.cache.isFrozzen)return console.warn("You can't append new item to frozzen element"),this;for(let e=0;e<t.length;e++)["number","string"].includes(typeof t[e])&&(t[e]=Ee(t[e])),t[e]instanceof ve?(t[e].parent=this,this.element.appendChild(t[e].element),t[e].Target=this.element,this.items.push(t[e])):t[e]instanceof Object&&(t[e]?.style&&this.style(t[e]?.style),t[e]?.attr&&Object.entries(t[e].attr).forEach((t=>this.setAttribute(""+t[0],t[1]))));return this.maintain(),this}remove(...t){if(0==t.length)this.Target.children.length&&this.Target.removeChild(this.element);else{const e=t=>{"number"==typeof t&&(t=this.items[t]),t instanceof ve&&this.element.removeChild(t.element),this.items=this.items.filter((e=>e!==t))};for(let s=0;s<t.length;s++)e(t[s]);for(let t=0;t<this.items.length;t++)Object.assign(this,{[[t]]:this.items[t]})}return this}removeAfter(t=1){return setTimeout((()=>this.remove()),t),this}removeItem(...t){const e=t=>{t instanceof ve?this.element.removeChild(t.element):"number"==typeof t&&this.element.removeChild(this.element.children[t])};for(let s=0;s<t.length;s++)e(t[s]);for(let t=0;t<this.items.length;t++)Object.assign(this,{[[t]]:this.items[t]});return this}insertAt(t,...e){if(t>=this.element.children.length)this.append(...e);else for(let s=0;s<e.length;s++)["number","string"].includes(typeof e[s])&&(e[s]=Ee(e[s])),this.element.insertBefore(e[s].element,this.items[t].element),this.items.splice(t,0,e[s]);return this}setAttribute(t,e){return this.element.setAttribute(t,e),Object.assign(this.cache.attributes,Object.fromEntries([[t,e]])),this}removeAttribute(t){return this.element.setAttribute(t),this}setContentEditable(t=!0){return this.setAttribute("contenteditable",t),this}get children(){return[...this.element.children]}get cloneElement(){return this.element.cloneNode(!0)}get styleObject(){return Object.fromEntries(Object.entries(this.element.style).filter((t=>""!=t[1]&&"initial"!==t[1]&&isNaN(+t[0]))))}setClasses(...t){return this.setAttribute("class",t.join(" ")),this}get Classes(){const t=this.element.getAttribute("class");return null===t?[]:t.split(" ")}addClass(){}setId(t){return this.element.setAttribute("id",t),this}get Id(){return this.element.getAttribute("id")}forEach(t){return this.items.forEach(t),this}filter(t,e,s){return this.items.filter(t).forEach(e),this}filterByTextContent(t,e=!1){return this.items.map((t=>t.render())),this.items.filter((s=>{const r=s.element.textContent;return!(e?r===t:r.includes(t))})).map((t=>t.render(!1))),this}filterByClass(t){return this.items.map((t=>t.render())),this.items.filter((e=>!e.Classes.includes(t))).map((t=>t.render(!1))),this}sortByTextContent(t,e){let s=this.children;return s.filter((e=>!e.textContent.toLowerCase().includes(t.toLowerCase()))).map((t=>{t.style.display="none"})),s.filter((e=>e.textContent.toLowerCase().includes(t.toLowerCase()))).map(((t,s)=>t.style.display=e[s])),s.filter((t=>"none"!=t.style.display)),this}onPtrMove(...t){return this.events.ptr||(this.events.ptr=zt(this)),this.events.ptr.onMove(...t),this}onPtrDown(...t){return this.events.ptr||(this.events.ptr=zt(this)),this.events.ptr.onDown(...t),this}onPtrUp(...t){return this.events.ptr||(this.events.ptr=zt(this)),this.events.ptr.onUp(...t),this}onPtrEnter(...t){return this.events.ptr||(this.events.ptr=zt(this)),this.events.ptr.onEnter(...t),this}onPtrLeave(...t){return this.events.ptr||(this.events.ptr=zt(this)),this.events.ptr.onLeave(...t),this}onPtrOut(...t){return this.events.ptr||(this.events.ptr=zt(this)),this.events.ptr.onOut(...t),this}onKeyDown(...t){return this.events.key||(this.events.key=qt(this)),this.events.key.onDown(...t),this}onKeyPress(...t){return this.events.key||(this.events.key=qt(this)),this.events.key.onPress(...t),this}onKeyUp(...t){return this.events.key||(this.events.key=qt(this)),this.events.key.onUp(...t),this}onKeysDown({keys:t=[],callback:e}={}){return this.events.key||(this.events.key=qt(this)),this.events.key.handleSuccessifKeys({keys:t,callback:e}),this}onDragStart(...t){return this.events.drag||(this.events.drag=Qt(this)),this.events.drag.onStart(...t),this}onDrag(...t){return this.events.drag||(this.events.drag=Qt(this)),this.events.drag.onDrag(...t),this}onDragEnd(...t){return this.events.drag||(this.events.drag=Qt(this)),this.events.drag.onEnd(...t),this}onDrop(...t){return this.events.drop||(this.events.drop=Kt(this)),this.events.drop.onDrop(...t),this}onClick(...t){return this.events.click||(this.events.click=se(this)),this.events.click.onClick(...t),this}onDbClick(...t){return this.events.click||(this.events.click=se(this)),this.events.click.onDbClick(...t),this}onCopy(...t){return this.events.clipboard||(this.events.clipboard=he(this)),this.events.clipboard.onCopy(...t),this}onCut(...t){return this.events.clipboard||(this.events.clipboard=he(this)),this.events.clipboard.onCut(...t),this}onPaste(...t){return this.events.clipboard||(this.events.clipboard=he(this)),this.events.clipboard.onPaste(...t),this}onSelect(...t){return this.events.clipboard||(this.events.clipboard=he(this)),this.events.clipboard.onSelect(...t),this}onFocus(...t){return this.events.focus||(this.events.focus=me(this)),this.events.focus.onFocus(...t),this}onBlur(...t){return this.events.focus||(this.events.focus=me(this)),this.events.focus.onFocus(...t),this}WatchAttributes(){}WatchChildren(){}WatchSize(t){return this.observer.resize||(this.observer.resize=((t,e)=>new be(t,e))(this,t)),this.observer.resize.start(),this}WatchIntersection(t,e){return this.observer.intersection||(this.observer.intersection=((t,e,s)=>new we(t,e,s))(this,t,e)),this.observer.intersection.start(),this}get Visible_area(){let t=this.element.getBoundingClientRect(),e=document.documentElement.clientHeight,s=document.documentElement.clientWidth,r=t.top>0&&t.top<e,n=t.bottom<e&&t.bottom>0,i=t.left>0&&t.left<s,a=t.right>0&&t.right<s;return{top:r,bottom:n,left:i,right:a,heightRatio:(t.height+t.y)/t.height,isVisible:r||n||a||i}}toggleSlide(){}scaleX(t,e=1){return this.style({transform:"scaleX("+t+")",transition:"all "+e+"s ease"}),this}scaleY(t,e=1){return this.style({transform:"scaleY("+t+")",transition:"all "+e+"s ease"}),this}skewX(t,e=1){return this.style({transform:"skewX("+t+"deg)",transition:"all "+e+"s ease"}),this}skewY(t,e=1){return this.style({transform:"skewY("+t+"deg)",transition:"all "+e+"s ease"}),this}skew(t,e,s=1){return this.style({transform:"skew("+t+"deg , "+e+"deg)",transition:"all "+s+"s ease"}),this}scale(t,e=t,s=1){return this.style({transform:"scale("+t+","+e+")",transition:"all "+s+"s ease"}),this}resize(t=0){switch(t){case 0:this.style({resize:"none"});break;case 1:this.style({resize:"horizontal"});break;case 2:this.style({resize:"vertical"});break;case 3:this.style({resize:"both"});break;default:this.style({resize:t})}return this}Glassmorphism(t="rgba(255,255,255,0.1)",e="1px"){return this.style({background:t,backdropFilter:e}),this}Neumorphism(t="50px",e="cyan",s="13px -13px 49px #5d8fac"){return this.style({borderRadius:t,background:e,boxShadow:s}),this}fullScreen(t=!0,e){return t?this.element.requestFullscreen(e):document.exitFullscreen(),this}toggleFullScreen(t){return document.fullscreenElement?document.exitFullscreen():this.element.requestFullscreen(t),this}resizeObserver(t){return new ResizeObserver((e=>t(e))).observe(this.element)}intersectionObserver(t,e="parent"){return"parent"==e?new IntersectionObserver((e=>t(e[0]))).observe(this.element):this.items.map((e=>e.intersectionObserver((e=>t(e)))))}intersectRatio(t){return new IntersectionObserver((e=>t(e[0].intersectionRatio))).observe(this.element)}get coords(){var t=this.element.getBoundingClientRect();return{parent:{cX:Math.floor(t.left+(t.right-t.left)/2),cY:Math.floor(t.top+(t.bottom-t.top)/2)}}}exportHTML(){}toPdf(){return"Install @ziko/jspdf"}}const ke={text:[],p:[],pre:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],br:[],hr:[],btn:[],ol:[],ul:[],image:[],video:[],audio:[],Article:[],Main:[],Section:[],Aside:[],Nav:[],Header:[],Footer:[],Flex:[],FlexMain:[],FlexNav:[],FlexHeader:[],FlexFooter:[],FlexSection:[],FLexArticle:[],FlexAside:[],Table:[],Svg:[],Canvas:[]};class Me extends ve{constructor(...t){super(),this.element=document.createElement("span"),this.text="",this.addValue(...t),this.st.display("inline-block"),this.render()}clear(){return this.element.textContent="",this}get value(){return this.element.textContent}setValue(t="",e=!1){["string","number"].includes(typeof t)&&(this.text=""+t,this.text.includes("\n")&&(this.text=this.text.split("\n").map((t=>"<span>".concat(t,"</span></br>"))).join(""))),t instanceof s&&(this.text=""+t.UI()),e?this.element.innerHTML+=this.text:this.element.innerHTML=this.text,(t instanceof Array||t instanceof Set)&&(t instanceof Set&&(t=[...t]),this.addValue(...t))}addValue(...t){return t.map((t=>{this.setValue(" ",!0),this.setValue(t,!0)})),this}toggleValues(...t){let e=(t=t.map((t=>""+t))).indexOf(""+this.value);return-1!=e&&e!=t.length-1?this.setValue(t[e+1]):this.setValue(t[0]),this}}const Ee=(...t)=>{const e=new Me(...t);return ke.text.push(e),e.cache.order=ke.text.length,e};class Ae extends ve{constructor(...t){super(),this.element=document.createElement("p"),this.addValue(...t),this.style({margin:0,padding:0}),this.render()}addValue(...t){for(let e=0;e<t.length;e++)"string"==typeof t[e]||"number"==typeof t[e]?(this.element.appendChild(document.createTextNode(t[e])),this.element.appendChild(document.createElement("br"))):t[e]instanceof ve?this.element.appendChild(t[e].element):t[e]instanceof s&&Ee(t.a+" + "+t.b+"i");return this}clear(){return this.element.childNodes.forEach((t=>t.remove())),this}setValue(...t){return this.clear(),this.addValue(...t),this}}class Ce extends ve{constructor(t=1,e=""){super(),this.element=document.createElement("h"+t),this.element.textContent=e,this.render()}get value(){return this.element.innerText}setValue(t=""){this.element.innerText=t}addValue(t=""){return this.element.innerText+=t,this}}class Te extends ve{constructor(t){super(t),this.render()}}class Oe extends ve{constructor(){super(),this.element=document.createElement("br"),this.render(),delete this.append}}class _e extends ve{constructor(){super(),this.element=document.createElement("hr"),this.render(),delete this.append}}class Ie extends ve{constructor(t){super(),this.element=document.createElement("a"),this.setHref(t),this.render()}setHref(t){this.element.href=t}}const Ve=(t,...e)=>new Te(t).append(...e);class Se extends ve{constructor(t){super(),this.element=document.createElement("li"),this.append(t),this.render()}}class De extends ve{constructor(){super(),delete this.append}append(...t){for(let e=0;e<t.length;e++){let s=null;["string","number"].includes(typeof t[e])&&(t[e]=Ee(t[e])),t[e]instanceof ve&&(s=new Se(t[e])),s.setTarget(this.element),this.items.push(s[0]),this.maintain()}}remove(...t){if(0==t.length)this.Target.children.length&&this.Target.removeChild(this.element);else{const e=t=>{"number"==typeof t&&(t=this.items[t]),t instanceof ve&&this.element.removeChild(t.parent.element),this.items=this.items.filter((e=>e!==t))};for(let s=0;s<t.length;s++)e(t[s]);for(let t=0;t<this.items.length;t++)Object.assign(this,{[[t]]:this.items[t]})}return this}insertAt(t,...e){if(t>=this.element.children.length)this.append(...e);else for(let s=0;s<e.length;s++){let r=null;["number","string"].includes(typeof e[s])&&(e[s]=Ee(e[s])),e[s]instanceof ve&&(r=new Se(e[s])),this.element.insertBefore(r.element,this.items[t].parent.element),this.items.splice(t,0,e[s][0])}return this}filterByTextContent(t,e=!1){return this.items.map((t=>t.parent.render())),this.items.filter((s=>{const r=s.element.textContent;return!(e?r===t:r.includes(t))})).map((t=>t.parent.render(!1))),this}sortByTextContent(t=1){return this.items.map((t=>t.parent.render(!1))),this.sortedItems=this.items.sort(((e,s)=>t*e.element.textContent.localeCompare(s.element.textContent))),this.append(...this.sortedItems),this}filterByClass(t){return this.items.map((t=>t.parent.render(!0))),this.items.filter((e=>!e.Classes.includes(t))).map((t=>t.parent.render(!1))),this}delete(t){return[...this.element.children].indexOf(t)}push(){}pop(){}unshift(){}shift(){}sort(){}filter(){}slice(){}}class je extends De{constructor(...t){super(),this.element=document.createElement("ol"),this.append(...t),this.render()}type(t=1){return this.element.setAttribute("type",t),this}start(t=1){return this.element.setAttribute("start",t),this}}class Re extends De{constructor(...t){super(),this.element=document.createElement("ul"),this.append(...t),this.render()}}class Fe extends ve{constructor(t="button"){super(),this.element=document.createElement("button"),this.setValue(t),this.render(),this.cursor("pointer")}setValue(t){return t instanceof ve?t.setTarget(this.element):(this.element.appendChild(document.createTextNode("")),this.element.childNodes[0].data=t),this}get value(){return this.element.innerText}toggleValues(...t){let e=(t=t.map((t=>""+t))).indexOf(""+this.value);return-1!=e&&e!=t.length-1?this.setValue(t[e+1]):this.setValue(t[0]),this}}const Pe=t=>new Fe(t);class Be extends ve{constructor(t=""){super(),this.element=document.createElement("option"),t instanceof Object&&"value"in t?(this.setValue(t.value),this.setText(t?.text??t.value)):this.setValue(t)}setValue(t=""){return this.element.value=t,this}setText(t=""){return t&&(this.element.textContent=t),this}}class ze extends ve{constructor(){super(),this.element=document.createElement("textarea"),this.render()}get value(){return this.element.textContent}}class Ne extends ve{constructor(t="",e){super(),this.element=document.createElement("input"),Object.assign(this.events,{input:null}),this.setValue(t),e&&this.linkDatalist(e),this.render()}onInput(...t){return this.events.input||(this.events.input=ge(this)),this.events.input.onInput(...t),this}onChange(...t){return this.events.input||(this.events.input=ge(this)),this.events.input.onChange(...t),this}linkDatalist(t){let e;if(t instanceof Je)e=t.Id;else if(t instanceof Array){const s=new Je(...t);e=s.Id,console.log(s)}else e=t;return this.element.setAttribute("list",e),this}get value(){return this.element.value}_setType(t){return this.element.type=t,this}setValue(t=""){return this.element.value=t,this}useState(t){return this.setValue(t),[{value:this.value},t=>this.setValue(t)]}setPlaceholder(t){return t&&(this.element.placeholder=t),this}get isValide(){return this.element.checkValidity()}setRequired(t=!0){return this.element.required=t,this}select(){return this.element.select(),this}copy(){return this.element.select(),document.execCommand("copy"),this}cut(){return this.element.select(),document.execCommand("cut"),this}accept(t){return this.element.accept=t,this}}class Le extends Ne{constructor(){super(),this._setType("search"),this.Length=0}onsearch(t){return this.element.addEventListener("search",(()=>t())),this}connect(...t){return this}displayLength(t){return this.element.addEventListener("keyup",(()=>t.setValue(this.Length))),this}}class He extends Ne{constructor(t,e,s=1){super(),this._setType("number"),this.setMin(t).setMax(e).setStep(s),this.render()}get value(){return+this.element.value}setMin(t){return this.element.min=t,this}setMax(t){return this.element.max=t,this}setStep(t){return this.element.step=t,this}}class Ue extends He{constructor(t=0,e=0,s=10,r=1){super(),this._setType("range"),this.setMin(e).setMax(s).setValue(t).setStep(r),this.render()}}class qe extends Ne{constructor(){super(),this._setType("color"),this.background(this.value),this.render(),this.onInput((()=>this.background(this.value)))}}class We extends Ne{constructor(){super(),this._setType("password"),this.render()}}class Xe extends Ne{constructor(){super(),this._setType("email"),this.render()}}class $e extends Ne{constructor(){super(),this._setType("time"),this.render()}}class Ye extends Ne{constructor(){super(),this._setType("date"),this.render()}}class Ze extends Ne{constructor(){super(),this._setType("datetime-local"),this.render()}}class Ge extends Ne{constructor(){super(),this._setType("checkbox"),this.cursor("pointer")}get checked(){return this.element.checked}check(t=!0){return this.element.checked=t,this}color(t){return this.element.style.accentColor=t,this}}class Qe extends Ne{constructor(){super(),this._setType("radio"),this.cursor("pointer")}get checked(){return this.element.checked}check(t=!0){return this.element.checked=t,this}color(t){return this.element.style.accentColor=t,this}}class Ke extends ve{constructor(t="File"){super(),this._aux_element=Pe(t).setTarget(this.Target),this.element=document.createElement("input"),this.element.setAttribute("type","file"),this.element.setAttribute("accept","image"),this._aux_element.onClick((()=>this.element.click())),this.element.onChange=this.handleImage.bind(this)}handleImage(t){const e=new FileReader,s=new Image;e.onload=function(t){s.src=t.target.result,console.log(s.src)},e.readAsDataURL(t.target.files[0]),this.img=s}get value(){return this.img}render(t=!0){return t?this.Target.appendChild(this._aux_element.element):this.remove(),this}remove(){return this.Target.children.length&&this.Target.removeChild(this._aux_element.element),this}}class Je extends ve{constructor(...t){super(),this.element=document.createElement("datalist"),this.addOptions(...t).setId("ziko-datalist-id"+crypto.randomUUID().slice(8,18)),this.render()}addOptions(...t){return t.map((t=>this.append(new Be(t)))),this}}class ts extends ve{constructor(){super(),this.element=document.createElement("select"),this.render()}addOptions(...t){return t.map((t=>this.append(new Be(t)))),this}}class es extends ve{constructor(t="",e="100%",s="50vh"){super(),this.element=document.createElement("video"),"VIDEO"===t.nodeName?this.element.setAttribute("src",t.src):this.element.setAttribute("src",t),"number"==typeof e&&(e+="%"),"number"==typeof s&&(s+="%"),this.style({width:e,height:s}),this.render()}controls(t=!0){return this.element.controls=t,this}play(){return this.element.play(),this}pause(){return this.element.pause(),this}poster(t=""){return this.element.poster=t,this}PIP(t){return this.element.requestPictureInPicture(t),this}}class ss extends es{constructor(){super(),this.element.setAttribute("src",""),this.constraints={audio:!0,video:{width:1280,height:720}}}start(){return navigator.mediaDevices.getUserMedia(this.constraints).then((t=>{this.element.srcObject=t,this.element.onloadedmetadata=()=>{this.element.play()}})).catch((function(t){console.log(t.name+": "+t.message)})),this}}class rs extends ve{constructor(t,e,s){super(),this.element=document.createElement("img"),this.value=t,"IMG"===t.nodeName?this.element.setAttribute("src",t.src):this.element.setAttribute("src",t),"number"==typeof e&&(e+="%"),"number"==typeof s&&(s+="%"),this.style({border:"1px solid black",width:e,height:s}),this.render()}updateSrc(t){return this.value=t,this.element.src=t,this}toggleSrc(...t){let e=(t=t.map((t=>""+t))).indexOf(""+this.value);return-1!=e&&e!=t.length-1?this.updateSrc(t[e+1]):this.updateSrc(t[0]),this}alt(t){return this.element.alt=t,this}}class ns extends ve{constructor(t){super(),this.element=document.createElement("audio"),this.element.setAttribute("src",t),this.render(),this.controls()}controls(t=!0){return this.element.controls=t,this}play(){return this.element.play(),this}pause(){return this.element.pause(),this}}class is extends ve{constructor(t,e){super(),this.element=document.createElement("figure"),this.img=t.width("100%").element,this.caption=document.createElement("figcaption"),this.caption.append(e.element),this.element.append(this.img),this.element.append(this.caption),this.render()}}const as=(t,e,s)=>new rs(t,e,s),os=t=>new ns(t),hs=(t,e)=>new is(t,e),ls=(t,e,s)=>new es(t,e,s);function cs(t){return 1==t?this.style({flexDirection:"column"}):-1==t&&this.style({flexDirection:"column-reverse"}),this}function us(t){return 1==t?this.style({flexDirection:"row"}):-1==t&&this.style({flexDirection:"row-reverse"}),this}function ms(t){return"number"==typeof t&&(t=["flex-start","center","flex-end"][t+1]),t}function ps(t){return ms(-t)}class ds extends ve{constructor(t="div",e="50vw",s="50vh"){super(),this.element=document.createElement(t),this.direction="cols","number"==typeof e&&(e+="%"),"number"==typeof s&&(s+="%"),this.style({border:"1px solid black",width:e,height:s}),this.style({display:"flex"}),this.render()}resp(t,e=!0){return this.wrap(e),this.element.clientWidth<t?this.vertical():this.horizontal(),this}setSpaceAround(){return this.style({justifyContent:"space-around"}),this}setSpaceBetween(){return this.style({justifyContent:"space-between"}),this}setBaseline(){return this.style({alignItems:"baseline"}),this}gap(t){return"row"===this.direction?this.style({columnGap:t}):"column"===this.direction&&this.style({rowGap:t}),this}wrap(t="wrap"){return this.style({flexWrap:"string"==typeof t?t:["no-wrap","wrap","wrap-reverse"][+t]}),this}_justifyContent(t="center"){return this.style({justifyContent:t}),this}vertical(t,e,s=1){return console.log(111111111111),cs.call(this,s),this.style({alignItems:"number"==typeof t?ms.call(this,t):t,justifyContent:"number"==typeof e?ps.call(this,e):e}),this}horizontal(t,e,s=1){return us.call(this,s),this.style({alignItems:"number"==typeof e?ps.call(this,e):e,justifyContent:"number"==typeof t?ms.call(this,t):t}),this}show(){return this.isHidden=!1,this.style({display:"flex"}),this}}class fs extends ds{constructor(...t){super(),this.style({position:"relative",overflow:"hidden",touchAction:"none",userSelect:"none"}),this.horizontal("space-around",0),this.track=Section(...t).style({display:"inline-flex"}),this.track.size(100*this.track.children.length+"vw"),this.track.setTarget(this),this.track.items.map((t=>t.style({pointerEvents:"none",margin:"auto 10px"}))),this.x0=null,this.tx=0,this.onPtrMove((t=>{if(t.isDown){let e=t.event.pageX-this.x0;this.track.translateX(this.tx+e,0)}})),this.onPtrDown((t=>{console.log(t.event),this.x0=t.event.pageX;const e=window.getComputedStyle(this.track.element).getPropertyValue("transform");"none"!==e&&(this.tx=+e.split(",")[4])})),this.onPtrUp((t=>console.log(t.isDown))),this.onPtrLeave((t=>{}))}}class gs extends ds{constructor(){super()}addSection(){const t=Section().style({width:"80%",height:"50px",margin:"5px 0px",border:"1px red solid"});return this.append(t),this}}class ys extends ve{constructor(t="div",e="50vw",s="50vh"){super(),this.element=document.createElement(t),this.direction="cols","number"==typeof e&&(e+="%"),"number"==typeof s&&(s+="%"),this.style({border:"1px solid black",width:e,height:s}),this.style({display:"grid"}),this.render()}columns(t){let e="";for(let s=0;s<t;s++)e=e.concat(" auto");return this.#n(e),this}#n(t="auto auto"){return this.style({gridTemplateColumns:t}),this}gap(t=10,e=t){return"number"==typeof t&&(t+="px"),"number"==typeof e&&(e+="px"),this.style({gridColumnGap:t,gridRowGap:e}),this}}class xs extends ve{constructor(){super(),this.element=document.createElement("main"),this.render()}}class bs extends ve{constructor(){super(),this.element=document.createElement("header"),this.render()}}class ws extends ve{constructor(){super(),this.element=document.createElement("nav"),this.render()}}class vs extends ve{constructor(){super(),this.element=document.createElement("section"),this.style({position:"relative"}),this.render()}}class ks extends ve{constructor(){super(),this.element=document.createElement("article"),this.render()}}class Ms extends ve{constructor(){super(),this.element=document.createElement("aside"),this.render()}}class Es extends ve{constructor(){super(),this.element=document.createElement("footer"),this.render()}}class As extends ve{constructor(...t){super(),this.element=document.createElement("Tr"),this.append(...t)}}class Cs extends ve{constructor(...t){super(),this.element=document.createElement("Td"),this.append(...t)}}class Ts extends ve{constructor(...t){super(),this.element=document.createElement("Tbody"),this.append(...t)}}class Os extends ve{constructor(t){super(),this.element=document.createElement("Caption"),this.append(t)}}const _s=(...t)=>(t=t.map((t=>(t instanceof ve||(t=Ee(t)),t))),new Cs(...t)),Is=t=>new Os(t),Vs=t=>{var e=new Array(t.rows).fill(null).map((()=>((...t)=>new As(...t))())),s=t.arr.map((t=>t.map((()=>null))));for(let r=0;r<s.length;r++)for(let n=0;n<s[0].length;n++)s[r][n]=_s(t.arr[r][n]),e[r].append(s[r][n]);return e};class Ss extends ve{constructor(t=B(0,0)){super(),this.element=document.createElement("table"),this.fromMatrix(t),this.structure={caption:null,head:null,body:0,foot:null},this.render()}setCaption(t){return this.tCaption=Is(t),this.append(this.tCaption),this}removeCaption(){return this.removeItem(...this.items.filter((t=>t instanceof Os))),this}setHeader(...t){return this.tHead=((...t)=>new(t=t.map((t=>(t instanceof ve||(t=_s(t)),t))))(...UI))(...t),this.append(this.tHead),this}removeHeader(){return this.removeItem(...this.items.filter((t=>t instanceof Os))),this}setFooter(t){return this.tCaption=Is(t),this.append(this.tCaption),this}removeFooter(){return this.removeItem(...this.items.filter((t=>t instanceof Os))),this}fromMatrix(t){return this.bodyMatrix=t instanceof Array?B(t):t,this?.tbody?.items?.length&&this.tbody.remove(),this.tbody=((...t)=>new Ts(...t))(),this.append(this.tbody),this.tbody.append(...Vs(this.bodyMatrix)),this}transpose(){return this.fromMatrix(this.bodyMatrix.T),this}hstack(t){return t instanceof Ss&&(t=t.bodyMatrix),this.fromMatrix(this.bodyMatrix.clone.hstack(t)),this}vstack(t){return t instanceof Ss&&(t=t.bodyMatrix),this.fromMatrix(this.bodyMatrix.clone.vstack(t)),this}slice(t=0,e=0,s=this.bodyMatrix.rows-1,r=this.bodyMatrix.cols-1){return this.fromMatrix(this.bodyMatrix.slice(t,e,s,r)),this}sortByCols(t,e={type:"num",order:"asc"}){return this.fromMatrix(this.bodyMatrix.clone.sortTable(t,e)),this}sortByRows(t,e={type:"num",order:"asc"}){return this.fromMatrix(this.bodyMatrix.T.clone.sortTable(t,e).T),this}filterByRows(t){return this.fromMatrix(this.bodyMatrix.clone.filterByRows(t)),this}filterByCols(t){return this.fromMatrix(this.bodyMatrix.clone.filterByCols(t)),this}}const Ds={ZikoHtml:Ve,text:Ee,p:(...t)=>{const e=(new Ae).append(...t);return ke.p.push(e),e.cache.order=ke.p.length,e},h1:(t="")=>{const e=new Ce(1,t);return ke.h1.push(e),e.cache.order=ke.text.length,e},h2:(t="")=>{const e=new Ce(2,t);return ke.h2.push(e),e.cache.order=ke.text.length,e},h3:(t="")=>{const e=new Ce(3,t);return ke.h3.push(e),e.cache.order=ke.text.length,e},h4:(t="")=>{const e=new Ce(4,t);return ke.h4.push(e),e.cache.order=ke.text.length,e},h5:(t="")=>{const e=new Ce(5,t);return ke.h5.push(e),e.cache.order=ke.text.length,e},h6:(t="")=>{const e=new Ce(6,t);return ke.h6.push(e),e.cache.order=ke.text.length,e},btn:Pe,br:()=>new Oe,hr:()=>new _e,brs:(t=1)=>new Array(t).fill(new Oe),hrs:(t=1)=>new Array(t).fill(new _e),link:(t,...e)=>new Ie(t).append(...e),ol:(...t)=>new je(...t),ul:(...t)=>new Re(...t),input:(t,e)=>{if(t instanceof Object){const{datalist:e,placeholder:s}=t;return t=t.value??"",new Ne(t,e).setPlaceholder(s)}return new Ne(t,e)},search:(...t)=>(new Le).connect(...t),slider:(t,e,s,r)=>{if(t instanceof Object){const{min:e=0,max:s=10,step:r=1}=t;return new Ue(t=t?.value??5,e,s,r)}return new Ue(t,e,s,r)},checkbox:()=>new Ge,radio:()=>new Qe,datalist:(...t)=>new Je(...t),inputNumber:(t,e,s)=>{if(t instanceof Object){const{value:e,max:s=10,step:r=1,placeholder:n=""}=t;return new Ue(t=t?.min??0,s,r).setValue(e).setPlaceholder(n)}return new He(t,e,s)},inputColor:()=>new qe,inputDate:()=>new Ye,inputDateTime:()=>new Ze,inputEmail:()=>new Xe,inputImage:t=>new Ke(t),inputPassword:()=>new We,inputTime:()=>new $e,select:()=>new ts,textarea:()=>new ze,inputCamera:()=>new ss,image:as,video:ls,audio:os,figure:hs,Flex:(...t)=>new ds("div").append(...t),Carousel:(...t)=>new fs(...t),Grid:(...t)=>new ys("div").append(...t),Header:(...t)=>(new bs).append(...t),FlexHeader:(...t)=>new ds("header").append(...t),Main:(...t)=>(new xs).append(...t),FlexMain:(...t)=>new ds("main").append(...t),Section:(...t)=>(new vs).append(...t),FlexSection:(...t)=>new ds("section").append(...t),Article:(...t)=>(new ks).append(...t),FlexArticle:(...t)=>new ds("article").append(...t),Aside:(...t)=>(new Ms).append(...t),FlexAside:(...t)=>new ds("aside").append(...t),Nav:(...t)=>(new ws).append(...t),FlexNav:(...t)=>new ds("nav").append(...t),Footer:(...t)=>(new Es).append(...t),FlexFooter:(...t)=>new ds("footer").append(...t),Table:t=>new Ss(t),Notebook:()=>new gs,ExtractAll:function(){for(let t=0;t<Object.keys(this).length;t++)globalThis[Object.keys(this)[t]]=Object.values(this)[t];return this},RemoveAll:function(){for(let t=0;t<Object.keys(this).length;t++)delete globalThis[Object.keys(this)[t]];return this}};class js{constructor(t,{fps:e,step:s,t:r=[0,null],start:n=!0}={}){this.callback=t,this.cache={isRunning:!1,animationId:null,startTime:null,step:s,fps:e,t:r,started:n},this.adjust(),this.i=0}adjust(){if(this.cache.step&&this.cache.fps&&(console.warn(`Fps will be adjusted from ${this.cache.fps} to ${1e3/this.cache.step} to ensure a smoother animation`),this.cache.fps=1e3/this.cache.step),this.cache.started){const t=this.cache.t;t[0]?this.startAfter(t[0]):this.start(),t[1]&&this.stopAfter(t[1])}return this}get TIME_STEP(){return this.cache.step?this.cache.step:1e3/this.cache.fps}start(){return this.cache.isRunning||(this.i=0,this.cache.isRunning=!0,this.cache.startTime=Date.now(),this.animate()),this}pause(){return this.cache.isRunning&&(clearTimeout(this.cache.animationId),this.cache.isRunning=!1),this}stop(){return this.pause(),this.i=0,this}resume(){return this.cache.isRunning=!0,this.animate(),this}startAfter(t=1e3){return setTimeout(this.start.bind(this),t),this}stopAfter(t=1e3){return setTimeout(this.stop.bind(this),t),this}animate=()=>{if(this.cache.isRunning){const t=Date.now(),e=t-this.cache.startTime;e>this.TIME_STEP&&(this.callback(this),this.i++,this.cache.startTime=t-e%this.TIME_STEP),this.cache.animationId=setTimeout(this.animate,0)}}}const Rs=(t,e)=>new js(t,e),Fs={Linear:function(t){return t},InSin:t=>1-Math.cos(t*Math.PI/2),OutSin:t=>Math.sin(t*Math.PI/2),InOutSin:t=>-(Math.cos(Math.PI*t)-1)/2,InQuad:t=>t**2,OutQuad:t=>1-Math.pow(1-t,2),InOutQuad:t=>t<.5?2*Math.pow(t,2):1-Math.pow(-2*t+2,2)/2,InCubic:t=>t**3,OutCubic:t=>1-Math.pow(1-t,3),InOutCubic:t=>t<.5?4*Math.pow(t,3):1-Math.pow(-2*t+2,3)/2,InQuart:t=>t**4,OutQuart:t=>1-Math.pow(1-t,4),InOutQuart:t=>t<.5?8*Math.pow(t,4):1-Math.pow(-2*t+2,4)/2,InQuint:t=>t**5,OutQuint:t=>1-Math.pow(1-t,5),InOutQuint:t=>t<.5?16*Math.pow(t,5):1-Math.pow(-2*t+2,5)/2,InExpo:t=>0===t?0:Math.pow(2,10*t-10),OutExpo:t=>1===t?1:1-Math.pow(2,-10*t),InOutExpo:t=>0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,InCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),OutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),InOutCic:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,Arc:t=>1-Math.sin(Math.acos(t)),Back:t=>Math.pow(t,2)*(2*t-1),Elastic:t=>-2*Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*t/3*t),InBack(t){const e=1.70158;return 2.70158*Math.pow(t,3)-e*t**2},OutBack(t){const e=1.70158;return 1+2.70158*Math.pow(t-1,3)+e*Math.pow(t-1,2)},InOutBack(t){const e=2.5949095;return t<.5?Math.pow(2*t,2)*(7.189819*t-e)/2:(Math.pow(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2},InElastic(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*e)},OutElastic(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1},InOutElastic(t){const e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1},InBounce:t=>1-Fs.OutBounce(1-t),OutBounce(t){const e=7.5625,s=2.75;return t<1/s?e*t*t:t<2/s?e*(t-=1.5/s)*t+.75:t<2.5/s?e*(t-=2.25/s)*t+.9375:e*(t-=2.625/s)*t+.984375},InOutBounce:t=>t<.5?(1-Fs.OutBounce(1-2*t))/2:(1+Fs.OutBounce(2*t-1))/2},Ps=(t,e=1e3)=>(...s)=>setTimeout((()=>t(...s)),e),Bs=(t,e)=>{let s=0;return(...r)=>{const n=(new Date).getTime();n-s<e||(s=n,t(...r))}},zs=t=>{const e=Date.now(),s=performance.memory.usedJSHeapSize,r=t();return{elapsedTime:Date.now()-e,usedMemory:performance.memory.usedJSHeapSize-s,result:r}},Ns=t=>new Promise((e=>{if(t.element)return e(t.element);const s=new MutationObserver((()=>{t.element&&(e(t.element),s.disconnect())}));s.observe(document.body,{childList:!0,subtree:!0})})),Ls=(t,e=2e3)=>{const s=Date.now();for(;Date.now()-s<e;)if(t.element)return t.element},Hs=t=>new Promise((e=>setTimeout(e,t))),Us=t=>{console.time("timeTaken");const e=t();return console.timeEnd("timeTaken"),e};class qs{constructor(t,e){this.cache={isRunning:!1,AnimationId:null,ease:e},this.t=0,this.tx=0,this.ty=0,this.i=0,this.step=50,this.duration=3e3,this.callback=t}#i(){this.t+=this.step,this.i++,this.tx=nt(this.t,0,this.duration,0,1),this.ty=this.cache.ease(this.tx),this.callback(this),this.t>=this.duration&&(clearInterval(this.cache.AnimationId),this.cache.isRunning=!1)}start(){return this.cache.isRunning=!0,this.cache.AnimationId=setInterval(this.#i.bind(this),this.step),this}stop(){}clear(){}stream(){}}const Ws=(t,e=Fs.Linear)=>new qs(t,e),Xs={wait:Hs,timeTaken:Us,throttle:Bs,debounce:Ps,Ease:Fs,time_memory_Taken:zs,loop:Rs,animation:Ws,waitForUIElm:Ns,waitForUIElmSync:Ls,ExtractAll:function(){for(let t=0;t<Object.keys(this).length;t++)globalThis[Object.keys(this)[t]]=Object.values(this)[t];return this},RemoveAll:function(){for(let t=0;t<Object.keys(this).length;t++)delete globalThis[Object.keys(this)[t]];return this}};function $s(t){const e={type:t.nodeName,attributes:{},children:[]};for(let s=0;s<t.attributes.length;s++){const r=t.attributes[s];e.attributes[r.name]=r.value}for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];r.nodeType===Node.ELEMENT_NODE?e.children.push($s(r)):r.nodeType===Node.TEXT_NODE&&(e.text=r.textContent.trim())}return e}const Ys={preload:t=>{const e=new XMLHttpRequest;if(e.open("GET",t,!1),e.send(),200===e.status)return e.responseText;throw new Error(`Failed to fetch data from ${t}. Status: ${e.status}`)},parseXML:function(t){return $s((new DOMParser).parseFromString(t,"text/xml").documentElement)},ExtractAll:function(){for(let t=0;t<Object.keys(this).length;t++)globalThis[Object.keys(this)[t]]=Object.values(this)[t];return this},RemoveAll:function(){for(let t=0;t<Object.keys(this).length;t++)delete globalThis[Object.keys(this)[t]];return this}};class Zs{color({stroke:t,fill:e}){return this.element.setAttribute("stroke",t),this.element.setAttribute("fill",e),this}fill(t="none"){return this.element.setAttribute("fill",t),this}stroke(t="none",e){return this.element.setAttribute("stroke",t),e&&this.strokeWidth(e),this}strokeWidth(t=1){return this.element.setAttribute("stroke-width",t),this}opacity(t=1){return this.element.setAttribute("opacity",t),this}}class Gs extends Zs{constructor(t,e,s,r,n=!0){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.setX(t).setY(e).width(s).height(r),this.rx=this.x+this.w/2,this.ty=this.y+this.h/2}setX(t){return this.element.x.baseVal.value=t,this.x=t,this}setY(t){return this.element.y.baseVal.value=t,this.y=t,this}r(t,e){return this.rx=t,this.ry=e,this.setX(this.rx-this.w/2),this.setY(this.ry-this.h/2),this}width(t){return this.element.width.baseVal.value=t,this.w=t,this}height(t){return this.element.height.baseVal.value=t,this.h=t,this}}const Qs=(t,e,s,r,n)=>new Gs(t,e,s,r,n);class Ks extends Zs{constructor(t,e,s){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.cx(t).cy(e).r(s)}cx(t){return this.element.cx.baseVal.value=t,this}cy(t){return this.element.cy.baseVal.value=t,this}r(t){return this.element.r.baseVal.value=t,this}get R(){return this.element.r.baseVal.value}get Cx(){return this.element.cx.baseVal.value}get Cy(){return this.element.cy.baseVal.value}}const Js=(t,e,s)=>new Ks(t,e,s);class tr extends Zs{constructor(t,e,s,r){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","ellipse"),this.cx(t).cy(e).rx(s).ry(r)}cx(t){return this.element.cx.baseVal.value=t,this}cy(t){return this.element.cy.baseVal.value=t,this}rx(t){return this.element.rx.baseVal.value=t,this}ry(t){return this.element.ry.baseVal.value=t,this}}const er=(t,e,s,r)=>new tr(t,e,s,r);class sr extends Zs{constructor(t,e,s,r){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","line"),this.x1(t).y1(e).x2(s).y2(r).stroke("black")}x1(t){return this.element.x1.baseVal.value=t,this}y1(t){return this.element.y1.baseVal.value=t,this}x2(t){return this.element.x2.baseVal.value=t,this}y2(t){return this.element.y2.baseVal.value=t,this}}const rr=(t,e,s,r)=>new sr(t,e,s,r);class nr extends Zs{constructor(t=[],e=[]){super(),this.X=t,this.Y=e,this.element=document.createElementNS("http://www.w3.org/2000/svg","polygon"),this.element.setAttribute("points","")}addPoint(t,e){let s=this.element.parentElement.createSVGPoint();return s.x=t,s.y=e,this.element.points.appendItem(s),this}addPoints(t,e){for(let s=0;s<t.length;s++){let r=this.element.parentElement.createSVGPoint();r.x=t[s],r.y=e[s],this.element.points.appendItem(r)}return this}}const ir=(t,e)=>new nr(t,e);class ar extends Zs{constructor(t="",e="100%",s="100%",r=0,n=0){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","image"),this.setSrc(t).width(e).height(s).x(r).y(n)}x(t){return this.element.x.baseVal.value=t,this}y(t){return this.element.y.baseVal.value=t,this}width(t){return this.element.setAttribute("width",t),this}height(t){return this.element.setAttribute("height",t),this}setSrc(t=""){return this.element.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),this}}const or=(t,e,s,r,n)=>new ar(t,e,s,r,n);class hr extends Zs{constructor(t,e,s){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","text"),this.setText(t),this.x(e).y(s)}x(t){return this.element.setAttribute("x",t),this}y(t){return this.element.setAttribute("y",t),this}setText(t=""){return this.element.textContent=t,this}}const lr=(t,e,s)=>new hr(t,e,s);class cr extends Zs{constructor(...t){super(),this.items=[],this.element=document.createElementNS("http://www.w3.org/2000/svg","g"),this.add(...t)}add(...t){for(let e=0;e<t.length;e++)this.element.appendChild(t[e].element),this.items.push(t[e]);return 1===t.length?t[0]:t}remove(...t){for(let e=0;e<t.length;e++)this.element.removeChild(t[e].element),this.items=this.items.filter((e=>!t));return this}}const ur=(...t)=>new cr(...t);class mr extends ve{constructor(t=360,e=300){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.setAttribute("width",t),this.setAttribute("height",e),this.style({border:"1px black solid"}),this.render()}view(t,e,s,r){let n=Math.abs(s-t),i=Math.abs(r-e);return this.element.setAttribute("viewBox",[t,e,n,i].join(" ")),this}add(...t){for(let e=0;e<t.length;e++)this.element.appendChild(t[e].element),this.items.push(t[e]);return 1===t.length?t[0]:t}remove(...t){for(let e=0;e<t.length;e++)this.element.removeChild(t[e].element),this.items=this.items.filter((e=>!t));return this}text(t,e,s){let r=lr(t,e,s);return this.element.appendChild(r.element),r.x(e-r.element.getComputedTextLength()/2),r}rect(t,e,s,r){let n=Qs(t,e,s,r);return this.add(n),n}line(t,e,s,r){let n=rr(t,e,s,r);return this.element.appendChild(n.element),n}circle(t,e,s){let r=Js(t,e,s);return this.element.appendChild(r.element),r}ellipse(t,e,s,r){let n=er(t,e,s,r);return this.element.appendChild(n.element),n}polygon(t,e){let s=ir(t,e);return this.element.appendChild(s.element),s.addPoints(t,e),s}image(t,e,s,r,n){let i=or(t,e,s,r,n);return this.element.appendChild(i.element),i}mask(){}toString(){return(new XMLSerializer).serializeToString(this.element)}btoa(){return btoa(this.toString())}toImg(){return"data:image/svg+xml;base64,"+this.btoa()}toImg2(){return"data:image/svg+xml;charset=utf8,"+this.toString().replaceAll("<","%3C").replaceAll(">","%3E").replaceAll("#","%23").replaceAll('"',"'")}}const pr=(t,e)=>new mr(t,e);class dr extends ve{constructor(t,e){super(),this.element=document.createElement("canvas"),this.ctx=this.element.getContext("2d"),this.style({border:"1px red solid"}),this.transformMatrix=new P([[1,0,0],[0,1,0],[0,0,1]]),this.axisMatrix=new P([[-10,-10],[10,10]]),this.render(),this.WatchSize((()=>Paint.adjust()))}get Width(){return this.element.width}get Height(){return this.element.height}get Xmin(){return this.axisMatrix[0][0]}get Ymin(){return this.axisMatrix[0][1]}get Xmax(){return this.axisMatrix[1][0]}get Ymax(){return this.axisMatrix[1][1]}get ImageData(){return this.ctx.getImageData(0,0,c.Width,c.Height)}draw(t=!0){return t?(this.clear(),this.items.forEach((t=>{t.parent=this,t.draw(this.ctx)}))):(this.items.at(-1).parent=this,this.items.at(-1).draw(this.ctx)),this.maintain(),this}applyTransformMatrix(){return this.ctx.setTransform(this.transformMatrix[0][0],this.transformMatrix[1][0],this.transformMatrix[0][1],this.transformMatrix[1][1],this.transformMatrix[0][2],this.transformMatrix[1][2]),this}size(t,e){return this.style({width:t,height:e}),this.lineWidth(),this.view(this.axisMatrix[0][0],this.axisMatrix[0][1],this.axisMatrix[1][0],this.axisMatrix[1][1]),this}adjust(){return this.element.width=this.element.getBoundingClientRect().width,this.element.height=this.element.getBoundingClientRect().height,this.view(this.axisMatrix[0][0],this.axisMatrix[0][1],this.axisMatrix[1][0],this.axisMatrix[1][1]),this}view(t,e,s,r){return this.transformMatrix[0][0]=this.Width/(s-t),this.transformMatrix[1][1]=-this.Height/(r-e),this.transformMatrix[0][2]=this.Width/2,this.transformMatrix[1][2]=this.Height/2,this.axisMatrix=new P([[t,e],[s,r]]),this.applyTransformMatrix(),this.clear(),this.lineWidth(1),this.draw(),this}reset(){return this.ctx.setTransform(1,0,0,0,0,0),this}append(t){return this.items.push(t),this.draw(!1),this}background(t){this.ctx.fillStyle=t,this.ctx.setTransform(1,0,0,1,0,0),this.ctx.fillRect(0,0,this.Width,this.Height),this.applyTransformMatrix(),this.draw()}lineWidth(t){return this.ctx.lineWidth=t/this.transformMatrix[0][0],this}ImageData(t=0,e=0,s=this.Width,r=this.Height){return this.ctx.getImageData(t,e,s,r)}clear(){return this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.Width,this.Height),this.applyTransformMatrix(),this}clone(){console.log(this.Width);const t=new dr;return t.items=this.items,t.transformMatrix=this.transformMatrix,t.axisMatrix=this.axisMatrix,Object.assign(t.cache,{...this.cache}),this.size(element.style.width,element.style.width),this.applyTransformMatrix(),this.draw(),this.adjust(),t}toImage(){return this.img=document.createElement("img"),this.img.src=this.element.toDataURL("image/png"),this}toBlob(){this.element.toBlob((function(t){var e=document.createElement("img"),s=URL.createObjectURL(t);e.onload=function(){URL.revokeObjectURL(s)},e.src=s,console.log(e)}))}zoomIn(){}zoomOut(){}undo(t){}redo(t){}stream(){}}const fr=(t,e)=>new dr(t,e);class gr{constructor(t,e){this.parent=null,this.position={x:t,y:e},this.cache={interact:" avoid redraw",config:{draggable:!1,selected:!1,highlighted:!1,rendered:!1},style:{normal:{strokeEnabled:!0,fillEnabled:!1,strokeColor:"#111111",fillColor:"#777777"},highlighted:{strokeEnabled:!0,fillEnabled:!1,strokeColor:null,fillColor:null}}},this.history={position:[],styles:[]},this.render()}get px(){return(this.position.x??0)+(this.parent?.position?.x??0)}get py(){return(this.position.y??0)+(this.parent?.position?.y??0)}isIntersectedWith(){}isInStroke(t,e){let s;return this.parent&&(this.parent.ctx.setTransform(1,0,0,1,0,0),s=this.parent.ctx.isPointInStroke(this.path,t,e),this.parent.applyTransformMatrix()),s}isInPath(t,e){let s;return this.parent&&(this.parent.ctx.setTransform(1,0,0,1,0,0),s=this.parent.ctx.isPointInPath(this.path,t,e),this.parent.applyTransformMatrix()),s}posX(t){return this.position.x=t,this.parent&&this.parent.draw(),this}posY(t){return this.position.y=t,this.parent&&this.parent.draw(),this}color({stroke:t=this.cache.style.normal.strokeColor,fill:e=this.cache.style.normal.fillColor}={stroke:t,fill:e}){return this.cache.style.normal.strokeColor=t,this.cache.style.normal.fillColor=e,this.parent&&this.parent.draw(),this}translate(t=0,e=0){this.position.x+=t,this.position.y+=e,this.parent&&this.parent.draw()}applyNormalStyle(t){return t.strokeStyle=this.cache.style.normal.strokeColor,t.fillStyle=this.cache.style.normal.fillColor,this}applyHighlightedStyle(t){return t.strokeStyle=this.cache.style.highlighted.strokeColor,t.fillStyle=this.cache.style.highlighted.fillColor,this}stroke(t=this.cache.style.normal.strokeColor,e=!0){return this.cache.style.normal.strokeEnabled=e,this.cache.style.normal.strokeColor=t,this.parent&&this.parent.draw(),this}fill(t=this.cache.style.normal.fillColor,e=!0){return this.cache.style.normal.fillEnabled=e,this.cache.style.normal.filleColor=t,this.parent&&this.parent.draw(),this}render(t=!0){return this.cache.config.rendered=t,this}}class yr extends gr{constructor(t,e,s,r){super(t,e),this.r=s,this.angle=r,this.path=null}draw(t){if(this.cache.config.rendered){t.save(),this.applyNormalStyle(t),t.beginPath(),this.path=new Path2D,this.path.arc(this.px,this.py,this.r,0,this.angle);const{strokeEnabled:e,fillEnabled:s}=this.cache.style.normal;e&&t.stroke(this.path),s&&t.fill(this.path),t.closePath(),t.restore()}return this}radius(t){return this.r=t,this.parent&&this.parent.draw(),this}}const xr=(t,e,s,r)=>new yr(t,e,s,r),br=(t,e,s)=>new yr(t,e,s,2*Math.PI);class wr extends gr{constructor(t,e){super(),this.pointsMatrix=null,this.path=new Path2D,this.fromXY(t,e)}get points(){return this.pointsMatrix.T.arr}draw(t){if(this.cache.config.rendered){t.save(),this.applyNormalStyle(t),t.beginPath(),this.path.moveTo(this.points[1][0]+this._x,this.points[1][1]+this._y);for(let t=1;t<this.points.length;t++)this.path.lineTo(this.points[t][0]+this._x,this.points[t][1]+this._y);t.stroke(this.path),t.restore()}return this}fromXY(t,e){return this.pointsMatrix=B([t,e]),this}push(t,e){return this.pointsMatrix.hstack(B([t,e])),this.parent&&this.parent.draw(),this}isIn(t,e){let s;return this.parent&&(this.parent.ctx.setTransform(1,0,0,1,0,0),s=this.parent.ctx.isPointInPath(this.path,t,e),this.parent.applyTransformMatrix()),s}}const vr=(t=[],e=[])=>new wr(t,e);class kr extends gr{constructor(t,e,s,r){super(),this.x0=t,this.x1=s,this.y0=e,this.y1=r,delete this.fill}draw(t){return this.cache.config.rendered&&(t.save(),this.applyNormalStyle(t),t.beginPath(),t.moveTo(this.x0+this._x,this.y0+this._y_),t.lineTo(this.x1+this._x,this.y1+this._y),t.stroke(),this.cache.style.normal.strokeEnabled&&t.stroke(),t.restore()),this}}const Mr=(t,e,s,r)=>new kr(t,e,s,r);class Er extends gr{constructor(t,e,s,r){super(t,e),this.w=s,this.h=r,this.path=new Path2D}draw(t){if(this.cache.config.rendered){t.save(),this.applyNormalStyle(t),t.beginPath(),this.path.rect(this._x,this._y,this.w,this.h);const{strokeEnabled:e,fillEnabled:s}=this.cache.style.normal;e&&t.stroke(this.path),s&&t.fill(this.path),t.closePath(),t.restore()}return this}width(t){return this.w=t,this.parent&&this.parent.draw(),this}height(t){return this.h=t,this.parent&&this.parent.draw(),this}}const Ar=(t,e,s,r)=>new Er(t,e,s,r),Cr={Svg:pr,ZikoUISvg:mr,svgCircle:Js,svgEllipse:er,svgImage:or,svgLine:rr,svgPolygon:ir,svgRect:Qs,svgText:lr,svgGroupe:ur,Canvas:fr,canvasArc:xr,canvasCircle:br,canvasPoints:vr,canvasLine:Mr,canvasRect:Ar,ExtractAll:function(){for(let t=0;t<Object.keys(this).length;t++)globalThis[Object.keys(this)[t]]=Object.values(this)[t];return this},RemoveAll:function(){for(let t=0;t<Object.keys(this).length;t++)delete globalThis[Object.keys(this)[t]];return this}};class Tr{#a;constructor(){this.#a=function(t){try{let e=new Function("return "+t.data.fun)()();postMessage({result:e})}catch(t){postMessage({error:t.message})}finally{t.data.close&&self.close()}}.toString(),this.blob=new Blob(["this.onmessage = "+this.#a],{type:"text/javascript"}),this.worker=new Worker(window.URL.createObjectURL(this.blob))}call(t,e,s=!0){return this.worker.postMessage({fun:t.toString(),close:s}),this.worker.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data.result)},this}}const Or=(t,e,s)=>{const r=new Tr;return t&&r.call(t,e,s),r};class _r{constructor(t,e){this.root_UI=t,this.routes=new Map([[404,text("Error 404")],...Object.entries(e)]),this.patterns=new Map,this.maintain(),window.onpopstate=this.render(location.pathname)}get(t,e){return t instanceof RegExp?this.patterns.set(t,e):this.routes.set(t,e),this.maintain(),this}maintain(){return this.root_UI.append(...this.routes.values()),[...this.routes.values()].map((t=>t.render(!1))),this.render(location.pathname),this}render(t){if(this.routes.get(t))this.routes.get(t).render(!0);else{const e=[...this.patterns.keys()].find((e=>e.test(t)));e?this.patterns.get(e)(t):this.routes.get(404).render(!0)}return window.history.pushState({},"",t),this}}const Ir=(t,e,s)=>new _r(t,e,s),Vr={Math:At,UI:Ds,Time:Xs,Graphics:Cr,Events:xe,Data:Ys,Multi:Or,SPA:Ir,ALL_UI_ELEMENTS:ke};console.log(1),t.Canvas=fr,t.Data=Ys,t.Ease=Fs,t.Events=xe,t.ExtractAll=function(){return Ds.ExtractAll(),At.ExtractAll(),Xs.ExtractAll(),xe.ExtractAll(),Cr.ExtractAll(),this},t.Graphics=Cr,t.Math=At,t.Multi=Or,t.RemoveAll=function(){Ds.RemoveAll(),At.RemoveAll(),Xs.ExtractAll(),xe.RemoveAll(),Cr.RemoveAll()},t.SPA=Ir,t.Svg=pr,t.Time=Xs,t.UI=Ds,t.Ziko=Vr,t.ZikoHtml=Ve,t.ZikoUIAudio=ns,t.ZikoUICanvas=dr,t.ZikoUIElement=ve,t.ZikoUIFigure=is,t.ZikoUIImage=rs,t.ZikoUISvg=mr,t.ZikoUIVideo=es,t.animation=Ws,t.audio=os,t.canvasArc=xr,t.canvasCircle=br,t.canvasLine=Mr,t.canvasPoints=vr,t.canvasRect=Ar,t.debounce=Ps,t.figure=hs,t.image=as,t.loop=Rs,t.svgCircle=Js,t.svgEllipse=er,t.svgGroupe=ur,t.svgImage=or,t.svgLine=rr,t.svgPolygon=ir,t.svgRect=Qs,t.svgText=lr,t.throttle=Bs,t.timeTaken=Us,t.time_memory_Taken=zs,t.video=ls,t.wait=Hs,t.waitForUIElm=Ns,t.waitForUIElmSync=Ls}));
