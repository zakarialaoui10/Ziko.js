import { ZikoUIFlex } from "./flex";
class ZikoUICarousel extends ZikoUIFlex{
    constructor(...ZikoUIElement){
        super()
        this.style({
            position:"relative",
            overflow:"hidden",
            touchAction:"none",
            userSelect:"none"
        });
        this.horizontal("space-around",0);
        this.track = Section(...ZikoUIElement).style({ display: "inline-flex" });
        this.track.size(this.track.children.length * 100 + "vw");
        this.track.setTarget(this);
        this.track.items.map((n) =>
          n.style({ pointerEvents: "none", margin: "auto 10px" })
        );
        this.x0 = null;
        this.y0 = null;
        this.tx = 0;
        this.ty = 0;
        this.onPtrMove(e=>{
            if(e.isDown){
                let x = e.event.pageX;
                let y = e.event.pageY;
                let dx = x - this.x0;
                let dy = y - this.y0;
                this.track.translate(
                    this.tx + dx, 
                    this.ty + dy
                    );
              }
        })
        this.onPtrDown(e=>{
            this.x0 = e.event.pageX;
            this.y0 = e.event.pageY;
            const transformMatrix = window
              .getComputedStyle(this.track.element)
              .getPropertyValue("transform");
            if (transformMatrix !== "none") {
              this.tx = +transformMatrix.split(",")[4];
              this.ty = +transformMatrix.split(",")[5];
            }            
        })
        this.onPtrUp();
    }
}
const Carousel=(...ZikoUIElement)=>new ZikoUICarousel(...ZikoUIElement);
export {Carousel}