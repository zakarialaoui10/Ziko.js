var Ziko={Target:document.body,Math:{},UI:{Symbols:{}},String:{},Time:{},THREE:{},Paint:{}};(function(){if(document){var Symbols={math:{plus:"➕",multiply:"✖️",pi:"π",equiv:"≡",equiv4:"≣",infinity:"∞",radic:"√",prod:"∏",sum:"∑",exit:"∃",forall:"∀",empty:"∅",nexist:"∄",nable:"∇",ang:"∠",integral:"∫",iintegral:"∬",iiintegral:"∭",conintegral:"∮",coniintegral:"∯",coniiintegral:"∰"},cutting:"✂️",check:"✓",heart:"❤",like:"👍",dislike:"👎",fire:"🔥",star:"★",keyboard:"⌨️",idea:"💡",newspaper:"📰",folder:"📁",clipboard:"📋",pushpin:"📌",clippy:"📎",link:"🔗",locked:"🔒",unlocked:"🔓",key:"🔑",speech:"💬",bell:"🔔",restricted:"🚫",play:"▶️",playBack:"◀️",inbox:"📥",wrench:"🔧"};var Id=a=>document.getElementById(a);var Class=a=>[...document.getElementsByClassName(a)];window.Print=window.print;var customPrint=(...removedElements)=>{removedElements.map(n=>n.remove());Print();removedElements.map(n=>n.render())};var style=(el,styles)=>Object.assign(el.style,styles);Object.defineProperties(Array.prototype,{toUI:{value:function(element,style={}){return this.toMatr.toUI(element,style)}}});function script(src){Script=document.createElement("script");Script.setAttribute("src",src);document.head.appendChild(Script)}function linkStyle(href){link=document.createElement("link");link.setAttribute("rel","stylesheet");link.setAttribute("href",href);document.head.appendChild(link)}class _ZikoHeadMetaData{constructor(){this.Target=document.head}author(author=""){let meta=document.createElement("meta");meta.setAttribute("name","author");meta.setAttribute("content",author);this.Target.appendChild(meta);return this}description(description=""){let meta=document.createElement("meta");meta.setAttribute("name","description");meta.setAttribute("content",description);this.Target.appendChild(meta);return this}keywords(key=""){let meta=document.createElement("meta");meta.setAttribute("name","keywords");meta.setAttribute("content",key);this.Target.appendChild(meta);return this}}class LoadJSON{constructor(url){this.url=url;this.data=null;this.fetch()}async fetch(){const Data=await fetch(this.url);this.data=await Data.json();return this}}var loadJSON=url=>new LoadJSON(url);class _ZikoUIElement{static isHidden;static Flip;constructor(){this.Target=Ziko.Target||document.body;this.element=document.body;_ZikoUIElement.isHidden=false;_ZikoUIElement.Flip=[0,0,0];this.items=[];this.uuuid="Element"+crypto.randomUUID();this.setClass(this.uuuid);this.memory=this.element.style.display;this.style({position:"relative"});this.size("auto","auto")}clone(){var a=new _ZikoUIElement;a.element=this.element.cloneNode(true);a.render(true);return a}append(...ele){for(let i=0;i<ele.length;i++){this.element.appendChild(ele[i].element);ele[i].Target=this.element}this.items.push(...ele);return this}insertAt(index,...ele){if(index>=this.element.children.length)this.append(...ele);else for(let i=0;i<ele.length;i++)this.element.insertBefore(ele[i].element,this.items[index].element);return this}link(link,target=""){let a=document.createElement("a");a.setAttribute("href",link);if(target)a.setAttribute("target",target);this.element.addEventListener("click",()=>a.click());this.element.style.cursor="pointer";return this}removeItem(...ele){const remove=ele=>{if(ele instanceof _ZikoUIElement)this.element.removeChild(ele.element);else if(typeof ele==="number")this.element.removeChild(this.element.children[ele])};for(let i=0;i<ele.length;i++)remove(ele[i]);return this}target(tg){if(tg instanceof _ZikoUIElement)tg=tg.element;this.remove();this.Target=Ziko.Target;this.render();return this}render(bool=true){if(bool)this.Target.appendChild(this.element);else this.remove();return this}remove(){if(this.Target.children.length)this.Target.removeChild(this.element);return this}toggle(){_ZikoUIElement.isHidden?this.show():this.hide();return this}removeAfter(t=1){setTimeout(()=>this.remove(),t);return this}hide(){_ZikoUIElement.isHidden=true;this.style({display:"none"});return this}hideAfter(t=1){setTimeout(()=>this.hide(),t)}show(){_ZikoUIElement.isHidden=false;this.style({display:""});return this}showAfter(t=1){setTimeout(()=>this.show(),t)}get children(){return[...this.element.children]}get cloneElement(){return this.element.cloneNode(true)}style(stl,{target="parent",maskVector=null,cssSelector=""}={}){if(target==="parent"||target===0)style(this.element,stl);else{if(cssSelector&&!maskVector)[...this.element.querySelectorAll(cssSelector)].map(n=>style(n,stl));else if(maskVector&&!cssSelector)this.children.map((n,i)=>maskVector[i]==1&&style(n,stl));else if(!maskVector&&!cssSelector)this.children.map(n=>style(n,stl));else console.warn("You can't use maskVector and cssSelector in the same time")}return this}get styleObject(){return Object.fromEntries(Object.entries(this.element.style).filter(n=>n[1]!=""&&n[1]!=="initial"&&isNaN(+n[0])))}setCss(css){this.element.style.cssText=css;return this}addCss(css){this.element.style.cssText+=css;return this}color(col="#111111",{target,maskVector,cssSelector}={}){this.style({color:col},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}background(background="#EEEEEE",{target,maskVector,cssSelector}={}){this.style({background:background},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}backgroundColor(background="#EEEEEE",{target,maskVector,cssSelector}={}){this.style({backgroundColor:background},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}backgroundImage(src,{repeat="no-repeat",blendMode="normal",target,maskVector,cssSelector}={}){if(src instanceof Array)src=src.map(n=>"url("+n+")").join(",");else src="url("+src+")";this.style({backgroundImage:src,backgroundRepeat:repeat,backgroundSize:"cover",backgroundBlendMode:blendMode},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}backgroundGradient(colors,{target,maskVector,cssSelector,type="linear"}={}){if(colors instanceof Array){if(colors.length===1)colors[1]=colors[0];colors=colors.join(",")}this.style({background:type+"-gradient("+colors+")"},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}colorGradient(colors,{target,maskVector,cssSelector,type="linear"}={}){if(colors instanceof Array){if(colors.length===1)colors[1]=colors[0];colors=colors.join(",")}var webkit="-webkit-"+type+"-gradient("+colors+")";this.style({background:webkit,webkitBackgroundClip:"text",webkitTextFillColor:"transparent"},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}shadow(shadow="",{target,maskVector,cssSelector}={}){this.style({textShadow:"1px 1px 1px "+shadow},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}boxShadow(shadow="",{target,maskVector,cssSelector}={}){this.style({boxShadow:"2px 2px 10px "+shadow},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}clip(polygon,{target,maskVector,cssSelector}={}){if(typeof polygon==="string")polygon="polygon("+polygon+")";this.style({clipPath:polygon},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}width(w="100%",{target,maskVector,cssSelector}={}){this.style({width:w},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}clampWidth(min,max,{target,maskVector,cssSelector}={}){this.style({minWidth:min,maxWidth:max},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}height(h="100%",{target,maskVector,cssSelector}={}){this.style({height:h},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}clampHeight(min,max,{target,maskVector,cssSelector}={}){this.style({minHeight:min,maxHeight:max},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}size(w="100%",h="100%",{target,maskVector,cssSelector}={}){this.style({width:w,height:h},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}overflow(x,y,{target,maskVector,cssSelector}={}){let value=Ziko.Math.Permutation.withDiscount(["hidden","auto"]);let index=Ziko.Math.bin2dec(+(x+""+y));let valueX=value[index][0];let valueY=value[index][1];this.style({overflowX:valueX,overflowY:valueY},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}margin(marge,{target,maskVector,cssSelector}={}){this.style({margin:marge},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}border(bd="1px solid red",{target,maskVector,cssSelector}={}){this.style({border:bd},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}borderRadius(bd="50%",{target,maskVector,cssSelector}={}){this.style({borderRadius:bd},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}padding(padding,{target,maskVector,cssSelector}={}){this.style({padding:padding},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}display(disp,{target,maskVector,cssSelector}={}){this.style({display:disp},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}cssFilter(filter,{target,maskVector,cssSelector}={}){this.style({filter:filter},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}opacity(op,{target,maskVector,cssSelector}={}){this.style({opacity:op},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}zIndex(z,{target,maskVector,cssSelector}={}){this.style({zIndex:z},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}"float"(float,{target,maskVector,cssSelector}={}){this.style({"float":float},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}font(f="italic bold 20px arial,serif",{target,maskVector,cssSelector}={}){this.style({font:f},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}fontSize(size="20px",{target,maskVector,cssSelector}={}){this.style({fontSize:size},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}fontFamily(n="Serif",{target,maskVector,cssSelector}={}){if(typeof n=="number"){switch(n){case 0:this.style({fontFamily:"Serif"},{target:target,maskVector:maskVector,cssSelector:cssSelector});break;case 1:this.style({fontFamily:"Sans-Serif"},{target:target,maskVector:maskVector,cssSelector:cssSelector});break;case 2:this.style({fontFamily:"Monospace"},{target:target,maskVector:maskVector,cssSelector:cssSelector});break;case 3:this.style({fontFamily:"Cursive"},{target:target,maskVector:maskVector,cssSelector:cssSelector});break;case 4:this.style({fontFamily:"Fantasy"},{target:target,maskVector:maskVector,cssSelector:cssSelector});break;default:break}}else this.style({fontFamily:n},{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}setAttribute(name,value){this.element.setAttribute(name,value);return this}contenteditable(bool=true){this.setAttribute("contenteditable",bool);return this}removeAttribute(name){this.element.setAttribute(name);return this}setClass(value){this.setAttribute("class",value);return this}get classes(){return this.element.getAttribute("class")}addClass(value){}setId(Id){this.element.setAttribute("id",Id);return this}get id(){return this.element.getAttribute("id")}filterByClass(value){let n=0;for(let i=0;i<this.children.length;i++){for(let j=0;j<this.children[i].classList.length;j++){if([...this.children[i].classList][j]==value)n++}if(n==0)this.children[i].setAttribute("hidden",true);n=0}}filterByTextContent(value,displays){let item=this.children;item.filter(n=>!n.textContent.toLowerCase().includes(value.toLowerCase())).map(n=>{n.style.display="none"});item.filter(n=>n.textContent.toLowerCase().includes(value.toLowerCase())).map((n,i)=>n.style.display=displays[i]);return item.filter(n=>n.style.display!="none");return this}sortByTextContent(value,displays){let item=this.children;item.filter(n=>!n.textContent.toLowerCase().includes(value.toLowerCase())).map(n=>{n.style.display="none"});item.filter(n=>n.textContent.toLowerCase().includes(value.toLowerCase())).map((n,i)=>n.style.display=displays[i]);return item.filter(n=>n.style.display!="none");return this}toggleValues(...values){values=values.map(n=>""+n);let index=values.indexOf(""+this.value);if(index!=-1&&index!=values.length-1)this.setValue(values[index+1]);else this.setValue(values[0]);return this}on(event,calback,{target="parent",maskVector=null,cssSelector}={}){if(target==="parent"||target===0)this.element.addEventListener(event,calback);else if(target==="children"||target===1){if(maskVector){this.items.map((n,i)=>maskVector[i]==1&&n.element.addEventListener(event,calback))}else this.items.map(n=>n.element.addEventListener(event,calback))}}click(calback,{target="parent",maskVector=null,cssSelector}={}){this.on("click",calback,{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}dbclick(calback,{target="parent",maskVector=null,cssSelector}={}){this.on("dbclick",calback,{target:target,maskVector:maskVector,cssSelector:cssSelector});return this}get visibleArea(){let bodyCoords=document.body.getBoundingClientRect();let coords=this.element.getBoundingClientRect();let windowHeight=document.documentElement.clientHeight;let windowWidth=document.documentElement.clientWidth;let topVisible=coords.top>0&&coords.top<windowHeight;let bottomVisible=coords.bottom<windowHeight&&coords.bottom>0;let leftVisible=coords.left>0&&coords.left<windowWidth;let rightVisible=coords.right>0&&coords.right<windowWidth;return{top:topVisible,bottom:bottomVisible,left:leftVisible,right:rightVisible,heightRatio:(coords.height+coords.y)/coords.height,isVisible:topVisible||bottomVisible||rightVisible||leftVisible}}get scrollRatio(){const scrollTop=this.element.scrollTop;const scrollHeight=this.element.scrollHeight-this.element.clientHeight;const scrollLeft=this.element.scrollLeft;const scrollWidth=this.element.scrollWidth-this.element.clientWidth;return{x:scrollLeft/scrollWidth,y:scrollTop/scrollHeight}}scrollTo({x=this.scrollRatio.x,y=this.scrollRatio.y}={}){const scrollWidth=map(x,0,1,0,this.element.scrollWidth-this.element.clientWidth);const scrollHeight=map(y,0,1,0,this.element.scrollHeight-this.element.clientHeight);this.element.scrollTo(scrollWidth,scrollHeight);return this}get positionRelativeToDocument(){let a=this.element.getBoundingClientRect();return a}mousedown(calback){this.element.addEventListener("mousedown",calback);return this}mousemove(calback){this.element.addEventListener("mousemove",calback);return this}mouseup(calback){this.element.addEventListener("mouseup",calback);return this}mouseenter(calback){this.element.addEventListener("mouseenter",calback);return this}mouseleave(calback){this.element.addEventListener("mouseleave",calback);return this}mouseout(calback){this.element.addEventListener("mouseout",calback);return this}mouseover(calback){this.element.addEventListener("mouseover",calback);return this}touchmove(calback){this.element.addEventListener("touchmove",calback);return this}touchup(calback){this.element.addEventListener("touchup",calback);return this}pointermove(calback){this.element.addEventListener("pointermove",calback);return this}pointerup(calback){this.element.addEventListener("pointerup",calback);return this}pointerdown(calback){this.element.addEventListener("pointerdown",calback);return this}pointerover(calback){this.element.addEventListener("pointerover",calback);return this}pointerleave(calback){this.element.addEventListener("pointerleave",calback);return this}pointerout(calback){this.element.addEventListener("pointerout",calback);return this}pointerenter(calback){this.element.addEventListener("pointerenter",calback);return this}keypress(calback){this.element.addEventListener("keypress",calback);return this}keydown(calback){this.element.addEventListener("keydown",calback);return this}keyup(calback){this.element.addEventListener("keyup",calback);return this}get key(){return event.key}get keyCode(){return event.keyCode}get Event(){return event}handleSuccessifKeys(keys,calback){keys=keys.reverse();const newkeys=new Array(keys.length).fill(null);const addsub=(arr,item,length=keys.length)=>{arr.unshift(item);arr.length=length};this.keydown(()=>{addsub(newkeys,this.key);if(newkeys.comp(keys)){this.preventDefault();calback();newkeys.fill(null)}});return this}preventDefault(){return this.Event.preventDefault()}preventCopy(){this.keydown(()=>{if(this.Event.ctrlKey&&this.key=="c")this.preventDefault()})}preventPaste(){this.keydown(()=>{if(this.Event.ctrlKey&&this.key=="v")this.preventDefault()})}preventCut(){this.keydown(()=>{if(this.Event.ctrlKey&&this.key=="x")this.preventDefault()})}preventSelect(){this.keydown(()=>{if(this.Event.ctrlKey&&this.key=="a")this.preventDefault()})}draggable(bool=true){this.element.setAttribute("draggable",bool);return this}get center(){this.style({display:"flex",justifyContent:"center",alignItems:"center"});return this}get toCss3dObj(){return new THREE.CSS3DObject(this.element)}cursor(type="pointer"){this.style({cursor:type});return this}fadeOut(t=1){this.style({transition:t+"s",opacity:0});return this}fadeIn(t=1){this.style({transition:t+"s",opacity:1});return this}slideHeightIn(t=1,h=this.h){this.style({transition:t+"s",height:h});return this}slideHeightOut(t=1){this.style({transition:t+"s",height:0});this.element.addEventListener("transitionend",()=>this.style({opacity:"none"}));return this}slideWidthIn(t=1,w=this.w){this.style({transition:t+"s",width:w});return this}slideWidthOut(t=1){this.style({transition:t+"s",width:0});this.element.addEventListener("transitionend",()=>this.style({opacity:"none"}));return this}slideIn({t=1,w="100%",h="auto"}={}){this.style({transition:t+"s",width:w,height:h,visibility:"visible"});return this}slideOut({t=1,width=0,height=0}={}){this.style({visibility:"hidden",transition:t+"s",opacity:"none",width:width,height:height});this.element.addEventListener("transitionend",()=>{this.style({opacity:"none"});console.log(1)});return this}toggleSlide(){}translateX(px,t=0){this.style({transform:"translateX("+px+"px)"});if(t!=0)this.style({transition:"all "+t+"s ease"});return this}translateY(px,t=0){this.style({transform:"translateY("+px+"px)"});if(t!=0)this.style({transition:"all "+t+"s ease"});return this}translate(x,y=x,t=0){this.style({transform:"translate("+x+"px,"+y+"px)"});return this}rotateX(deg,{duration=0}={}){this.style({transition:"all "+duration+"s ease"});this.style({transform:"rotateX("+deg+"deg)"});return this}rotateY(deg,{duration=0}={}){this.style({transition:"all "+duration+"s ease"});this.style({transform:"rotateY("+deg+"deg)"});return this}rotateZ(deg,{duration=0}={}){this.style({transition:"all "+duration+"s ease"});this.style({transform:"rotateZ("+deg+"deg)"});return this}flipeX({t=1}={}){_ZikoUIElement.Flip[0]+=180;this.style({transform:"rotateX("+_ZikoUIElement.Flip[0]+"deg)",transition:"all "+t+"s ease"});return this}flipeY(t=1){_ZikoUIElement.Flip[1]+=180;this.style({transform:"rotateY("+_ZikoUIElement.Flip[1]+"deg)",transition:"all "+t+"s ease"});return this}flipeZ(t=1){_ZikoUIElement.Flip[2]+=180;this.style({transform:"rotateZ("+_ZikoUIElement.Flip[2]+"deg)",transition:"all "+t+"s ease"});return this}scaleX(sc,t=1){this.style({transform:"scaleX("+sc+")",transition:"all "+t+"s ease"});return this}scaleY(sc,t=1){this.style({transform:"scaleY("+sc+")",transition:"all "+t+"s ease"});return this}skewX(deg,t=1){this.style({transform:"skewX("+deg+"deg)",transition:"all "+t+"s ease"});return this}skewY(deg,t=1){this.style({transform:"skewY("+deg+"deg)",transition:"all "+t+"s ease"});return this}skew(x,y,t=1){this.style({transform:"skew("+x+"deg , "+y+"deg)",transition:"all "+t+"s ease"});return this}scale(x,y=x,t=1){this.style({transform:"scale("+x+","+y+")",transition:"all "+t+"s ease"});return this}resize(n=0){switch(n){case 0:this.style({resize:"none"});break;case 1:this.style({resize:"horizontal"});break;case 2:this.style({resize:"vertical"});break;case 3:this.style({resize:"both"});break;default:this.style({resize:n})}return this}Glassmorphism(background="rgba(255,255,255,0.1)",blur="1px"){this.style({background:background,backdropFilter:blur});return this}Neumorphism(r="50px",bg="cyan",box="13px -13px 49px #5d8fac"){this.style({borderRadius:r,background:bg,boxShadow:box});return this}allowDrop(ev){ev.preventDefault()}drag(ev){ev.dataTransfer.setData("text",ev.Target.id)}drop(ev){ev.preventDefault();var data=ev.dataTransfer.getData("text");ev.Target.appendChild(document.getElementById(data))}fullScreen(set=true,e){if(set)this.element.requestFullscreen(e);else document.exitFullscreen();return this}toggleFullScreen(e){if(!document.fullscreenElement)this.element.requestFullscreen(e);else document.exitFullscreen();return this}resizeObserver(calback){var observer=new ResizeObserver(element=>calback(element));return observer.observe(this.element)}intersectionObserver(calback,target="parent"){if(target=="parent"){var observer=new IntersectionObserver(element=>calback(element[0]));return observer.observe(this.element)}return this.items.map(n=>n.intersectionObserver(e=>calback(e)))}intersectRatio(calback){var observer=new IntersectionObserver(element=>calback(element[0].intersectionRatio));return observer.observe(this.element)}exportHTML(){}toPdf(){var newWindow=window.open();var html=document.createElement("html");const head=document.head.cloneNode(true);const body=document.createElement("body");const section=this.element.cloneNode(true);console.log(section);body.appendChild(section);html.appendChild(head);html.appendChild(body);newWindow.document.write(html.innerHTML);newWindow.document.close();newWindow.print();newWindow.close();return this}}var CloneElement=Zikoelement=>{let a=new _ZikoUIElement;a.element=Zikoelement.element.cloneNode(true);return a.render()};class _ZikoUIRoot extends _ZikoUIElement{constructor(){super();this.element=document.body;window.addEventListener("resize",()=>this.size())}size(w=window.innerWidth+"px",h=window.innerHeight+"px"){this.element.style.width=w;this.element.style.height=h;return this}append(element){this.element.appendChild(element.element);element.Target=this.element;return this}}class _ZikoUIParagraphe extends _ZikoUIElement{constructor(...value){super();this.element=document.createElement("p");this.addValue(...value);this.render()}addValue(...value){for(let i=0;i<value.length;i++){if(typeof value[i]=="string"||typeof value[i]=="number"){this.element.appendChild(document.createTextNode(value[i]));this.element.appendChild(document.createElement("br"))}else if(value[i]instanceof _ZikoUIElement)this.element.appendChild(value[i].element);else if(value[i]instanceof Ziko.Math.Complex)text(value.a+" + "+value.b+"i")}return this}clear(){this.element.childNodes.forEach(e=>e.remove());return this}setValue(...value){this.clear();this.addValue(...value);return this}}class _ZikoUIText extends _ZikoUIElement{constructor(...value){super();this.element=document.createElement("span");this.text="";this.addValue(value);this.display("inline-block");this.render()}clear(){this.element.innerText="";return this}get value(){return this.element.innerText}setValue(value="",add=false){if(["string","number"].includes(typeof value)){this.text=""+value;if(this.text.includes("\n"))this.text=this.text.split("\n").map(n=>"<span>".concat(n,"</span></br>")).join("")}if(Ziko.Math){if(value instanceof Ziko.Math.Complex)this.text=""+value.UI();else if(value instanceof Ziko.Math.Matrix){let string="[";for(let j=0;j<value.arr.length;j++)string+=(j!=0?" ":"")+`[${value.arr[j].map(n=>"  "+n.toString()+" ")}],</br>`;string=string.substring(0,string.length-6)+"]";this.text=""+string}else if(value instanceof Ziko.Math.Suite){var string=value.termes.join(", ");this.text=""+string}}if(add)this.element.innerHTML+=this.text;else this.element.innerHTML=this.text;if(value instanceof Array||value instanceof Set){if(value instanceof Set)value=[...value];this.addValue(...value)}}addValue(...value){value.map(n=>{this.setValue(" ",true);this.setValue(n,true)});return this}typeWriter(text="ziko",speed=50,{lineBreak=true}={}){if(["string","number"].includes(typeof text))text=text.split("");else text=new _ZikoUIText(text).render(false).element.innerHTML.split(" ");let i=0;const write=()=>{if(i<text.length){if(text[i].charCodeAt(0)===32)text[i]=String.fromCharCode(160);this.addValue(text[i]);i++;setTimeout(write,1/speed*1e3)}else if(lineBreak)this.addValue("<br>")};write();return this}}class _ZikoUIHeading extends _ZikoUIElement{constructor(type=1,value=""){super();this.element=document.createElement("H"+type);this.element.textContent=value;this.render()}get value(){return this.element.innerText}setValue(text=""){this.element.innerText=text;return}addValue(text=""){this.element.innerText+=text;return this}}class _ZikoUIList extends _ZikoUIElement{constructor(tp="ol",arr=[]){super();this.element=document.createElement(tp);for(let i=0;i<arr.length;i++){let li=document.createElement("li");if(["string","number"].includes(typeof arr[i]))arr[i]=text(arr[i]);if(arr[i]instanceof _ZikoUIElement)li.appendChild(arr[i].element);else if(arr[i]==undefined||typeof arr[i]=="string"||typeof arr[i]=="number")text(arr[i]).target(li);else if(arr[i]instanceof Complex)text(arr[i].a+" + i* "+arr[i].b).target(li);else if(arr[i]instanceof Suite){ol(arr[i].U).target(li)}else if(arr[i]instanceof Matrix){let string="[";for(let j=0;j<arr[i].arr.length;j++)string+=(j!=0?" ":"")+"["+arr[i].arr[j].map(n=>"  "+n.toString()+" ")+"]</br>";string=string.substring(0,string.length-6)+"]";text(string).target(li)}else if(arr[i]instanceof Array){let x=matrix([arr[i]]);let string="[";for(let j=0;j<x.arr.length;j++)string+=(j!=0?" ":"")+` [${x.arr[j].map(n=>" "+n.toString()+" ")}],</br>`;string=string.substring(0,string.length-6)+"]";string=string.slice(1,-1);text(string).target(li)}this.element.appendChild(li)}this.style({listStylePosition:"inside"});this.render()}type(tp=1){this.element.setAttribute("type",tp);return this}start(st=1){this.element.setAttribute("start",st);return this}get center(){this.remove;p(this).target(this.Target).center;return this}"delete"(value){const valueIndex=[...this.element.children].indexOf(value);return valueIndex}}class _ZikoUIBr extends _ZikoUIElement{constructor(n=1){super();for(let i=0;i<n;i++){this.element=document.createElement("br");this.render()}}}class _ZikoUIHr extends _ZikoUIElement{constructor(n=1){super();for(let i=0;i<n;i++){this.element=document.createElement("hr");this.render()}}}class _ZikoUIIframe extends _ZikoUIElement{constructor(src){super();this.element=document.createElement("iframe");this.src=src;this.element.setAttribute("src",this.src);this.render()}}class _ZikoUIBtn extends _ZikoUIElement{constructor(value="button"){super();this.element=document.createElement("button");this.setValue(value);this.render();this.cursor("pointer")}setValue(value){if(value instanceof _ZikoUIElement)value.target(this.element);else{this.element.appendChild(document.createTextNode(""));this.element.childNodes[0].data=value}return this}get value(){return this.element.innerText}toggleValues(...values){values=values.map(n=>""+n);let index=values.indexOf(""+this.value);if(index!=-1&&index!=values.length-1)this.setValue(values[index+1]);else this.setValue(values[0]);return this}}class _ZikoUIInputOption extends _ZikoUIElement{constructor(str=""){super();this.element=document.createElement("option");this.setValue(str)}setValue(str=""){this.element.value=str;this.element.innerText=str;return this}}class _ZikoUIOptGroup extends _ZikoUIElement{constructor(label,...options){super();this.element=document.createElement("optgroup");this.setLabel(label).addOptions(...options)}setLabel(label){this.element.label=label;return this}addOptions(...options){options.map(n=>this.append(new _ZikoUIInputOption(n)));return this}}window.optgroup=(label,...options)=>new _ZikoUIOptGroup(label,...options);class _ZikoUIInputDatalist extends _ZikoUIElement{constructor(...options){super();this.element=document.createElement("datalist");this.addOptions(...options).setId(this.uuuid);this.render()}addOptions(...options){options.map(n=>this.append(new _ZikoUIInputOption(n)));return this}addOptGrp({label="",options=[]}={}){this.append(new _ZikoUIOptGroup(label,...options));return this}}class _ZikoUIInput extends _ZikoUIElement{constructor(defaultValue=""){super();this.element=document.createElement("input");this.setValue(defaultValue);this.render()}linkList(datalist){this.element.setAttribute("list",datalist.uuuid);return this}get value(){return this.element.value}setType(type){this.element.type=type;return this}setValue(value){this.element.value=value;return this}placeholder(value){this.element.placeholder=value;return this}get isValide(){return this.element.checkValidity()}required(required=true){this.element.required=required;return this}select(){this.element.select();return this}copy(){this.element.select();document.execCommand("copy");return this}cut(){this.element.select();document.execCommand("cut");return this}oninput(calback){this.element.addEventListener("input",()=>calback());return this}onchange(calback){this.element.addEventListener("change",calback)}accept(value){this.element.accept=value;return this}}class _ZikoUIInputSearch extends _ZikoUIInput{constructor(){super();this.setType("search");this.Length=0}onsearch(calback){this.element.addEventListener("search",()=>calback());return this}connect(...UIElement){this.memory=new Array(UIElement.length).fill([]);UIElement.map((n,i)=>{n.items.map((m,j)=>{this.memory[i][j]=m.element.style.display})});UIElement.map((n,i)=>this.oninput(()=>{n.filterByTextContent(this.value,this.memory[i]);this.Length=n.children.filter(n=>n.style.display!="none").length}));return this}displayLength(UIElement){this.element.addEventListener("keyup",()=>UIElement.setValue(this.Length));return this}}class _ZikoUIInputNumber extends _ZikoUIInput{constructor(min,max){super();this.setType("number");this.setMin(min).setMax(max);this.render()}get value(){return+this.element.value}setMin(min){this.element.min=min;return this}setMax(max){this.element.max=max;return this}setStep(step){this.element.step=step;return this}}class _ZikoUIInputSlider extends _ZikoUIInputNumber{constructor(val=0,min=0,max=10,step=1){super();this.min=min;this.max=max;this.step=step;this.setType("range");this.setMin(min).setMax(max).setValue(val).setStep(step);this.render()}controlScroll(UIElement,orientation="y"){this.oninput(()=>{if(orientation==="y")UIElement.scrollTo({y:map(this.value,this.min,this.max,0,1)});else if(orientation==="x")UIElement.scrollTo({x:map(this.value,this.min,this.max,0,1)})});return this}visualizeScroll(UIElement,orientation="y"){UIElement.element.addEventListener("scroll",()=>{if(orientation==="y")this.setValue(map(UIElement.scrollRatio.y,0,1,this.min,this.max));else if(orientation==="x")this.setValue(map(UIElement.scrollRatio.x,0,1,this.min,this.max))});return this}controlVisualizeScroll(UIElement,orientation="y"){this.controlScroll(UIElement).visualizeScroll(UIElement);return this}}class _ZikoUIProgress extends _ZikoUIElement{constructor(val=0,min=0,max=10,step=1){super();this.element=document.createElement("progress");this.min=min;this.max=max;this.step=step;this.setValue(val).setMin(min).setMax(max).setValue(val);this.render()}get value(){return+this.element.value}setValue(value){this.element.value=value;return this}setMin(min){this.element.min=min;return this}setMax(max){this.element.max=max;return this}visualizeScroll(UIElement,orientation="y"){UIElement.element.addEventListener("scroll",()=>{if(orientation==="y")this.setValue(map(UIElement.scrollRatio.y,0,1,this.min,this.max));else if(orientation==="x")this.setValue(map(UIElement.scrollRatio.x,0,1,this.min,this.max))});return this}visualizeInput(UIElement,orientation="y"){UIElement.element.addEventListener("input",()=>{if(orientation==="y")this.setValue(map(UIElement.scrollRatio.y,0,1,this.min,this.max));else if(orientation==="x")this.setValue(map(UIElement.scrollRatio.x,0,1,this.min,this.max))});return this}}class _ZikoUIInputColor extends _ZikoUIInput{constructor(){super();this.setType("color");this.background(this.value);this.render();this.oninput(()=>this.background(this.value))}}class _ZikoUIInputPassword extends _ZikoUIInput{constructor(){super();this.setType("password");this.render()}}class _ZikoUIInputEmail extends _ZikoUIInput{constructor(){super();this.setType("email");this.render()}}class _ZikoUIInputTime extends _ZikoUIInput{constructor(){super();this.setType("time");this.render()}}class _ZikoUIInputDate extends _ZikoUIInput{constructor(){super();this.setType("date");this.render()}}class _ZikoUIInputDateTime extends _ZikoUIInput{constructor(){super();this.setType("datetime-local");this.render()}}class _ZikoUIInputCheckbox extends _ZikoUIInput{constructor(){super();this.setType("checkbox");this.cursor("pointer")}get checked(){return this.element.checked}check(checked=true){this.element.checked=checked;return this}color(color){this.element.style.accentColor=color;return this}}class _ZikoUISelect extends _ZikoUIElement{constructor(){super();this.element=document.createElement("select");this.render()}get value(){return this.element.value}get values(){return[...this.element.options].filter(n=>n.selected).map(n=>n.value)}setSelectedValue(value){let item=[...this.element.children].filter((n,i)=>n.innerText===value)[0];if(!item)return this;item.selected=true;return this}setSelected(index){this.element.options[index].selected=true;return this}addOptions(...options){options.map(n=>this.append(new _ZikoUIInputOption(n)));return this}addOptGrp({label="",options=[]}={}){this.append(new _ZikoUIOptGroup(label,...options));return this}onchange(calback){this.element.addEventListener("change",()=>calback());return this}}class _ZikoUITextArea extends _ZikoUIInput{constructor(){super();this.element=document.createElement("textarea");this.render()}}class _ZikoUIDetails extends _ZikoUIElement{constructor(sum=p(),details=p()){super();this.element=document.createElement("div");this.details=document.createElement("details");this.summary=document.createElement("summary");sum.target(this.summary);this.details.append(this.summary);details.target(this.details);this.element.append(this.details);this.render()}changeDetails(details){this.details.children[1].remove();details.target(this.details);return this}addDetails(details){details.target(this.details);return this}changeSummary(summary){this.summary.children[0].remove();summary.target(this.summary);return this}}class _ZikoUIMedia extends _ZikoUIElement{constructor(src){}}class _ZikoUIImage extends _ZikoUIElement{constructor(src,w,h){super();this.element=document.createElement("img");if(src.nodeName==="IMG")this.element.setAttribute("src",src.src);else{this.src=src;this.element.setAttribute("src",src)}if(typeof w=="number")w+="%";if(typeof h=="number")h+="%";this.style({border:"1px solid black",width:w,height:h});this.render()}updateSrc(url){this.src=url;this.element.src=url;return this}toggleSrc(...values){let index=values.indexOf(""+this.src);if(index!=-1&&index!=values.length-1)this.updateSrc(values[index+1]);else this.updateSrc(values[0]);return this}alt(alt){this.element.alt=alt;return this}}class _ZikoUIVideo extends _ZikoUIElement{constructor(src,w="100%",h="50vh"){super();this.element=document.createElement("video");if(src.nodeName==="VIDEO")this.element.setAttribute("src",src.src);else this.element.setAttribute("src",src);if(typeof w=="number")w+="%";if(typeof h=="number")h+="%";this.style({width:w,height:h});this.render()}controls(enabled=true){this.element.controls=enabled;return this}play(){this.element.play();return this}pause(){this.element.pause();return this}poster(src=""){this.element.poster=src;return this}PIP(e){this.element.requestPictureInPicture(e);return this}}class _ZikoUIAudio extends _ZikoUIElement{constructor(src){super();this.element=document.createElement("audio");this.element.setAttribute("src",src);this.render();this.controls()}controls(enabled=true){this.element.controls=enabled}get play(){this.element.play()}get pause(){this.element.pause()}}class _ZikoUIFigure extends _ZikoUIElement{constructor(src,caption){super();this.element=document.createElement("figure");this.img=src.width("100%").element;this.caption=document.createElement("figcaption");this.caption.append(caption.element);this.element.append(this.img);this.element.append(this.caption);this.render()}}class _ZikoUISvgELement{stroke(color="none"){this.element.setAttribute("stroke",color);return this}strokeWidth(width=1){this.element.setAttribute("stroke-width",width);return this}fill(color="none"){this.element.setAttribute("fill",color);return this}}class _ZikoUISvgRectangle extends _ZikoUISvgELement{constructor(x,y,w,h){super();this.element=document.createElementNS("http://www.w3.org/2000/svg","rect");this.x(x).y(y).width(w).height(h)}x(x){this.element.x.baseVal.value=x;return this}y(y){this.element.y.baseVal.value=y;return this}width(w){this.element.width.baseVal.value=w;return this}height(h){this.element.height.baseVal.value=h;return this}}class _ZikoUISvgCircle extends _ZikoUISvgELement{constructor(cx,cy,r){super();this.element=document.createElementNS("http://www.w3.org/2000/svg","circle");this.cx(cx).cy(cy).r(r)}cx(cx){this.element.cx.baseVal.value=cx;return this}cy(cy){this.element.cy.baseVal.value=cy;return this}r(r){this.element.r.baseVal.value=r;return this}}class _ZikoUISvgEllipse extends _ZikoUISvgELement{constructor(cx,cy,rx,ry){super();this.element=document.createElementNS("http://www.w3.org/2000/svg","ellipse");this.cx(cx).cy(cy).rx(rx).ry(ry)}cx(cx){this.element.cx.baseVal.value=cx;return this}cy(cy){this.element.cy.baseVal.value=cy;return this}rx(rx){this.element.rx.baseVal.value=rx;return this}ry(ry){this.element.ry.baseVal.value=ry;return this}}class _ZikoUISvgLine extends _ZikoUISvgELement{constructor(x1,y1,x2,y2){super();this.element=document.createElementNS("http://www.w3.org/2000/svg","line");this.x1(x1).y1(y1).x2(x2).y2(y2)}x1(x1){this.element.x1.baseVal.value=x1;return this}y1(y1){this.element.y1.baseVal.value=y1;return this}x2(x2){this.element.x2.baseVal.value=x2;return this}y2(y2){this.element.y2.baseVal.value=y2;return this}}class _ZikoUISvgText extends _ZikoUISvgELement{constructor(text,x,y){super();this.element=document.createElementNS("http://www.w3.org/2000/svg","text");this.setText(text);this.x(x).y(y)}x(x){this.element.setAttribute("x",x);return this}y(y){this.element.setAttribute("y",y);return this}setText(text=""){this.element.textContent=text;return this}}class _ZikoUISvgPolygon extends _ZikoUISvgELement{constructor(X=[],Y=[]){super();this.element=document.createElementNS("http://www.w3.org/2000/svg","polygon");this.element.setAttribute("points","")}addPoint(x,y){let p=this.element.parentElement.createSVGPoint();p.x=x;p.y=y;this.element.points.appendItem(p);return this}addPoints(X,Y){for(let i=0;i<X.length;i++){let p=this.element.parentElement.createSVGPoint();p.x=X[i];p.y=Y[i];this.element.points.appendItem(p)}return this}}class _ZikoUISvgImage extends _ZikoUISvgELement{constructor(src="",w="100%",h="100%",x=0,y=0){super();this.element=document.createElementNS("http://www.w3.org/2000/svg","image");this.setSrc(src).width(w).height(h).x(x).y(y)}x(x){this.element.x.baseVal.value=x;return this}y(y){this.element.y.baseVal.value=y;return this}width(w){this.element.setAttribute("width",w);return this}height(h){this.element.setAttribute("height",h);return this}setSrc(src=""){this.element.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",src);return this}}class _ZikoUISvg extends _ZikoUIElement{constructor(w,h){super();this.element=document.createElementNS("http://www.w3.org/2000/svg","svg");this.setAttribute("width",w);this.setAttribute("height",h);this.style({border:"1px black solid"});this.render()}view(x1,y1,x2,y2){let width=Math.abs(x2-x1);let height=Math.abs(y2-y1);this.element.setAttribute("viewBox",[x1,y1,width,height].join(" "));return this}text(text,x,y){let item=new _ZikoUISvgText(text,x,y);this.element.appendChild(item.element);item.x(x-item.element.getComputedTextLength()/2);return item}rect(x,y,w,h){let item=new _ZikoUISvgRectangle(x,y,w,h);this.element.appendChild(item.element);return item}line(x1,y1,x2,y2){let item=new _ZikoUISvgLine(x1,y1,x2,y2);this.element.appendChild(item.element);return item}circle(cx,cy,r){let item=new _ZikoUISvgCircle(cx,cy,r);this.element.appendChild(item.element);return item}ellipse(cx,cy,rx,ry){let item=new _ZikoUISvgEllipse(cx,cy,rx,ry);this.element.appendChild(item.element);return item}polygon(X,Y){let item=new _ZikoUISvgPolygon;this.element.appendChild(item.element);item.addPoints(X,Y);return item}image(src,w,h,x,y){let item=new _ZikoUISvgImage(src,w,h,x,y);this.element.appendChild(item.element);return item}mask(){}}class _ZikoUIInputImage extends _ZikoUIElement{constructor(text="File"){super();this.element=btn(text).target(this.Target);const input=document.createElement("input");input.setAttribute("type","file");input.setAttribute("accept","image");this.element.click(()=>input.click());input.onchange=this.handleImage.bind(this)}handleImage(e){const reader=new FileReader;const img=new Image;reader.onload=function(event){img.src=event.target.result;console.log(img.src)};reader.readAsDataURL(e.target.files[0]);this.img=img}get value(){return this.img}}const Section=(..._ZikoUIElement)=>(new _ZikoUISection).append(..._ZikoUIElement);const Modal=(..._ZikoUIElement)=>(new _ZikoUIModal).append(..._ZikoUIElement);const Article=(..._ZikoUIElement)=>(new _ZikoUIArticle).append(..._ZikoUIElement);const Main=(..._ZikoUIElement)=>(new _ZikoUIMain).append(..._ZikoUIElement);const Header=(..._ZikoUIElement)=>(new _ZikoUIHeader).append(..._ZikoUIElement);const Footer=(..._ZikoUIElement)=>(new _ZikoUIFooter).append(..._ZikoUIElement);const Nav=(..._ZikoUIElement)=>(new _ZikoUINav).append(..._ZikoUIElement);const Aside=(..._ZikoUIElement)=>(new _ZikoUIAside).append(..._ZikoUIElement);const Flex=(..._ZikoUIElement)=>(new _ZikoUIFlex).append(..._ZikoUIElement);const Grid=(..._ZikoUIElement)=>(new _ZikoUIGrid).append(..._ZikoUIElement);const Menu=(...arr)=>(new _ZikoUIMenu).mapControls(...arr);const pageControlers=({pages=null,controlers=null,transition=false,t=1}={})=>new _ZikoUIpageControlers({pages:pages,controlers:controlers,transition:transition,t:t});const MenuJump=(...arr)=>(new _ZikoUIMenuJump).mapControls(...arr);const SideNav=(..._ZikoUIElement)=>(new _ZikoUISideNav).append(..._ZikoUIElement);const SideNav2=(menu,contentElement)=>new _ZikoUISideNav2(menu,contentElement);const Carousel=(..._ZikoUIElement)=>new _ZikoUICarousel(..._ZikoUIElement);const Toggler=(UIControler,UIELement)=>new _ZikoUIToggler(UIControler,UIELement);const Note=(..._ZikoUIElement)=>(new _ZikoUINotes).append(..._ZikoUIElement);const Root=element=>(new _ZikoUIRoot).append(element);const text=(...value)=>new _ZikoUIText(...value);const p=(...value)=>new _ZikoUIParagraphe(...value);const h1=(value="text")=>new _ZikoUIHeading(1,value);const h2=(value="text")=>new _ZikoUIHeading(2,value);const h3=(value="text")=>new _ZikoUIHeading(3,value);const h4=(value="text")=>new _ZikoUIHeading(4,value);const h5=(value="text")=>new _ZikoUIHeading(5,value);const h6=(value="text")=>new _ZikoUIHeading(6,value);const ol=(...arr)=>new _ZikoUIList("ol",arr);const ul=(...arr)=>new _ZikoUIList("ul",arr);const br=n=>new _ZikoUIBr(n);const hr=n=>new _ZikoUIHr(n);const btn=value=>new _ZikoUIBtn(value);const progress=(value,min,max)=>new _ZikoUIProgress(value,min,max);const input=(defaultValue="")=>new _ZikoUIInput(defaultValue);const datalist=(...options)=>new _ZikoUIInputDatalist(...options);const inputNumber=(min,max)=>new _ZikoUIInputNumber(min,max);const search=(...a)=>(new _ZikoUIInputSearch).connect(...a);const inputImage=text=>new _ZikoUIInputImage(text);const inputPassword=()=>new _ZikoUIInputPassword;const inputEmail=()=>new _ZikoUIInputEmail;const inputColor=()=>new _ZikoUIInputColor;const inputTime=()=>new _ZikoUIInputTime;const inputDate=()=>new _ZikoUIInputDate;const inputDateTime=()=>new _ZikoUIInputDateTime;const slider=(value,min,max,pas)=>new _ZikoUIInputSlider(value,min,max,pas);const checkbox=()=>new _ZikoUIInputCheckbox;const select=(...data)=>(new _ZikoUISelect).addOptions(...data);const details=summary=>new _ZikoUIDetails(summary);const image=(src,width,height)=>new _ZikoUIImage(src,width,height);const video=(src,width,height)=>new _ZikoUIVideo(src,width,height);const audio=src=>new _ZikoUIAudio(src);const figure=(image,caption)=>new _ZikoUIFigure(image,caption);const pdf=(src,width,height)=>new _ZikoUIPdf(src,width,height);const svg=(w,h)=>new _ZikoUISvg(w,h);class _ZikoUILayout extends _ZikoUIElement{constructor(){super()}}class _ZikoUIPdf extends _ZikoUILayout{constructor(src="conv2d.pdf",width=50,height=50){super(width,height);this.element=document.createElement("div");this.pdf=document.createElement("object");this.pdf.setAttribute("data",src);this.pdf.setAttribute("width","100%");this.pdf.setAttribute("height","100%");this.element.appendChild(this.pdf);this.style({overflowY:"hidden",overflowX:"hidden"});this.render()}}class _ZikoUIMain extends _ZikoUILayout{constructor(){super();this.element=document.createElement("main");this.render()}}class _ZikoUIHeader extends _ZikoUILayout{constructor(){super();this.element=document.createElement("header");this.render()}}class _ZikoUINav extends _ZikoUILayout{constructor(){super();this.element=document.createElement("nav");this.render()}}class _ZikoUISection extends _ZikoUILayout{constructor(){super();this.element=document.createElement("section");this.style({position:"relative"});this.render()}}class _ZikoUIModal extends _ZikoUISection{static a;constructor(){super();_ZikoUIModal.a=1;this.hide()}open(){this.show();this.update();return this}close(){this.hide();return this}update(){this.style({position:"fixed",boxShadow:"0 1px 5px 0 #222",top:this.pos.y+"px",left:this.pos.x+"px",zIndex:this.element.style.zIndex+1});return this}get pos(){return{x:(window.innerWidth-this.element.clientWidth)/2,y:(window.innerHeight-this.element.clientHeight)/2}}}class _ZikoUIArticle extends _ZikoUILayout{constructor(){super();this.element=document.createElement("article");this.render()}}class _ZikoUIAside extends _ZikoUILayout{constructor(){super();this.element=document.createElement("aside");this.render()}}class _ZikoUIFooter extends _ZikoUILayout{constructor(){super();this.element=document.createElement("footer");this.render()}}class _ZikoUIFlex extends _ZikoUILayout{constructor(w="50vw",h="50vh"){super();this.element=document.createElement("div");this.direction="cols";if(typeof w=="number")w+="%";if(typeof h=="number")h+="%";this.style({border:"1px solid black",width:w,height:h});this.style({display:"flex"});this.render()}__Vertical(direction=1){direction==1?this.style({flexDirection:"column"}):direction==-1&&this.style({flexDirection:"column-reverse"});return this}__Horizontal(direction=1){direction==1?this.style({flexDirection:"row"}):direction==-1&&this.style({flexDirection:"row-reverse"});return this}resp(px,wrap=true){this.wrap(wrap);if(this.element.clientWidth<px)this.vertical();else this.horizontal();return this}spaceAround(){this.style({justifyContent:"space-around"});return this}spaceBetween(){this.style({justifyContent:"space-between"});return this}gap(g){if(this.direction==="row")this.style({columnGap:g});else if(this.direction==="column")this.style({rowGap:g});return this}wrap(value="wrap"){const values=["no-wrap","wrap"];this.style({flexWrap:typeof value==="string"?value:values[+value]});return this}__mapPos(align){let pos=["flex-start","center","flex-end"];if(typeof align==="number")align=pos[align+1];return align}itemX(align,order=1){this.__Vertical(order);this.__alignItems(this.__mapPos(align));return this}__itemY(align,order=1){let pos=["flex-end","center","flex-start"];if(typeof align==="number")align=pos[align+1];this.__Horizontal(order);this.__alignItems(align);return this}__contentX(align){this._justifyContent(this.__mapPos(align));return this}__ContentY(align){let pos=["flex-end","center","flex-start"];if(typeof align==="number")align=pos[align+1];this._justifyContent(this.__mapPos(align));return this}__alignItems(align="center"){this.style({alignItems:align});return this}_justifyContent(align="center"){this.style({justifyContent:align});return this}vertical(item,content,{order=1}={}){this.direction="column";this.itemX(content,order);this.__ContentY(item);return this}horizontal(item,content,{order=1}={}){this.direction="row";this.__itemY(content,order);this.__contentX(item);return this}baseline(){this.style({alignItems:"baseline"});return this}show(){_ZikoUIElement.isHidden=false;this.style({display:"flex"});return this}}class _ZikoUIToggler extends _ZikoUIFlex{constructor(UIControlers=[],UIElements=[]){super();this.icons={show:"››",hide:"‹‹"};this.det=this.merge(UIControlers,UIElements);this.det.map(n=>this.addDetails(...n));this.vertical(0,-1).height("auto")}addDetails(UIControler,UIElement){var icon=text(this.icons.show).center.size("40px","auto").style({fontSize:"2rem",color:"#5252ee"});var UIControlerContainer=Flex(UIControler,icon).horizontal("space-between",0).size("100%","auto").cursor("pointer").border("none");this.append(UIControlerContainer);this.append(UIElement.hide());UIControlerContainer.click(()=>{UIElement.toggle();icon.toggleValues(this.icons.show,this.icons.hide)});return this}merge(arr1,arr2,{flat=0}={}){return arr1.map((n,i)=>n=[n,arr2[i]]).flat(flat)}}class _ZikoUIMenu extends _ZikoUIFlex{constructor(){super();this.attachedUIElement=[];this.vertical()}mapControls(...arr){arr.map((n,i)=>{this.items.push(n[0]);this.controls(n[0],n[1],n[2],n[3]);this.attachedUIElement.push(n[1]);if(i!==0)n[1].hide();this.append(n[0])});return this}controls(UIMenuButton,UIElement,type="normal",t=1){UIMenuButton.click(()=>{this.hideAll();UIElement.show();switch(type.toLowerCase()){case"normal":{};break;case"fade":{UIElement.opacity(0);setTimeout(()=>UIElement.fadeIn(t),1)};break;case"slideheight":{UIElement.slideHeightOut(1);setTimeout(()=>UIElement.slideHeightIn(t),1)};break;case"slidewidth":{UIElement.slideWidthOut(1);setTimeout(()=>UIElement.slideWidthIn(t),1)};break;case"slide":{UIElement.slideOut(1);setTimeout(()=>UIElement.slideIn(t),1)};break;default:{};break}});return this}hideAll(){this.attachedUIElement.map(n=>n.hide());return this}"default"(){this.attachedUIElement[0].show();return this}}class _ZikoUIpageControlers{constructor({pages=null,controlers=null,transition=false,t=1}={}){this.pages=pages;this.controlers=controlers;this.controlers.map((n,i)=>n.click(()=>this.show(i,{transition:transition,t:t})))}hideAll(){this.pages.map(n=>n.hide());return this}show(i,{transition=false,t=1}={}){this.hideAll();if(transition){this.pages[i].opacity(0);setTimeout(()=>this.pages[i].fadeIn(t),1)}this.pages[i].show();return this}}class _ZikoUIMenuJump extends _ZikoUIFlex{constructor(){super();this.element=document.createElement("nav");this.attachedId=[]}controls(UIMenuJumpButton,UIELementId){UIMenuJumpButton.link("#"+UIELementId);return this}mapControls(...arr){arr.map(n=>this.controls(n[0].target(this),n[1]));return this}}class _ZikoUISideNav extends _ZikoUIFlex{constructor(type="push"){super();this.style({display:"flex",height:"100%",width:"0",zIndex:1,top:0,left:0,backgroundColor:"#111",overflowX:"hidden",transition:"0.5s",border:"none"});this._setType(type);this.vertical("space-around",0)}_setType(type="overlay"){this[type]();return this}overlay(){this.style({position:"absolute"});return this}push(){this.style({position:"relative"});return this}open(w="50%"){this.width(w);return this}close(){this.width("0px");return this}}class _ZikoUISideNav2 extends _ZikoUISection{constructor(aside,main){super();this.isOpen=false;this.menu=Section();if(aside)this.menu.append(aside.size("100%","100%").border("none"));this.content=Section().size("auto","100%");if(main)this.content.append(main.size("100%","100%").border("none"));this.append(this.menu,this.content);this.menu.style({position:"absolute",height:"100%",width:"0",zIndex:1,top:0,left:0,overflowX:"hidden",transition:"0.5s",border:"none"})}open({w="50%",orientation="left",push=false}={}){if(orientation==="left"){if(push)this.content.style({marginLeft:w,transition:"0.5s"});this.menu.style({width:w,left:0})}else if(orientation==="right"){if(push)this.content.style({marginRight:w,transition:"0.5s"});this.menu.style({width:w,right:0})}this.isOpen=true;return this}close(){this.content.style({marginLeft:0,transition:"0.5s"});this.menu.width("0px");this.isOpen=false;return this}toggle({w="50%",orientation="left",push=false}={}){if(!this.isOpen)this.open({w:w,orientation:orientation,push:push});else this.close();return this}}class _ZikoUIGrid extends _ZikoUILayout{constructor(w="50vw",h="auto"){super();this.element=document.createElement("div");typeof w=="number"?this.w=w+"vw":this.w=w;typeof h=="number"?this.h=h+"vh":this.h=h;this.style({border:"1px solid black",width:this.w,height:this.h});this.style({display:"grid"});this.render()}columns(n){let temp="";for(let i=0;i<n;i++)temp=temp.concat(" auto");this.templateColumns(temp);return this}resp(minWidth=300){this.templateColumns("repeat(auto-fill,"+minWidth+"px)");return this}templateColumns(temp="auto auto"){this.style({gridTemplateColumns:temp});return this}gap(w=10,h=w){typeof(w=="number")?w+="px":w=w;typeof(h=="number")?h+="px":h=wh;this.style({gridColumnGap:w,gridRowGap:h});return this}posX(value="start"){let pos=["start","center","end"];if(typeof value==="number")value=pos[value+1];this.style({justifyContent:value});return this}posY(value="start"){let pos=["end","center","start"];if(typeof value==="number")value=pos[value+1];this.style({alignContent:value});return this}pos(x="stretch",y="stretch"){this.posX(x);this.posY(y);return this}spaceAround(x,y){x==1&&this.posX("space-around");y==1&&this.posY("space-around");return this}spaceBetween(x,y){x==1&&this.posX("space-between");y==1&&this.posY("space-between");return this}spaceEvenly(x,y){x==1&&this.posX("space-evenly");y==1&&this.posY("space-evenly");return this}xItem(item=0,start=1,end=3){if(item instanceof Array){item.map(n=>{this.element.children[n].style.gridColumnStart=start;this.element.children[n].style.gridColumnEnd=end});return this}this.element.children[item].style.gridColumnStart=start;this.element.children[item].style.gridColumnEnd=end;return this}yItem(item=0,start=1,end=3){if(item instanceof Array){item.map(n=>{this.element.children[n].style.gridRowStart=start;this.element.children[n].style.gridRowEnd=end});return this}this.element.children[item].style.gridRowStart=start;this.element.children[item].style.gridRowEnd=end;return this}area(item=0,xi,yi,xf,yf){this.xItem(item,xi,xf);this.yItem(item,yi,yf);return this}get children(){return[...this.element.children]}show(){_ZikoUIElement.isHidden=false;this.style({display:"grid"});return this}}class _ZikoUITable extends _ZikoUIElement{constructor(matrix=matrix(0,0),{caption=null,head=null,foot=null}={}){super();this.element=document.createElement("table");this.structure={body:this.element.createTBody(),caption:null,head:null,foot:null};this.matrix=matrix;if(caption)this.caption(caption);if(head)this.head(head);if(foot)this.foot(head);this.element.appendChild(this.structure.body);this.fromMatrix(this.matrix);this.style({overflowX:"scroll"});this.cellStyles({wordBreak:"break-all"});this.render()}cellStyles(styles={},{maskMatrix=null,maskVector=null}={}){var Tds=[...this.structure.body.children].map(n=>[...n.children]).flat(1);if(maskMatrix)Tds.filter((n,i)=>maskMatrix.T.arr.flat(1)[i]==1).forEach(n=>style(n,styles));else Tds.map(n=>style(n,styles));if(maskVector)Tds.filter((n,i)=>maskVector[i]==1).forEach(n=>style(n,styles));return this}rowStyles(styles={},{maskVector=null}={}){if(maskVector){[...this.structure.body.children].filter((n,i)=>maskVector[i]==1).forEach(n=>style(n,styles))}else[...this.structure.body.children].map(n=>style(n,styles));return this}T(){this.fromMatrix(this.matrix.T);return this}sortCols(){this.fromMatrix(this.matrix.clone.sortCols());return this}sortRows(){this.fromMatrix(this.matrix.clone.sortRows());return this}sortAll(){this.fromMatrix(this.matrix.clone.sortAll());return this}filterByRows(item){console.log(this.matrix.clone);this.fromMatrix(this.matrix.clone.filterByRows(item));return this}filterByCols(item){this.fromMatrix(this.matrix.clone.filterByCols(item));return this}hstack(m){this.fromMatrix(this.matrix.clone.hstack(m));return this}vstack(m){this.fromMatrix(this.matrix.clone.vstack(m));return this}fromMatrix(matrix){this.element.removeChild(this.structure.body);this.structure.body=this.element.createTBody();this.structure.body.appendChild(matrix.toTable());this.cellStyles({padding:"0.2rem 0.4rem",textAlign:"center"});return this}filterByTextContent(filter){}caption(UIElement){if(this.structure.caption)this.element.deleteCaption();this.structure.caption=this.element.createCaption();this.structure.caption.appendChild(UIElement.element);return this}head(...UIElement){if(this.structure.head)this.element.deleteTHead();this.structure.head=this.element.createTHead();var Tr=document.createElement("tr");var Th=new Array(this.matrix.cols).fill(null).map(n=>document.createElement("th"));UIElement.map((n,i)=>{Th[i].appendChild(n.element)});Th.forEach(n=>Tr.appendChild(n));this.structure.head.appendChild(Tr);this.element.appendChild(this.structure.head);return this}foot(...UIElement){if(this.structure.foot)this.element.deleteTFoot();this.structure.foot=this.element.createTFoot();var Tr=document.createElement("tr");var Th=new Array(this.matrix.T.cols).fill(null).map(n=>document.createElement("th"));UIElement.map((n,i)=>n.target(Th[i]));Th.forEach(n=>Tr.appendChild(n));this.structure.foot.appendChild(Tr);this.element.appendChild(this.structure.foot);return this}sortTable(n,config={type:"num",order:"asc"}){this.fromMatrix(this.matrix.clone.sortTable(n,config));return this}reset(){this.fromMatrix(this.matrix);return this}}var Table=(matrix,config)=>new _ZikoUITable(matrix,config);class _ZikoUICarousel extends _ZikoUIFlex{constructor(..._ZikoUIElement){super();this.a=99;this.style({position:"relative",overflow:"hidden",touchAction:"none",userSelect:"none"});this.horizontal("space-around",0);this.track=Section(..._ZikoUIElement).style({display:"inline-flex"});this.track.size(this.track.children.length*100+"vw");this.append(this.track);delete this.a;this.track.items.map(n=>n.style({pointerEvents:"none",margin:"auto 10px"}));this.initialPos=null;this.down=false;this.transform=0;this.pointerdown(e=>this.handleDown(e));this.pointermove(e=>this.handleMove(e));this.pointerup(e=>this.handleUp(e));this.pointerleave(e=>this.handleUp(e))}addTrack(..._ZikoUIElement){this.track.append(..._ZikoUIElement);this.track.size(this.track.children.length*100+"vw");this.track.items.map(n=>n.style({pointerEvents:"none",margin:"auto 10px"}));return this}setTrack(track){this.track=track;return this}handleMove(e){if(this.down){let currentPos=e.pageX;let diff=currentPos-this.initialPos;let newTransform=this.transform+diff;this.items[0].translateX(newTransform,0)}}handleDown(e){this.down=true;this.initialPos=e.pageX;const transformMatrix=window.getComputedStyle(this.children[0]).getPropertyValue("transform");if(transformMatrix!=="none"){this.transform=+transformMatrix.split(",")[4]}}handleUp(e){this.down=false}}class _ZikoUINotes extends _ZikoUISection{constructor(){super();this.style({padding:"5px"});this.render()}Danger(){this.style({background:"#ffdddd",borderLeft:"6px red solid"});return this}Warning(){this.style({background:"#ffffcc",borderLeft:"6px #ffeb3b solid"});return this}Info(){this.style({background:"#e7f3f3",borderLeft:"6px #2196f3 solid"});return this}Succes(){this.style({background:"#ddffdd",borderLeft:"6px #04aa6d solid"});return this}}class _ZikoUIPrint extends _ZikoUIElement{constructor(lineBreak=false,...e){super();delete _ZikoUIElement.Flip;delete this.items;delete _ZikoUIElement.isHidden;delete this.memory;this.element=document.createElement("div");this.lineBreak=lineBreak;this.render();for(let i=0;i<e.length;i++){let x=e[i];if(typeof x=="string"||typeof x=="number"||typeof x=="boolean"){text(x).target(this.element);lineBreak&&br(1).target(this.element)}else{if(x===null){text("null").target(this.element);lineBreak&&br(1).target(this.element)}else if(typeof x=="undefined"){text("undefined").target(this.element);lineBreak&&br(1).target(this.element)}else if(x instanceof Ziko.Math.Matrix||x instanceof Ziko.Math.Complex||x instanceof Ziko.Math.Suite)text(x).target(this.element);else if(x instanceof Array||x instanceof Set){if(x instanceof Set)x=[...x];x=matrix([x]);let string="[";for(let j=0;j<x.arr.length;j++)string+=(j!=0?" ":"")+` [${x.arr[j].map(n=>" "+n.toString()+" ")}],</br>`;string=string.substring(0,string.length-6)+"]";string=string.slice(1,-1);text(string).target(this.element)}else if(x instanceof Map){x=Object.fromEntries(x);for(let i in x)print(i,x[i])}else if(x instanceof Object){for(let i in x)print(i,x[i])}}text("  ").target(this.element)}br(1).target(this.element)}}var UI={Symbols:Symbols,print:(...a)=>new _ZikoUIPrint(false,...a),println:(...a)=>new _ZikoUIPrint(true,...a),text:text,btn:btn,p:p,h1:h1,h2:h2,h3:h3,h4:h4,h5:h5,h6:h6,ol:ol,ul:ul,br:br,hr:hr,progress:progress,image:image,video:video,audio:audio,input:input,datalist:datalist,inputNumber:inputNumber,search:search,inputPassword:inputPassword,inputEmail:inputEmail,inputColor:inputColor,inputTime:inputTime,inputDate:inputDate,inputDateTime:inputDateTime,slider:slider,checkbox:checkbox,select:select,details:details,Header:Header,Footer:Footer,Main:Main,Aside:Aside,Nav:Nav,Section:Section,Article:Article,Table:Table,Grid:Grid,Flex:Flex,Carousel:Carousel,Modal:Modal,SideNav:SideNav,SideNav2:SideNav2,Toggler:Toggler,Note:Note,Menu:Menu,pageControlers:pageControlers,MenuJump:MenuJump,Root:Root,_ZikoUIElement:_ZikoUIElement,_ZikoUISection:_ZikoUISection,Id:Id,Class:Class,style:style,script:script,linkStyle:linkStyle,loadJSON:loadJSON,ExtractAll:function(){for(let i=0;i<Object.keys(Ziko.UI).length;i++){window[Object.keys(Ziko.UI)[i]]=Object.values(Ziko.UI)[i]}return this},RemoveAll:function(){for(let i=0;i<Object.keys(Ziko.UI).length;i++)delete window[Object.keys(Ziko.UI)[i]];return this}};Object.assign(Ziko.UI,UI)}})();"use strict";Number.prototype.add=function(n){if(typeof n=="number")return this+n;else if(n instanceof Ziko.Math.Complex)return Ziko.Math.complex(this+n.a,n.b);else if(n instanceof Ziko.Math.Matrix)return Ziko.Math.Matrix.numbers(n.rows,n.cols,this).add(n);else if(n instanceof Array){let sum=0;sum=n.map(n=>{if(n instanceof Array)return n.map(m=>this.valueOf().add(m));else return this.valueOf().add(n)});return sum}};Number.prototype.sub=function(n){if(typeof n=="number")return this-n;else if(n instanceof Ziko.Math.Complex)return Ziko.Math.complex(n.a-this,n.b);else if(n instanceof Ziko.Math.Matrix)return Ziko.Math.Matrix.numbers(n.rows,n.cols,this).sub(n);else if(n instanceof Array){let sum=0;sum=n.map(n=>{if(n instanceof Array)return n.map(m=>this.valueOf().sub(m));else return this.valueOf().sub(n)});return sum}};Number.prototype.mul=function(n){if(typeof n=="number")return this*n;else if(n instanceof Ziko.Math.Complex)return Ziko.Math.complex(n.a*this,n.b*this);else if(n instanceof Ziko.Math.Matrix)return Ziko.Math.Matrix.numbers(n.rows,n.cols,this).mul(n);else if(n instanceof Array){let sum=0;sum=n.map(n=>{if(n instanceof Array)return n.map(m=>this.valueOf().mul(m));else return this.valueOf().mul(n)});return sum}};Number.prototype.div=function(n){if(typeof n==="number")return this/n;else if(n instanceof Ziko.Math.Complex)return Ziko.Math.complex(this/n.a,this/n.b);else if(n instanceof Ziko.Math.Matrix)return Ziko.Math.Matrix.numbers(n.rows,n.cols,this).div(n);else if(n instanceof Array){let sum=0;sum=n.map(n=>{if(n instanceof Array)return n.map(m=>this.valueOf().div(m));else return this.valueOf().div(n)});return sum}};Number.prototype.modulo=function(n){if(typeof n==="number")return this%n;else if(n instanceof Ziko.Math.Complex)return Ziko.Math.complex(this%n.a,this%n.b);else if(n instanceof Ziko.Math.Matrix)return Ziko.Math.Matrix.numbers(n.rows,n.cols,this).modulo(n);else if(n instanceof Array){let remainder=0;remainder=n.map(n=>{if(n instanceof Array)return n.map(m=>this.valueOf().modulo(m));else return this.valueOf().modulo(n)});return remainder}};Object.defineProperties(Number.prototype,{isOdd:{get:function(){return this%2==1}},isArmstrong:{get:function(){if(this<0)return false;else{let sum=0;let temp=(""+this.valueOf()).split("").map(n=>+n);let l=(""+this).length;return temp.map(n=>pow(n,l)).Somme==this.valueOf()}}},isAmicaux:{value:function(nbr){return this.allDivisors.somme===nbr.allDivisors.somme}},toComplex:{get:function(){return Ziko.Math.complex(this,0)}},toBase:{value:function(base){return(this>>>0).toString(base)}},toBin:{get:function(){return(this>>>0).toString(2)}},toHex:{get:function(){return(this>>>0).toString(16)}},toOct:{get:function(){return(this>>>0).toString(8)}},allDivisors:{get:function(){let dev=[],i=0,val=this.valueOf();for(i=1;i<=val/2;i++)val%i==0&&dev.push(i);dev.push(val);return dev}},isPrime:{get:function(){return this.allDivisors.length==2}}});Object.defineProperties(Array.prototype,{clone:{get:function(){let arr=new Array(this.length);for(let i=0;i<this.length;i++)arr[i]=this[i];return arr}},remove:{value:function(...item){let arr=this;item.map(n=>arr=arr.filter(a=>a!=n));return arr}},reel:{get:function(){return this.map(n=>{if(n instanceof Ziko.Math.Complex)return n.a})}},imag:{get:function(){if(n instanceof Ziko.Math.Complex)return n.b}},clip:{value:function(min,max){return this.filter(n=>n>=min&&n<=max)}},add:{value:function(n){if(typeof n==="number")return this.map(m=>m.add(n));else if(n instanceof Array){let nLength=n.length;let thisLength=this.length;let l=Math.max(nLength,thisLength);n.length=l;this.length=l;n.fill(0,nLength,l);this.fill(0,thisLength,l);return this.map((m,i)=>m.add(n[i]))}}},sub:{value:function(n){if(typeof n==="number")return this.map(m=>m.sub(n));else if(n instanceof Array){let nLength=n.length;let thisLength=this.length;let l=Math.max(nLength,thisLength);n.length=l;this.length=l;n.fill(0,nLength,l);this.fill(0,thisLength,l);return this.map((m,i)=>m.sub(n[i]))}}},mul:{value:function(n){if(typeof n==="number")return this.map(m=>m.mul(n));else if(n instanceof Array){let nLength=n.length;let thisLength=this.length;let l=Math.max(nLength,thisLength);n.length=l;this.length=l;n.fill(1,nLength,l);this.fill(1,thisLength,l);return this.map((m,i)=>m.mul(n[i]))}}},div:{value:function(n){if(typeof n==="number")return this.map(m=>m.div(n));else if(n instanceof Array){let nLength=n.length;let thisLength=this.length;let l=Math.max(nLength,thisLength);n.length=l;this.length=l;n.fill(1,nLength,l);this.fill(1,thisLength,l);return this.map((m,i)=>m.div(n[i]))}}},modulo:{value:function(n){if(typeof n==="number")return this.map(m=>m.modulo(n));else if(n instanceof Array){let nLength=n.length;let thisLength=this.length;let l=Math.max(nLength,thisLength);n.length=l;this.length=l;n.fill(1,nLength,l);this.fill(1,thisLength,l);return this.map((m,i)=>m.modulo(n[i]))}}},isOdd:{get:function(){return this.map(n=>n.isOdd)}},isArmstrong:{get:function(){return this.map(n=>n.isArmstrong)}},allDivisors:{get:function(){return this.map(n=>n.allDivisors)}},isPrime:{get:function(){return this.map(n=>n.isPrime)}},min:{get:function(){return min(this.flat(Infinity))}},max:{get:function(){return max(this.flat(Infinity))}},somme:{get:function(){return somme(...this.valueOf())}},produit:{get:function(){return produit(...this.valueOf())}},comp:{value:function(arr){return JSON.stringify(this)===JSON.stringify(arr)}},moy:{get:function(){return Ziko.Math.Statistique.moy(...this)}},med:{get:function(){return Ziko.Math.Statistique.med(...this)}},"var":{get:function(){return Ziko.Math.Statistique.variance(...this)}},std:{get:function(){return Ziko.Math.Statistique.std(...this)}},mode:{get:function(){return Ziko.Math.Statistique.mode(...this)}},min2max:{get:function(){return Ziko.Math.Statistique.min2max(...this)}},max2min:{get:function(){return Ziko.Math.Statistique.max2min(...this)}},accum:{get:function(){return Ziko.Math.Statistique.accum(...this)}},percentile:{value:function(val){return Ziko.Math.Statistique.percentile(...this)}},permS:{get:function(){return permutationS(this)}},permA:{value:function(l=this.length){return permutationA(this,l)}},Norm:{value:function(min,max){return Outils.norm(this,min,max)}},Lerp:{value:function(min,max){return Outils.lerp(this,min,max)}},Map:{value:function(a,b,c,d){return Outils.map(this,a,b,c,d)}},Clamp:{value:function(min,max){return Outils.clamp(this,min,max)}},toBin:{get:function(){return this.toBase(2)}},toHex:{get:function(){return this.toBase(16)}},toOct:{get:function(){return this.toBase(8)}},toBase:{value:function(base){return this.map(n=>n.toBase(base))}},toMatr:{get:function(){return matrix(this)}},union:{value:function(arr){return[...new Set(this.concat(arr))]}},intersect:{value:function(arr){arr=new Set(arr);return[...new Set([...this].filter(x=>arr.has(x)))]}},not:{get:function(){return this.map(n=>n.not)}},and:{value:function(...bool){return this.map(n=>n.and(bool))}},or:{value:function(...bool){return this.map(n=>n.or(bool))}},nand:{value:function(...bool){return this.map(n=>n.nand(bool))}},nor:{value:function(...bool){return this.map(n=>n.nor(bool))}},xor:{value:function(bool){return this.map(n=>n.xor(bool))}},haveSameContents:{value:function(arr){return this.min2max.comp(arr.min2max)}}});Object.defineProperties(Boolean.prototype,{not:{get:function(){return!Boolean(this)}},and:{value:function(...bool){let and=1,i;for(i=0;i<bool.length;i++)and=and&&bool[i];return and}},or:{value:function(...bool){let or=0,i;for(i=0;i<bool.length;i++)or=or||bool[i];return or}},nand:{value:function(...bool){return!this.and(this,...bool)}},nor:{value:function(...bool){return!this.or(this,...bool)}}});Object.defineProperties(Math,{eval:{value:function(expression){return eval(expression)}}});(function(){var{PI,E}=Math;var min=(...x)=>Math.min(...x);var max=(...x)=>Math.max(...x);var fact=n=>{let i,y=1;if(n==0)y=1;else if(n>0)for(i=1;i<=n;i++)y*=i;else y=NaN;return y};class MathFunctions{constructor(x){this.x=x;this.func=null;this.precision=10}get value(){if(typeof this.x==="number")return+this.func(this.x).toFixed(this.precision);else if(this.x instanceof Array)return this.x.map(n=>+this.func(n).toFixed(this.precision));else if(this.x instanceof Matrix)return new Matrix(this.x.rows,this.x.cols,this.x.arr.flat(1).map(n=>+this.func(n).toFixed(this.precision)));else if(this.x instanceof Complex)return new Complex(+this.func(this.x.a).toFixed(this.precision),+this.func(this.x.b).toFixed(this.precision))}changePrecision(p){this.precision=Outils.clamp(p,0,100);return this}setParametre({precision=10}={}){this.changePrecision(precision);return this}}class TrigonometricFunctions extends MathFunctions{constructor(x){super(x);this.mode="rad"}setMode(m="rad"){this.mode=m;return this}changeMode(m){if(m===this.mode)return this;else this.setMode(m);if(this.mode==="deg")this.x=Outils.deg2rad(this.x);else if(this.mode==="rad")this.x=Outils.rad2deg(this.x);return this}setParametre({precision=10,mode="rad"}={}){this.changeMode(mode);this.changePrecision(precision);return this}}class ReciprocalTrigonometricFunctions extends TrigonometricFunctions{constructor(x){super(x)}changeMode(m){if(m===this.mode)return this;else this.setMode(m)}get value(){if(this.mode==="rad"){if(typeof this.x==="number")return+this.func(this.x).toFixed(this.precision);else if(this.x instanceof Array)return this.x.map(n=>+this.func(n).toFixed(this.precision))}else if(this.mode==="deg"){if(typeof this.x==="number")return+Outils.rad2deg(this.func(this.x)).toFixed(this.precision);else if(this.x instanceof Array)return Outils.rad2deg(this.x.map(n=>+this.func(n).toFixed(this.precision)))}}}class Cos extends TrigonometricFunctions{constructor(x){super(x);this.func=Math.cos}}class Sin extends TrigonometricFunctions{constructor(x){super(x);this.func=Math.sin}}class Tan extends TrigonometricFunctions{constructor(x){super(x);this.func=Math.tan}}class Acos extends ReciprocalTrigonometricFunctions{constructor(x){super(x);this.func=Math.acos}}class Asin extends ReciprocalTrigonometricFunctions{constructor(x){super(x);this.func=Math.asin}}class Atan extends ReciprocalTrigonometricFunctions{constructor(x){super(x);this.func=Math.atan}}class Abs extends MathFunctions{constructor(x){super(x);this.func=Math.abs}}class Sqrt extends MathFunctions{constructor(x){super(x);this.func=Math.sqrt}}class Ln extends MathFunctions{constructor(x){super(x);this.func=Math.log}}class Exp extends MathFunctions{constructor(x){super(x);this.func=Math.exp}}class Sign extends MathFunctions{constructor(x){super(x);this.func=Math.sign}}class Floor extends MathFunctions{constructor(x){super(x);this.func=Math.floor}}class Ceil extends MathFunctions{constructor(x){super(x);this.func=Math.ceil}}class Round extends MathFunctions{constructor(x){super(x);this.func=Math.round}}class Cosh extends MathFunctions{constructor(x){super(x);this.func=Math.cosh}}class Sinh extends MathFunctions{constructor(x){super(x);this.func=Math.sinh}}class Tanh extends MathFunctions{constructor(x){super(x);this.func=Math.tanh}}class Acosh extends MathFunctions{constructor(x){super(x);this.func=Math.acosh}}class Asinh extends MathFunctions{constructor(x){super(x);this.func=Math.asinh}}class Atanh extends MathFunctions{constructor(x){super(x);this.func=Math.atanh}}var cos=(x,parametre={precision:10,mode:"rad"})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>cos(n));return y}return new Cos(x).setParametre(parametre).value};var sin=(x,parametre={precision:10,mode:"rad"})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>sin(n));return y}return new Sin(x).setParametre(parametre).value};var tan=(x,parametre={precision:10,mode:"rad"})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>tan(n));return y}return new Tan(x).setParametre(parametre).value};var abs=(x,parametre={precision:10})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>abs(n));return y}return new Abs(x).setParametre(parametre).value};var sqrt=(x,parametre={precision:10})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>sqrt(n));return y}return new Sqrt(x).setParametre(parametre).value};var e=(x,parametre={precision:10})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>e(n));return y}return new Exp(x).setParametre(parametre).value};var ln=(x,parametre={precision:10})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>ln(n));return y}return new Ln(x).setParametre(parametre).value};var acos=(x,parametre={precision:10,mode:"rad"})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>acos(n));return y}return new Acos(x).setParametre(parametre).value};var asin=(x,parametre={precision:10,mode:"rad"})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>asin(n));return y}return new Asin(x).setParametre(parametre).value};var atan=(x,parametre={precision:10,mode:"rad"})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>atan(n));return y}return new Atan(x).setParametre(parametre).value};var cosh=(x,parametre={precision:10})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>cosh(n));return y}return new Cosh(x).setParametre(parametre).value};var sinh=(x,parametre={precision:10})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>Sinh(n));return y}return new Sinh(x).setParametre(parametre).value};var tanh=(x,parametre={precision:10})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>tanh(n));return y}return new Tanh(x).setParametre(parametre).value};var acosh=(x,parametre={precision:10})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>acosh(n));return y}return new Acosh(x).setParametre(parametre).value};var asinh=(x,parametre={precision:10})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>asinh(n));return y}return new Asinh(x).setParametre(parametre).value};var atanh=(x,parametre={precision:10})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>atanh(n));return y}return new Atanh(x).setParametre(parametre).value};var sign=(x,parametre={precision:2})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>sign(n));return y}return new Sign(x).setParametre(parametre).value};var floor=(x,parametre={precision:2})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>floor(n));return y}return new Floor(x).setParametre(parametre).value};var ceil=(x,parametre={precision:2})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>ceil(n));return y}return new Ceil(x).setParametre(parametre).value};var round=(x,parametre={precision:2})=>{if(x instanceof Array&&x.some(n=>typeof n!=="number")){let y=new Array(x.length);y=x.map(n=>Round(n));return y}return new Round(x).setParametre(parametre).value};var pow=(x,n)=>{if(typeof n==="number")if(typeof x==="number")return Math.pow(x,n);else return x.map(m=>Math.pow(m,n));else if(n instanceof Array){if(typeof x==="number")return n.map(m=>Math.pow(x,m))}};var sqrtn=(x,n)=>{let s=(x,n)=>this.e(this.ln(x)/n);if(typeof n==="number")if(typeof x==="number")return s(x,n);else return x.map(m=>s(m,n));else if(n instanceof Array){if(typeof x==="number")return n.map(m=>s(x,m))}};var hypot=()=>Math.hypot;var sig=x=>typeof x=="number"?1/(1+e(-x)):x.map(n=>1/(1+e(-n)));var atan2=(x,y)=>Math.atan2(y,x);var cartesianProduct=(a,b)=>a.reduce((p,x)=>[...p,...b.map(y=>[x,y])],[]);var zeros=n=>new Array(n).fill(0);var ones=n=>new Array(n).fill(1);var numbers=(num,n)=>new Array(n).fill(num);class Random{static rand(a=1,b){return b?Math.random()*(b-a)+a:a*Math.random()}static randInt(a,b){return Math.floor(Random.rand(a,b))}static get randBin(){return Random.randInt(2)}static get randOct(){return Random.randInt(8)}static get randHex(){return Random.randInt(16)}static choice(choices=[1,2,3],p=new Array(choices.length).fill(1/choices.length)){let newchoice=new Array(100);p=p.accum.map(n=>n*100);newchoice.fill(choices[0],0,p[0]);for(let i=1;i<choices.length;i++)newchoice.fill(choices[i],p[i-1],p[i]);return newchoice[Random.randInt(newchoice.length-1)]}static shuffle(arr){return arr.sort((a,b)=>.5-Math.random())}static rands(n,a,b){return new Array(n).fill(0).map(n=>Random.rand(a,b))}static randsInt(n,a,b){return new Array(n).fill(0).map(n=>Random.randInt(a,b))}static randsBin(n){return new Array(n).fill(0).map(n=>Random.randInt(2))}static randsOct(n){return new Array(n).fill(0).map(n=>Random.randInt(8))}static randsHex(n){return new Array(n).fill(0).map(n=>Random.randInt(16))}static choices(n,choices,p){return new Array(n).fill(0).map(n=>Random.randChoices(choices,p))}static permutation(...arr){return arr.permS[Random.randInt(arr.length)]}static get randomHexColor(){return"#"+BaseConversion.dec2hex(Random.rand(16777216)).padStart(6,0)}static randComplex(a=0,b=1){return new Complex(...Random.rands(2,a,b))}static randIntComplex(a=0,b=1){return new Complex(...Random.randsInt(2,a,b))}static get randBinComplex(){return new Complex(...Random.randsBin(2))}static get randOctComplex(){return new Complex(...Random.randsOct(2))}static get randHexComplex(){return new Complex(...Random.randsOct(2))}static randsComplex(n,a=0,b=1){return new Array(n).fill(0).map(n=>Random.randComplex(a,b))}static randsIntComplex(n,a=0,b=1){return new Array(n).fill(0).map(n=>Random.randIntComplex(a,b))}static randsBinComplex(n){return new Array(n).fill(0).map(n=>Random.randBinComplex)}static randsOctComplex(n){return new Array(n).fill(0).map(n=>Random.randOctComplex)}static randsHexComplex(n){return new Array(n).fill(0).map(n=>Random.randHexComplex)}}class Complex{constructor(a=0,b=0){this.a=+a.toFixed(5);this.b=+b.toFixed(5);this.z=+Math.hypot(a,b).toFixed(5);this.phi=+atan(b/a).toFixed(5)}static get ZERO(){return new Complex(0,0)}get conj(){return new Complex(this.a,-this.b)}get inv(){return new Complex(this.a/(pow(this.a,2)+pow(this.b,2)),-this.b/(pow(this.a,2)+pow(this.b,2)))}add(...z){for(let i=0;i<z.length;i++){if(typeof z[i]==="number")z[i]=new Complex(z[i],0)}let re=z.map(n=>n.a);let im=z.map(n=>n.b);return new Complex(this.a+somme(...re),this.b+somme(...im))}sub(...z){for(let i=0;i<z.length;i++){if(typeof z[i]==="number")z[i]=new Complex(z[i],0)}let re=z.map(n=>n.a);let im=z.map(n=>n.b);return new Complex(this.a-somme(...re),this.b-somme(...im))}mul(c){if(c instanceof Complex)return new Complex(this.a*c.a-this.b*c.b,this.a*c.b+this.b*c.a);else return new Complex(this.a*c,this.b*c)}div(c){if(c instanceof Complex){let reel=(this.a*c.a+this.b*c.b)/(c.a**2+c.b**2);let imaginaire=(this.b*c.a-this.a*c.b)/(c.a**2+c.b**2);return new Complex(reel,imaginaire)}else return new Complex(this.a/c,this.b/c)}pow(n){if(floor(n)===n&&n>0){let newZ=this;for(let i=0;i<n-1;i++)newZ=newZ.mul(this);return newZ}else return new Complex(this.z**n*cos(deg2rad(this.phi*n)),this.z**n*sin(deg2rad(this.phi*n)))}static expo(z,phi){return new Complex(z*cos(phi),z*sin(phi))}get expo(){return[this.z,this.phi]}static add(...z){let reel=z.map(n=>n.a);let im=z.map(n=>n.b);return new Complex(somme(...reel),somme(...im))}static sub(...z){let re=z.map(n=>n.a).shift();let im=z.map(n=>n.b).shift();return new Complex(z[0].a-somme(...re),z[0].b-somme(...im))}static mul(c1,c2){return new Complex(c1.a*c2.a-c1.b*c2.b,c1.a*c2.b+c1.b*c2.a)}static div(c1,c2){if(c2 instanceof Complex){let reel=(c1.a*c2.a+c1.b*c2.b)/(c2.a**2+c2.b**2);let imaginaire=(c1.b*c2.a-c1.a*c2.b)/(c2.a**2+c2.b**2);return new Complex(reel,imaginaire)}else return new Complex(c1.a/c2,c1.b/c2)}printInConsole(){let string=this.a+" + "+this.b+" * i";console.log(string);return string}print(){return text(this.a+" + i * "+this.b)}UI(){return"<span>"+this.a+" + i * "+this.b+"</span>"}}class Matrix{constructor(rows,cols,element=[]){let arr=[],i,j;if(arguments[0]instanceof Array){rows=arguments[0].length;cols=arguments[0][0].length;arr=arguments[0]}else{for(i=0;i<rows;i++){arr.push([]);arr[i].push(new Array(cols));for(j=0;j<cols;j++){arr[i][j]=element[i*cols+j];if(element[i*cols+j]==undefined)arr[i][j]=0}}}this.rows=rows;this.cols=cols;this.arr=arr;Object.seal(this)}reshape(newRows,newCols){let check=newRows*newCols===this.rows*this.cols;if(check)return new Matrix(newRows,newCols,this.arr.flat(1));else console.error("Err")}static eye(size){let result=new Matrix(size,size);for(let i=0;i<size;i++)for(let j=0;j<size;j++)i===j?result.arr[i][j]=1:result.arr[i][j]=0;return result}get clone(){return new Matrix(this.rows,this.cols,this.arr.flat(1))}get size(){return this.rows*this.cols}get shape(){return[this.rows,this.cols]}get reel(){return new Matrix(this.cols,this.rows,this.arr.flat(1).reel)}get imag(){return new Matrix(this.cols,this.rows,this.arr.flat(1).imag)}get(row=0,col=0){if(col==-1)return this.arr[row];else if(row==-1)return this.arr.map(n=>n[col]);else return this.arr[row][col]}set(row=0,col=0,value){if(col==-1)return this.arr[row]=value;else if(row==-1){for(let i=0;i<this.cols;i++){this.arr[i][col]=value[i]||0}return this.arr}return this.arr[row][col]=value}get isSquare(){return this.rows/this.cols===1}get isSym(){if(!this.isSquare)return false;const T=this.T;const M=this.clone;return Matrix.sub(M,T).max==0&&Matrix.sub(M,T).min==0}get isAntiSym(){if(!this.isSquare)return false;const T=this.T;const M=this.clone;return Matrix.add(M,T).max==0&&Matrix.add(M,T).min==0}get isDiag(){if(!this.isSquare)return false;const T=this.T;const M=this.clone;const MT=Matrix.mul(M,T);const TM=Matrix.dot(T,M);return Matrix.sub(MT,TM).max==0&&Matrix.sub(MT,TM).min==0}get isOrtho(){if(!this.isSquare)return false;return this.isDiag&&(this.det==1||this.det==-1)}get isIdemp(){if(!this.isSquare)return false;const M=this.clone;const MM=Matrix.dot(M,M);return Matrix.sub(MM,M).max==0&&Matrix.sub(MM,M).min==0}get T(){let transpose=[];for(let i=0;i<this.arr[0].length;i++){transpose[i]=[];for(let j=0;j<this.arr.length;j++){transpose[i][j]=this.arr[j][i]}}return new Matrix(this.cols,this.rows,transpose.flat(1))}get det3(){if(!this.isSquare)return;if(this.rows==1)return this.arr[0][0];function determinat(M){if(M.length==2){console.log(2);if(M.flat(1).some(n=>n instanceof Matrix)){console.warn("Tensors are not completely supported yet ...");return}return M[0][0].mul(M[1][1]).sub(M[0][1].mul(M[1][0]))}var answer=0;for(var i=0;i<M.length;i++){console.log(M[0][i]);answer=answer.add(pow(-1,i).mul(M[0][i]).mul(determinat(deleteRowAndColumn(M,i))))}return answer}function deleteRowAndColumn(M,index){var temp=[];for(let i=0;i<M.length;i++)temp.push(M[i].slice(0));temp.splice(0,1);for(let i=0;i<temp.length;i++)temp[i].splice(index,1);return temp}return determinat(this.arr)}get inv(){if(!this.isSquare)return;if(this.det===0)return"determinat = 0 !!!";let A=InverseMatrixe(this.arr);return new Matrix(this.rows,this.cols,A.flat(1))}static zeros(rows,cols){let result=new Matrix(rows,cols);for(let i=0;i<rows;i++)for(var j=0;j<cols;j++)result.arr[i][j]=0;return result}static ones(rows,cols){let result=new Matrix(rows,cols);for(let i=0;i<rows;i++)for(let j=0;j<cols;j++)result.arr[i][j]=1;return result}static numbers(rows,cols,number){let result=new Matrix(rows,cols);for(let i=0;i<rows;i++)for(let j=0;j<cols;j++)result.arr[i][j]=number;return result}static rands(rows,cols,a=1,b){let result=new Matrix(rows,cols);for(let i=0;i<rows;i++)for(let j=0;j<cols;j++)result.arr[i][j]=Random.rand(a,b);return result}static randsInt(rows,cols,a,b){let result=new Matrix(rows,cols);for(let i=0;i<rows;i++)for(let j=0;j<cols;j++)result.arr[i][j]=Random.randInt(a,b);return result}static randsBin(rows,cols){let result=new Matrix(rows,cols);for(let i=0;i<rows;i++){for(let j=0;j<cols;j++)result.arr[i][j]=Random.randBin}return result}static randsHex(rows,cols){let result=new Matrix(rows,cols);for(let i=0;i<rows;i++){for(let j=0;j<cols;j++)result.arr[i][j]=Random.randHex}return result}static randsChoices(rows,cols,choices,p){let result=new Matrix(rows,cols);for(let i=0;i<rows;i++)for(let j=0;j<cols;j++)result.arr[i][j]=Random.Choices(choices,p);return result}static randPermutation(rows,cols,arr){return new Matrix(rows,cols,Random.permutation(...arr))}map(fct){var array=this.arr.flat(1);return new Matrix(this.rows,this.cols,array.map(n=>fct(n)))}static map(m,fct){var array=m.arr.flat(1);return new Matrix(m.rows,m.cols,array.map(n=>fct(n)))}Map(Imin,Imax,Fmin,Fmax){return Outils.map(this,Imin,Imax,Fmin,Fmax)}Lerp(min,max){return Outils.lerp(this,min,max)}Norm(min,max){return Outils.norm(this,min,max)}Clamp(min,max){return Outils.clamp(this,min,max)}static Map(matrix,Imin,Imax,Fmin,Fmax){return Outils.map(matrix,Imin,Imax,Fmin,Fmax)}static Lerp(matrix,min,max){return Outils.lerp(m,min,max)}static Norm(matrix,min,max){return Outils.norm(matrix,min,max)}static Clamp(m,min,max){return Outils.clamp(matrix,min,max)}toPrecision(p){for(let i=0;i<this.cols;i++)for(let j=0;j<this.rows;j++)this.arr[i][j]=+this.arr[i][j].toPrecision(p);return this}get toBin(){let newArr=this.arr.flat(1).toBin;return new Matrix(this.rows,this.cols,newArr)}get toOct(){let newArr=this.arr.flat(1).toOct;return new Matrix(this.rows,this.cols,newArr)}get toHex(){let newArr=this.arr.flat(1).toHex;return new Matrix(this.rows,this.cols,newArr)}get isOdd(){let newArr=this.arr.flat(1).isOdd;return new Matrix(this.rows,this.cols,newArr)}max2min(){let newArr=this.arr.flat(1).max2min;return new Matrix(this.rows,this.cols,newArr)}min2max(){let newArr=this.arr.flat(1).min2max;return new Matrix(this.rows,this.cols,newArr)}sortRows(calback=undefined){let newArr=this.arr.map(n=>n.sort(calback)).flat(1);return new Matrix(this.rows,this.cols,newArr)}sortCols(calback=undefined){let m=this.T;let newArr=m.arr.map(n=>n.sort(calback)).flat(1);return new Matrix(this.rows,this.cols,newArr).T}filterByRows(item){var truth=this.arr.map(n=>n.map(m=>+(""+m).includes(item)));var mask=truth.map(n=>!!Logique.or(...n));var filtredArray=this.arr.filter((n,i)=>mask[i]===true);if(filtredArray.length===0)filtredArray.push([]);console.log(filtredArray);return new Matrix(filtredArray)}filterByCols(item){return new Matrix(this.T.arr.filter(n=>n.includes(item)))}sortAll(calback=undefined){let newArr=this.arr.flat(1).sort(calback);return new Matrix(this.rows,this.cols,newArr)}count(n){return this.arr.flat(1).count(n)}toBase(n){let newArr=this.arr.flat(1).toBase(n);return new Matrix(this.rows,this.cols,newArr)}hstack(matrix){if(this.rows!==matrix.rows)return;let newArr=this.arr;for(let i=0;i<this.rows;i++)for(let j=this.cols;j<this.cols+matrix.cols;j++)newArr[i][j]=matrix.arr[i][j-this.cols];this.cols+=matrix.cols;return new Matrix(this.rows,this.cols,newArr.flat(1))}static hstack(m1,m2){return m1.clone.hstack(m2)}vstack(matrix){if(this.cols!==matrix.cols)return;let newArr=this.arr;for(let i=this.rows;i<this.rows+matrix.rows;i++){newArr[i]=[];for(let j=0;j<this.cols;j++)newArr[i][j]=matrix.arr[i-this.rows][j]}this.rows+=matrix.rows;return new Matrix(this.rows,this.cols,newArr.flat(1))}static vstack(m1,m2){return m1.clone.vstack(m2)}slice(rowStart,colStart,rowEnd,colEnd){let newRow=rowEnd-rowStart,newCol=colEnd-colStart;let newArr=new Array(newCol);for(let i=0;i<newRow;i++){newArr[i]=[];for(let j=0;j<newCol;j++)newArr[i][j]=this.arr[i+rowStart][j+colStart]}return new Matrix(newRow,newCol,newArr.flat(1))}static slice(m1,rowStart,colStart,rowEnd,colEnd){return m1.slice(rowStart,colStart,rowEnd,colEnd)}getRows(ri,rf=ri+1){return this.slice(ri,0,rf,this.cols)}getCols(ci,cf=ci+1){return this.slice(0,ci,this.rows,cf)}static getRows(m,ri,rf=ri+1){return m.slice(ri,0,rf,m.cols)}static getCols(m,ci,cf=ci+1){return m.slice(0,ci,m.rows,cf)}add(...matr){for(let k=0;k<matr.length;k++){if(typeof matr[k]=="number")matr[k]=Matrix.numbers(this.rows,this.cols,matr[k]);for(let i=0;i<this.rows;i++)for(var j=0;j<this.cols;j++)this.arr[i][j]=this.arr[i][j].add(matr[k].arr[i][j])}return new Matrix(this.rows,this.cols,this.arr.flat(1))}sub(...matr){for(let k=0;k<matr.length;k++){if(typeof matr[k]=="number")matr[k]=Matrix.numbers(this.rows,this.cols,matr[k]);for(let i=0;i<this.rows;i++)for(var j=0;j<this.cols;j++)this.arr[i][j]=this.arr[i][j].sub(matr[k].arr[i][j])}return new Matrix(this.rows,this.cols,this.arr.flat(1))}static add(m1,...m2){return m1.clone.add(...m2)}static sub(m1,...m2){return m1.clone.sub(...m2)}mul(...matr){for(let k=0;k<matr.length;k++){if(typeof matr[k]=="number")matr[k]=Matrix.numbers(this.rows,this.cols,matr[k]);for(var i=0;i<this.rows;i++)for(var j=0;j<this.cols;j++)this.arr[i][j]=this.arr[i][j].mul(matr[k].arr[i][j])}return new Matrix(this.rows,this.cols,this.arr.flat(1))}div(...matr){for(let k=0;k<matr.length;k++){if(typeof matr[k]=="number")matr[k]=Matrix.numbers(this.rows,this.cols,matr[k]);for(let i=0;i<this.rows;i++)for(var j=0;j<this.cols;j++)this.arr[i][j]=this.arr[i][j].div(matr[k].arr[i][j])}return new Matrix(this.rows,this.cols,this.arr.flat(1))}static div(m1,...m2){return m1.clone.div(...m2)}static mul(m1,...m2){return m1.clone.mul(...m2)}modulo(...matr){for(let k=0;k<matr.length;k++){if(typeof matr[k]=="number")matr[k]=Matrix.numbers(this.rows,this.cols,matr[k]);for(let i=0;i<this.rows;i++)for(var j=0;j<this.cols;j++)this.arr[i][j]=this.arr[i][j].modulo(matr[k].arr[i][j])}return new Matrix(this.rows,this.cols,this.arr.flat(1))}static modulo(m1,...m2){return m1.clone.modulo(...m2)}dot(matrix){var res=[];for(var i=0;i<this.arr.length;i++){res[i]=[];for(var j=0;j<matrix.arr[0].length;j++){res[i][j]=0;for(var k=0;k<this.arr[0].length;k++){res[i][j]=res[i][j].add(this.arr[i][k].mul(matrix.arr[k][j]))}}}return new Matrix(this.arr.length,matrix.arr[0].length,res.flat(1))}static dot(matrix1,matrix2){return matrix1.dot(matrix2)}pow(n){let a=this.clone,p=this.clone;for(let i=0;i<n-1;i++)p=p.dot(a);return p}static pow(m,n){return m.clone.pow(n)}get somme(){let S=0;for(let i=0;i<this.rows;i++)for(let j=0;j<this.cols;j++)S+=this.arr[i][j];return S}get DoesItContainComplexNumbers(){return this.arr.flat(Infinity).some(n=>n instanceof Complex)}get min(){if(this.DoesItContainComplexNumbers)console.error("Complex numbers are not comparable");let minRow=[];for(let i=0;i<this.rows;i++)minRow.push(min(...this.arr[i]));return min(...minRow)}get max(){if(this.DoesItContainComplexNumbers)console.error("Complex numbers are not comparable");let maxRow=[];for(let i=0;i<this.rows;i++)maxRow.push(max(...this.arr[i]));return max(...maxRow)}get minRows(){if(this.DoesItContainComplexNumbers)console.error("Complex numbers are not comparable");let minRow=[];for(let i=0;i<this.rows;i++)minRow.push(min(...this.arr[i]));return minRow}get maxRows(){if(this.DoesItContainComplexNumbers)console.error("Complex numbers are not comparable");let maxRow=[];for(let i=0;i<this.rows;i++)maxRow.push(max(...this.arr[i]));return maxRow}get minCols(){if(this.DoesItContainComplexNumbers)console.error("Complex numbers are not comparable");return this.T.minRows}get maxCols(){if(this.DoesItContainComplexNumbers)console.error("Complex numbers are not comparable");return this.T.maxRows}static fromVector(v){return new Matrix(v.length,1,v)}get toArray(){let arr=[];for(let i=0;i<this.rows;i++){for(let j=0;j<this.cols;j++){arr.push(this.arr[i][j])}}return arr}get print(){let fstring="[";for(let i=0;i<this.arr.length;i++){fstring+=(i!=0?" ":"")+` [${this.arr[i].map(n=>" "+n.toString()+" ")}],\n`}console.log(fstring.substring(0,fstring.length-2)+" ]");document.write(fstring.substring(0,fstring.length-2)+" ]")}get table(){console.table(this.arr)}get serialize(){return JSON.stringify(this)}static deserialize(data){if(typeof data=="string"){data=JSON.parse(data)}let matrix=new Matrix(data.rows,data.cols);matrix.arr=data.arr;return matrix}toTable(){var table=new DocumentFragment;var Tr=new Array(this.rows).fill(null).map(n=>document.createElement("tr"));var Td=this.arr.map(n=>n.map(m=>document.createElement("td")));for(let i=0;i<Td.length;i++){for(let j=0;j<Td[0].length;j++){Td[i][j].innerHTML=this.arr[i][j];Tr[i].appendChild(Td[i][j])}}Tr.map(n=>table.appendChild(n));return table}toGrid(element,style={}){let a=Grid();a.append(...this.map(element).arr.flat(1).map(n=>n.style(style)));a.Columns(this.cols);return a}sortTable(n=0,{type="num",order="asc"}={}){var obj=this.T.arr.map(n=>n.map((n,i)=>Object.assign({},{x:n,y:i})));var newObj=this.T.arr.map(n=>n.map((n,i)=>Object.assign({},{x:n,y:i})));if(type==="num"){if(order==="asc")obj[n].sort((a,b)=>a.x-b.x);else if(order==="desc")obj[n].sort((a,b)=>b.x-a.x);else if(order==="toggle"){if(obj[n][0].x>obj[n][1].x)obj[n].sort((a,b)=>b.x-a.x);else obj[n].sort((a,b)=>a.x-b.x)}}else if(type==="alpha"){if(order==="asc")obj[n].sort((a,b)=>(""+a.x).localeCompare(""+b.x));else if(order==="desc")obj[n].sort((a,b)=>(""+b.x).localeCompare(""+a.x))}var order=obj[n].map(n=>n.y);for(let i=0;i<obj.length;i++){if(i!==n)obj[i].map((n,j)=>n.y=order[j])}for(let i=0;i<obj.length;i++){if(i!==n)newObj[i].map((n,j)=>n.x=obj[i][order[j]].x)}newObj[n]=obj[n];var newArr=newObj.map(n=>n.map(m=>m.x));return new Matrix(newArr).T}}class LinearSystem{static resolve(A,B){return A.inv.dot(Matrix.fromVector(B)).arr.flat(1).map(n=>+n.toFixed(10))}}class BaseConversion{constructor(){}static dec2base(dec,base){if(typeof dec==="number")return(dec>>>0).toString(base);else if(dec instanceof Matrix)return new Matrix(dec.rows,dec.cols,dec.arr.flat(1).map(n=>(n>>>0).toString(base)));else if(dec instanceof Complex)return new Complex((dec.a>>>0).toString(base),(dec.b>>>0).toString(base));else if(dec instanceof Array)return dec.map(n=>BaseConversion.dec2base(n,base))}static bin2base(bin,base){if(typeof bin==="number")return parseInt(bin,2).toString(base);else if(bin instanceof Matrix)return new Matrix(dec.rows,dec.cols,bin.arr.flat(1).map(n=>parseInt(n,2).toString(base)));else if(bin instanceof Complex)return new Complex(parseInt(bin.a,2).toString(base),parseInt(bin.b,2).toString(base));else if(bin instanceof Array)return bin.map(n=>BaseConversion.bin2base(n,base))}static oct2base(oct,base){if(typeof bin==="number")return+parseInt(bin,8).toString(base);else if(bin instanceof Matrix)return new Matrix(dec.rows,dec.cols,bin.arr.flat(1).map(n=>parseInt(n,8).toString(base)));else if(bin instanceof Complex)return new Complex(parseInt(bin.a,8).toString(base),parseInt(bin.b,8).toString(base));else if(bin instanceof Array)return bin.map(n=>BaseConversion.oct2base(n,base))}static hex2base(hex,base){if(typeof bin==="number")return+parseInt(bin,16).toString(base);else if(bin instanceof Matrix)return new Matrix(dec.rows,dec.cols,bin.arr.flat(1).map(n=>parseInt(n,16).toString(base)));else if(bin instanceof Complex)return new Complex(parseInt(bin.a,16).toString(base),parseInt(bin.b,16).toString(base));else if(bin instanceof Array)return bin.map(n=>BaseConversion.hex2base(n,base))}static bin2dec(bin){if(typeof bin==="number")return+BaseConversion.bin2base(bin,10);else if(bin instanceof Matrix)return new Matrix(bin.rows,bin.cols,bin.arr.flat(1).map(n=>+BaseConversion.bin2base(n,10)));else if(bin instanceof Complex)return new Complex(+BaseConversion.bin2base(bin.a,10),+BaseConversion.bin2base(bin.b,10));else if(bin instanceof Array)return bin.map(n=>BaseConversion.bin2dec(n))}static dec2bin(dec){if(typeof dec==="number")return+BaseConversion.dec2base(dec,2);else if(dec instanceof Matrix)return new Matrix(dec.rows,dec.cols,dec.arr.flat(1).map(n=>+BaseConversion.dec2base(n,2)));else if(dec instanceof Complex)return new Complex(+BaseConversion.dec2base(dec.a,2),+BaseConversion.dec2base(dec.a,2));else if(dec instanceof Array)return dec.map(n=>BaseConversion.dec2bin(n))}static dec2oct(dec){if(typeof dec==="number")return+BaseConversion.dec2base(dec,8);else if(dec instanceof Matrix)return new Matrix(dec.rows,dec.cols,dec.arr.flat(1).map(n=>+BaseConversion.dec2base(n,8)));else if(dec instanceof Complex)return new Complex(+BaseConversion.dec2base(dec.a,8),+BaseConversion.dec2base(dec.a,8));else if(dec instanceof Array)return dec.map(n=>BaseConversion.dec2oct(n))}static dec2hex(dec){if(typeof dec==="number")return BaseConversion.dec2base(dec,16);else if(dec instanceof Array)return dec.map(n=>BaseConversion.dec2hex(n))}static IEEE32toDec(Bin){let IEEE32=Bin.split(" ").join("").padEnd(32,"0");let s=IEEE32[0];let e=2**(+("0b"+IEEE32.slice(1,9))-127);let m=IEEE32.slice(9,32).split("").map(n=>+n);let M=m.map((n,i)=>n*2**(-i-1)).reduce((a,b)=>a+b,0);let dec=(-1)**s*(1+M)*e;return dec}static IEEE64toDec(Bin){let IEEE64=Bin.split(" ").join("").padEnd(64,"0");let s=IEEE64[0];let e=2**(+("0b"+IEEE64.slice(1,12))-1023);let m=IEEE64.slice(13,64).split("").map(n=>+n);let M=m.map((n,i)=>n*2**(-i-1)).reduce((a,b)=>a+b,0);let dec=(-1)**s*(1+M)*e;return dec}}class Signal{static floor(t){return floor(t)}static round(t){return round(t)}static ceil(t){return ceil(t)}static linspace(a,b,n){return Outils.linspace(a,b,n)}static arange(a,b,step){return Outils.arange(a,b,step)}static echelon(t,t0=0){let x=t.clone;for(let i=0;i<t.length;i++){x[i]<t0?x[i]=0:x[i]=1}return x}static rampe(t,t0=0){let x=t.clone;for(let i=0;i<x.length;i++){x[i]=x[i]-t0;if(x[i]<=0)x[i]=0}return x}static rect(t,centre=0,ecart=1){return this.echelon(t,centre-ecart/2).sub(this.echelon(t,centre+ecart/2))}static dirac(t,t0=0){return Signal.rect(t,t0,pow(34,-10)).mul(pow(34,10))}static tri(t,centre=0,ecart=1){return 0}static lorentz(t){return 1..div(1..add(t.mul(t)))}static Square(t,A=5,T=1){return floor(sin(t.div(T))).mul(A).add(A/2)}static Sawtooth(t,L=5,n=10){let y=new Array(t.length).fill(0);console.log(y);for(let i=0;i<y.length;i++){for(let j=1;j<n;j++)y[i]+=pow(-1,j+1)/j*sin(j*PI*t[i]/L);y[i]*=2*L/PI}return y}}var rect=(t,centre=0,ecart=1)=>echelon(t,centre-ecart/2)-echelon(t,centre+ecart/2);var tri=(t,centre=0,ecart=1)=>(echelon(t)-echelon(t-1))*(1-t)+(echelon(t+1)-echelon(t))*(t+1);var sinc=x=>sin(x*180)/(x*180);var carre=x=>cos(floor(x)*PI)/2+.5;var lorentz=x=>1/(1+x*x);class CartesianCoordinates{constructor(x=0,y=0,z=0){this.x=x;this.y=y;this.z=z}get matrix(){return new Matrix([[this.x,this.y,this.z],Object.values(this.toCylindrical()),Object.values(this.toSpherical())])}toCylindrical(){const r=hypot(this.x,this.y);const theta=Math.atan(this.y/this.x);return new CylindricalCoordinates(r,theta,this.z)}static fromCylindrical(radius,theta,z){var X,Y,Z;if(radius instanceof CylindricalCoordinates){const{r,theta,z}=radius;X=r*cos(theta);Y=r*sin(theta);Z=z}else{X=radius*cos(theta);Y=radius*sin(theta);Z=z}return new CartesianCoordinates(X,Y,Z)}toSpherical(){const r=hypot(this.x,this.y,this.z);var theta,phi;if(r===0){theta=0;phi=0}else{theta=Math.atan(this.y/this.x);phi=Math.atan(hypot(this.x,this.y)/this.z)}return new SphericalCoordinates(r,theta,phi)}static fromSpherical(radius,theta,phi){var x,y,z;if(radius instanceof SphericalCoordinates){const{r,theta,phi}=radius;console.log(radius);x=r*sin(phi)*cos(theta);y=r*sin(phi)*sin(theta);z=r*cos(phi)}else{x=radius*sin(phi)*cos(theta);y=radius*sin(phi)*sin(theta);z=radius*cos(phi)}return new CartesianCoordinates(x,y,z)}rotationX(teta){const newCoordinates=new Matrix([[1,0,0],[0,cos(teta),-sin(teta)],[0,sin(teta),cos(teta)]]).dot(new Matrix(3,1,[this.x,this.y,this.z])).toArray;return new CartesianCoordinates(...newCoordinates)}rotationY(teta){const newCoordinates=new Matrix([[cos(teta),0,sin(teta)],[0,1,0],[-sin(teta),0,cos(teta)]]).dot(new Matrix(3,1,[this.x,this.y,this.z])).toArray;return new CartesianCoordinates(...newCoordinates)}rotationZ(teta){const newCoordinates=new Matrix([[cos(teta),-sin(teta),0],[sin(teta),cos(teta),0],[0,0,1]]).dot(new Matrix(3,1,[this.x,this.y,this.z])).toArray;return new CartesianCoordinates(...newCoordinates)}}class CylindricalCoordinates{constructor(r,theta,z){this.r=r;this.theta=theta;this.z=z}get matrix(){return new Matrix([Object.values(this.toCartesian()),[this.r,this.theta,this.z],Object.values(this.toSpherical())])}toCartesian(){return CartesianCoordinates.fromCylindrical(this)}static fromCartesian(x,y,z){if(x instanceof CartesianCoordinates)return x.toCylindrical();return new CartesianCoordinates(x,y,z).toCylindrical()}toSpherical(){return CartesianCoordinates.fromCylindrical(this).toSpherical()}fromSpherical(r,theta,phi){if(r instanceof CartesianCoordinates)return r.toCylindrical();return new SphericalCoordinates(r,theta,phi).toCylindrical()}rotationX(teta){let cart=CartesianCoordinates.fromCylindrical(this);const newCoordinates=new Matrix([[1,0,0],[0,cos(teta),-sin(teta)],[0,sin(teta),cos(teta)]]).dot(new Matrix(3,1,[cart.x,cart.y,cart.z])).toArray;return CylindricalCoordinates.fromCartesian(new CartesianCoordinates(...newCoordinates))}rotationY(teta){let cart=CartesianCoordinates.fromCylindrical(this);const newCoordinates=new Matrix([[cos(teta),0,sin(teta)],[0,1,0],[-sin(teta),0,cos(teta)]]).dot(new Matrix(3,1,[cart.x,cart.y,cart.z])).toArray;return CylindricalCoordinates.fromCartesian(new CartesianCoordinates(...newCoordinates))}rotationZ(teta){let cart=CartesianCoordinates.fromCylindrical(this);const newCoordinates=new Matrix([[cos(teta),-sin(teta),0],[sin(teta),cos(teta),0],[0,0,1]]).dot(new Matrix(3,1,[cart.x,cart.y,cart.z])).toArray;return CylindricalCoordinates.fromCartesian(new CartesianCoordinates(...newCoordinates))}}class SphericalCoordinates{constructor(r,theta,phi){this.r=r;this.theta=theta;this.phi=phi}get matrix(){return new Matrix([Object.values(this.toCartesian()),Object.values(this.toCylindrical()),[this.r,this.theta,this.phi]])}toCartesian(){return CartesianCoordinates.fromSpherical(this)}static fromCartesian(x,y,z){if(x instanceof CartesianCoordinates)return x.toSpherical();return new CartesianCoordinates(x,y,z).toSpherical()}toCylindrical(){return new CartesianCoordinates.fromSpherical(this).toCylindrical()}static fromCylindrical(r,theta,z){if(r instanceof CylindricalCoordinates)return r.toSpherical();return new CylindricalCoordinates(r,theta,z).toSpherical()}rotationX(teta){let cart=CartesianCoordinates.fromSpherical(this);const newCoordinates=new Matrix([[1,0,0],[0,cos(teta),-sin(teta)],[0,sin(teta),cos(teta)]]).dot(new Matrix(3,1,[cart.x,cart.y,cart.z])).toArray;return SphericalCoordinates.fromCartesian(new CartesianCoordinates(...newCoordinates))}rotationY(teta){let cart=CartesianCoordinates.fromSpherical(this);const newCoordinates=new Matrix([[cos(teta),0,sin(teta)],[0,1,0],[-sin(teta),0,cos(teta)]]).dot(new Matrix(3,1,[cart.x,cart.y,cart.z])).toArray;return SphericalCoordinates.fromCartesian(new CartesianCoordinates(...newCoordinates))}rotationZ(teta){let cart=CartesianCoordinates.fromSpherical(this);const newCoordinates=new Matrix([[cos(teta),-sin(teta),0],[sin(teta),cos(teta),0],[0,0,1]]).dot(new Matrix(3,1,[cart.x,cart.y,cart.z])).toArray;return SphericalCoordinates.fromCartesian(new CartesianCoordinates(...newCoordinates))}}function diff(Y,X){var z=[],i;for(i=0;i<Y.length;i++)z[i]=(Y[i+1]-Y[i])/(X[i+1]-X[i]);return z}function drv(f,x,pas=1e-11){var pas,F,Fh;F=eval(f);x+=pas;Fh=eval(f);return Number(((Fh-F)/pas).toFixed(10))}function integral(a,b,fct){var integ=0,i;for(i=a;i<b;i+=.001)integ+=fct;return integ*.001}class Suite{constructor(){this.U=arguments[0]}static Ari(U0=0,r=0,n=10){let U=new Array(n);for(let i=0;i<n;i++)U[i]=U0+i*r;return new Suite(U)}static Geo(U0=0,q=1,n=10){let U=new Array(n);for(let i=0;i<n;i++)U[i]=U0*q**i;return new Suite(U)}static fctn(fct="n",U0=0,n=10){let U=new Array(n);fct=fct.replace(/[-]/g,"-1*");U[0]=U0;for(let i=1;i<n;i++)U[i]=eval(fct.replace(/n/g,U[i-1]));return new Suite(U)}get somme(){return somme(...this.U)}get produit(){return produit(...this.U)}get termes(){return this.U}}class Quat{constructor(x=0,y=0,z=0,w=1){this.x=x;this.y=y;this.z=z;this.w=w}get conj(){return new Quat(-this.x,-this.y,-this.z,this.w)}get norm(){return hypot(this.x,this.y,this.z,this.w)}get M4(){return new Matrix(4,4,[this.w,-this.x,-this.y,-this.z,this.x,this.w,-this.z,this.y,this.y,this.z,this.w,-this.x,this.z,-this.y,this.x,this.w])}get M2(){return new Matrix(2,2,[complex(this.w,this.x),complex(this.y,this.z),complex(-this.y,this.z),complex(this.w,-this.w)])}add(q){return new Quat(this.x+q.x,this.y+q.y,this.z+q.z,this.w+q.w)}dot(q){return new Quat(this.x*q.x,this.y*q.y,this.z*q.z,this.w*q.w)}mul(q){if(q instanceof Quat){let x=this.w*q.x+this.x*q.w+this.y*q.z-this.z*q.y;let y=this.w*q.y+this.y*q.w+this.z*q.x-this.x*q.z;let z=this.w*q.z+this.z*q.w+this.x*q.y-this.y*q.x;let w=this.w*q.w-this.x*q.x-this.y*q.y-this.z*q.z;return new Quat(x,y,z,w)}else if(typeof q=="number"){return new Quat(this.x*q,this.y*q,this.z*q,this.w*q)}}div(q){return{1:this.mul(q.conj),2:q.conj.mul(this)}}static add(q1,q2){return q1.add(q2)}static dot(q1,q2){return q1.dot(q2)}static mul(q1,q2){return q1.mul(q2)}get inv(){return this.conj.mul(1/(this.x**2+this.y**2+this.z**2+this.w**2))}}class Integration{static Trapeze(f="x",a=0,b=1,n=100){let h=(b-a)/n;let s=(eval(f.replaceAll("x",a))+eval(f.replaceAll("x",b)))/2;for(let i=1;i<=n-1;i++){s+=eval(f.replaceAll("x",a+i*h))}return s*h}static Rectangle(f="x",a=0,b=1,n=100){let h=(b-a)/n;let s=0;for(let i=0;i<=n-1;i++)s+=eval(f.replaceAll("x",a+i*h+h/2));return s*h}}class Outils{constructor(){}static somme(...x){let s=x[0];for(let i=1;i<x.length;i++)s+=x[i];return s}static produit(...x){let p=x[0];for(let i=1;i<x.length;i++)p*=x[i];return p}static deg2rad(x){if(typeof x==="number")return x*Math.PI/180;else if(x instanceof Matrix)return new Matrix(x.rows,x.cols,Outils.deg2rad(x.arr.flat(1)));else if(x instanceof Complex)return new Complex(Outils.deg2rad(x.a),Outils.deg2rad(x.b));else if(x instanceof Array){if(x.every(n=>typeof(n==="number"))){return x.map(n=>Outils.deg2rad(n))}else{let y=new Array(x.length);for(let i=0;i<x.length;i++){y[i]=this.deg2rad(x[i])}}}}static rad2deg(x){if(typeof x==="number")return x/Math.PI*180;else if(x instanceof Matrix)return new Matrix(x.rows,x.cols,Outils.rad2deg(x.arr.flat(1)));else if(x instanceof Complex)return new Complex(Outils.rad2deg(x.a),Outils.rad2deg(x.b));else if(x instanceof Array){if(x.every(n=>typeof(n==="number"))){return x.map(n=>Outils.rad2deg(n))}else{let y=new Array(x.length);for(let i=0;i<x.length;i++){y[i]=this.rad2deg(x[i])}}}}static pgcd(n1,n2){let i,pgcd=1;if(n1==floor(n1)&&n2==floor(n2)){for(i=2;i<=n1&&i<=n2;++i){if(n1%i==0&&n2%i==0)pgcd=i}return pgcd}else console.log("error")}static ppcm(n1,n2){let ppcm;if(n1==floor(n1)&&n2==floor(n2)){ppcm=n1>n2?n1:n2;while(1){if(ppcm%n1==0&&ppcm%n2==0)break;++ppcm}return ppcm}else console.log("error")}static linspace(a,b,n=b-a+1){if(floor(n)!==n)return;var arr=[];var step=(b-a)/(n-1);for(var i=0;i<n;i++){arr.push(a+step*i)}return arr}static arange(a,b,pas){let tab=[];for(let i=a;i<b;i+=pas)tab.push(i*10/10);return tab}static norm(value,min,max){if(typeof value==="number")return min!==max?(value-min)/(max-min):0;else if(value instanceof Matrix)return new Matrix(value.rows,value.cols,Outils.norm(value.arr.flat(1),min,max));else if(value instanceof Complex)return new Complex(Outils.norm(value.a,min,max),Outils.norm(value.b,min,max));else if(value instanceof Array){if(value.every(n=>typeof(n==="number"))){return value.map(n=>Outils.norm(n,min,max))}else{let y=new Array(value.length);for(let i=0;i<value.length;i++){y[i]=this.norm(value[i])}}}}static lerp(value,min,max){if(typeof value==="number")return(max-min)*value+min;else if(value instanceof Matrix)return new Matrix(value.rows,value.cols,Outils.lerp(value.arr.flat(1),min,max));else if(value instanceof Complex)return new Complex(Outils.lerp(value.a,min,max),Outils.lerp(value.b,min,max));else if(value instanceof Array){if(value.every(n=>typeof(n==="number"))){return value.map(n=>Outils.lerp(n,min,max))}else{let y=new Array(value.length);for(let i=0;i<value.length;i++){y[i]=Outils.lerp(value[i])}}}}static map(value,a,b,c,d){if(typeof value==="number")return Outils.lerp(Outils.norm(value,a,b),c,d);else if(value instanceof Matrix)return new Matrix(value.rows,value.cols,Outils.map(value.arr.flat(1),a,b,c,d));else if(value instanceof Complex)return new Complex(Outils.map(value.a,b,c,d),Outils.map(value.b,a,b,c,d));else if(value instanceof Array){if(value.every(n=>typeof(n==="number"))){return value.map(n=>Outils.map(n,a,b,c,d))}else{let y=new Array(value.length);for(let i=0;i<value.length;i++){y[i]=Outils.map(value[i],a,b,c,d)}}}}static clamp(value,min,max){if(typeof value==="number")return Math.min(Math.max(value,min),max);else if(value instanceof Matrix)return new Matrix(value.rows,value.cols,Outils.clamp(value.arr.flat(1),min,max));else if(value instanceof Complex)return new Complex(Outils.clamp(value.a,min,max),Outils.clamp(value.b,min,max));else if(value instanceof Array){if(value.every(n=>typeof(n==="number"))){return value.map(n=>Outils.clamp(n,min,max))}else{let y=new Array(value.length);for(let i=0;i<value.length;i++){y[i]=Outils.clamp(value[i],min,max)}}}}}class Statistique{constructor(){}static moy(...arr){return Outils.somme(...arr)/arr.length}static med(...arr){return arr.length%2!=0?Statistique.min2max(...arr)[Math.floor(arr.length/2)]:this.moy(Statistique.min2max(...arr)[Math.floor(arr.length/2-1)],Statistique.min2max(...arr)[Math.floor(arr.length/2)])}static variance(...arr){let xMoy=arr.moy;let V=0;for(let i=0;i<arr.length;i++)V+=(arr[i]-xMoy)**2;return V/arr.length}static std(...arr){return Math.sqrt(this.variance(...arr))}static mode(...arr){var mf=1;var m=0;var item;for(var i=0;i<arr.length;i++){for(var j=i;j<arr.length;j++){if(arr[i]==arr[j])m++;if(mf<m){mf=m;item=arr[i]}}m=0}return{mode:item,frequency:mf}}static accum(...arr){let acc=arr.reduce((x,y)=>[...x,x[x.length-1]+y],[0]);acc.shift();return acc}static min2max(...arr){return arr.sort((a,b)=>a-b)}static max2min(...arr){return arr.sort((a,b)=>b-a)}static percentile(arr,val){return 100*arr.reduce((acc,v)=>acc+(v<val?1:0)+(v===val?.5:0),0)/arr.length}}class Permutation{static withDiscount(arr,l=arr.length){if(l===1){return arr.map(n=>[n])}const permutations=[];let smallerPermutations;smallerPermutations=this.withDiscount(arr,l-1);arr.forEach(currentOption=>{smallerPermutations.forEach(smallerPermutation=>{permutations.push([currentOption].concat(smallerPermutation))})});return permutations}static withoutDiscount(arr){const l=arr.length;if(l===1){return arr.map(n=>[n])}const permutations=[];const smallerPermutations=this.withoutDiscount(arr.slice(1));const firstOption=arr[0];for(let i=0;i<smallerPermutations.length;i++){const smallerPermutation=smallerPermutations[i];for(let j=0;j<=smallerPermutation.length;j++){const permutationPrefix=smallerPermutation.slice(0,j);const permutationSuffix=smallerPermutation.slice(j);permutations.push(permutationPrefix.concat([firstOption],permutationSuffix))}}return permutations}}class Combinaison{static withDiscount(comboOptions,comboLength){if(comboLength===1){return comboOptions.map(comboOption=>[comboOption])}const combos=[];comboOptions.forEach((currentOption,optionIndex)=>{const smallerCombos=this.withDiscount(comboOptions.slice(optionIndex),comboLength-1);smallerCombos.forEach(smallerCombo=>{combos.push([currentOption].concat(smallerCombo))})});return combos}static withoutDiscount(comboOptions,comboLength){if(comboLength===1){return comboOptions.map(comboOption=>[comboOption])}const combos=[];comboOptions.forEach((currentOption,optionIndex)=>{const smallerCombos=this.withoutDiscount(comboOptions.slice(optionIndex+1),comboLength-1);smallerCombos.forEach(smallerCombo=>{combos.push([currentOption].concat(smallerCombo))})});return combos}}function PowerSet(originalSet){const subSets=[];const numberOfCombinations=2**originalSet.length;for(let combinationIndex=0;combinationIndex<numberOfCombinations;combinationIndex+=1){const subSet=[];for(let setElementIndex=0;setElementIndex<originalSet.length;setElementIndex+=1){if(combinationIndex&1<<setElementIndex){subSet.push(originalSet[setElementIndex])}}subSets.push(subSet)}return subSets}var subset=(...arr)=>{list=arange(0,2**arr.length,1);bin=list.toBin.map(n=>n.padStart(arr.length,0)).map(n=>n.split("").map(n=>+n));sub=bin.map(n=>n.map((m,i)=>m=arr[i]));for(i=0;i<sub.length;i++)for(j=0;j<sub[i].length;j++)sub[i][j]={n:sub[i][j],m:bin[i][j]};sub=sub.map(n=>n.filter(x=>x.m==1));sub=sub.map(n=>n.map(m=>m.n));return sub};var nCr=(p,n)=>fact(n)/(fact(n-p)*fact(p));var nPr=()=>fact(n)/fact(n-p);var card=(p,n)=>pow(n,p);class DistrubBinomiale{constructor(p,n,k){this.p=p;this.n=n;this.k=k;k<=n?this.prob=nCr(k,n)*pow(p,k)*pow(1-p,n-k):this.prob=0;this.Esperance=n*p;this.Variance=n*p*(1-p)}}var Binomiale=(p,n,k)=>new DistrubBinomiale(p,n,k);var normal=(x,mu=0,sigma=1)=>1/(sigma*sqrt(2*PI))*e(-.5*((x-mu)/sigma)**2);function dichotomie(f,a,b,n){var re=/x/gi;var fa=eval(f.replace(re,a));var fb=eval(f.replace(re,b));var c,fc,fd;for(i=0;i<n;i++){if(fa*fb<=0){c=(a+b)/2;d=c.toFixed(5);fc=eval(f.replace(re,c));fd=eval(f.replace(re,d));if(fd==0){a=b=eval(d);break}fc<=0?a=c:b=c;fa=eval(f.replace(re,a));fb=eval(f.replace(re,b))}else console.log("changer a ou b")}if(a==b)return a;else return moy([a,b])}function InverseMatrixe(M){if(M.length!==M[0].length){return}var i=0,ii=0,j=0,dim=M.length,e=0,t=0;var I=[],C=[];for(i=0;i<dim;i+=1){I[I.length]=[];C[C.length]=[];for(j=0;j<dim;j+=1){if(i==j){I[i][j]=1}else{I[i][j]=0}C[i][j]=M[i][j]}}for(i=0;i<dim;i+=1){e=C[i][i];if(e==0){for(ii=i+1;ii<dim;ii+=1){if(C[ii][i]!=0){for(j=0;j<dim;j++){e=C[i][j];C[i][j]=C[ii][j];C[ii][j]=e;e=I[i][j];I[i][j]=I[ii][j];I[ii][j]=e}break}}e=C[i][i];if(e==0){return}}for(j=0;j<dim;j++){C[i][j]=C[i][j]/e;I[i][j]=I[i][j]/e}for(ii=0;ii<dim;ii++){if(ii==i){continue}e=C[ii][i];for(j=0;j<dim;j++){C[ii][j]-=e*C[i][j];I[ii][j]-=e*I[i][j]}}}return I}function newArray(size){var result=new Array(size);for(var i=0;i<size;i++){result[i]=new Array(size)}return result}class Logique{static not(input){if(typeof input==="number")return+!input;else if(input instanceof Matrix)return new Matrix(input.rows,input.cols,input.arr.flat(1).map(n=>Logique.not(n)));else if(input instanceof Complex)return new Complex(Logique.not(input.a),Logique.not(input.b));else if(input instanceof Array)return input.map(n=>Logique.not(n));else if(input instanceof Matrix)return new Matrix;else if(input instanceof Complex)return new Complex;else if(input instanceof Array)return input.map(n=>0)}static and(a,...b){if(typeof a==="number")return b.reduce((n,m)=>n&=m,a);else if(a instanceof Matrix)return new Matrix(a.rows,a.cols,a.arr.flat(1).map(n=>Logique.and(n,b)));else if(a instanceof Complex)return new Complex(Logique.and(a.a,b),Logique.and(a.b,b));else if(a instanceof Array)return a.map(n=>Logique.and(n,b))}static or(a,...b){if(typeof a==="number")return b.reduce((n,m)=>n|=m,a);else if(a instanceof Matrix)return new Matrix(a.rows,a.cols,a.arr.flat(1).map(n=>Logique.or(n,b)));else if(a instanceof Complex)return new Complex(Logique.and(a.a,b),Logique.or(a.b,b));else if(a instanceof Array)return a.map(n=>Logique.or(n,b))}static nand(a,...b){return Logique.not(Logique.and(a,b))}static nor(a,...b){return Logique.not(Logique.or(a,b))}static xor(a,...b){if(typeof a==="number"){const c=b.Count(1);switch(c){case 0:return a;case 1:return Logique.not(a);default:return 0}}else if(a instanceof Matrix)return new Matrix(a.rows,a.cols,a.arr.flat(1).map(n=>Logique.xor(n,b)));else if(a instanceof Complex)return new Complex(Logique.and(a.a,b),Logique.xor(a.b,b));else if(a instanceof Array)return a.map(n=>Logique.xor(n,b))}static xnor(a,...b){return Logique.not(Logique.xor(a,b))}}class Numjs{constructor(){}complex(a,b){return new Complex(a,b)}get Complex(){return Complex}matrix(r,c,element){return new Matrix(r,c,element)}matrix2(...element){return new Matrix(2,2,element)}matrix3(...element){return new Matrix(3,3,element)}matrix4(...element){return new Matrix(4,4,element)}get Matrix(){return Matrix}get LinearSystem(){return LinearSystem}get Random(){return Random}suite(type,U0,r,n){return new Suite(type,U0,r,n)}get Suite(){return Suite}get Logique(){return Logique}get Permutation(){return Permutation}get Combinaison(){return Combinaison}get Signal(){return Signal}}var nj=new Numjs;var njObj={PI:PI,E:E,min:min,max:max,cos:cos,Cos:Cos,sin:sin,tan:tan,acos:acos,asin:asin,atan:atan,abs:abs,sqrt:sqrt,pow:pow,sqrtn:sqrtn,e:e,ln:ln,cosh:cosh,sinh:sinh,tanh:tanh,acos:acos,asin:asin,atan:atan,acosh:acosh,asinh:asinh,atanh:atanh,floor:floor,signe:sign,sig:sig,hypot:Math.hypot,matrix:nj.matrix,matrix2:nj.matrix2,matrix3:nj.matrix3,matrix4:nj.matrix4,Matrix:nj.Matrix,LinearSystem:nj.LinearSystem,complex:nj.complex,Complex:nj.Complex,Random:nj.Random,Logique:nj.Logique,suite:nj.suite,Suite:nj.Suite,not:nj.Logique.and,and:nj.Logique.and,or:nj.Logique.or,nand:nj.Logique.nand,nor:nj.Logique.nor,xor:nj.Logique.xor,Statistique:Statistique,moy:Statistique.moy,med:Statistique.med,variance:Statistique.variance,std:Statistique.std,mode:Statistique.mode,accum:Statistique.accum,min2max:Statistique.min2max,max2min:Statistique.max2min,percentile:Statistique.percentile,Outils:Outils,somme:Outils.somme,produit:Outils.produit,deg2rad:Outils.deg2rad,rad2deg:Outils.rad2deg,arange:Outils.arange,linspace:Outils.linspace,map:Outils.map,lerp:Outils.lerp,norm:Outils.norm,clamp:Outils.clamp,ppcm:Outils.ppcm,pgcd:Outils.pgcd,BaseConversion:BaseConversion,dec2base:BaseConversion.dec2base,bin2base:BaseConversion.bin2base,bin2dec:BaseConversion.bin2dec,dec2bin:BaseConversion.dec2bin,dec2oct:BaseConversion.dec2oct,dec2hex:BaseConversion.dec2hex,Permutation:nj.Permutation,Combinaison:nj.Combinaison,Signal:nj.Signal,ExtractAll:function(){for(let i=0;i<Object.keys(Ziko.Math).length;i++){window[Object.keys(Ziko.Math)[i]]=Object.values(Ziko.Math)[i]}return this},RemoveAll:function(){for(let i=0;i<Object.keys(Ziko.Math).length;i++)delete window[Object.keys(Ziko.Math)[i]];return this}};Object.assign(Ziko.Math,njObj)})();(function(){if(THREE){class ZikoTHREECamera{posX(x){this.camera.position.x=x;return this}posY(y){this.camera.position.y=y;return this}posZ(z){this.camera.position.z=z;return this}}class ZikoPerspectiveCamera extends ZikoTHREECamera{}class ZikoTHREEGeometry{setGeometry(Geometry){this.Geometry=Geometry;this.mesh.geometry=this.Geometry;return this}posX(x){this.mesh.position.x=x;return this}posY(y){this.mesh.position.y=y;return this}posZ(z){this.mesh.position.z=z;return this}rotX(x){this.mesh.rotation.x=x;return this}rotY(y){this.mesh.rotation.y=y;return this}rotZ(z){this.mesh.rotation.z=z;return this}}class ZikoTHREEMaterialType{static Basic(attribut){return new THREE.MeshBasicMaterial(attribut)}static Lambert(attribut){return new THREE.MeshLambertMaterial(attribut)}static Phong(attribut){return new THREE.MeshPhongMaterial(attribut)}static Standard(attribut){return new THREE.MeshStandardMaterial(attribut)}static Physical(attribut){return new THREE.MeshPhysicalMaterial(attribut)}static Depth(attribut){return new THREE.MeshDepthMaterial(attribut)}static lineBasic(attribut){return new THREE.LineBasicMaterial(attribut)}static lineDashed(attribut){return new THREE.LineDashedMaterial(attribut)}}class ZikoTHREEMaterial extends ZikoTHREEGeometry{setMaterial(Material=ZikoTHREEMaterialType.Basic({})){this.Material=Material;this.mesh.material=this.Material;return this}setMaterials(...Materials){this.setMaterial(Materials)}color(col=Random.randomHexColor){Object.assign(this.Material,{color:new THREE.Color(col)});return this}emissive(col=Random.randomHexColor,intensity){Object.assign(this.Material,{emissive:new THREE.Color(col),emissiveIntensity:intensity});return this}wireframe(bool=true){Object.assign(this.Material,{wireframe:bool});return this}side(newSide){Object.assign(this.Material,{side:newSide});return this}transparent(bool=true){Object.assign(this.Material,{transparent:bool});return this}opacity(n=1){this.transparent();Object.assign(this.Material,{opacity:n});return this}combine(n){Object.assign(this.Material,{combine:n});return this}flatShading(bool=true){Object.assign(this.Material,{flatShading:bool});return this}texture(Texture){if(Object.entries(new THREE.Color(Texture)).length===3){Object.assign(this.Material,{color:new THREE.Color(Texture)})}else if(Texture instanceof Ziko.UI._ZikoUIElement){switch(Texture.element.nodeName){case"IMG":{Object.assign(this.Material,{map:Image2Texture(Texture)});break};break;case"VIDEO":Object.assign(this.Material,{map:Video2Texture(Texture)});break}}return this}}class _ZikoTHREEMeshMethodes{constructor(){this.mesh=null}posX(x){this.mesh.position.x=x;return this}posY(y){this.mesh.position.y=y;return this}posZ(z){this.mesh.position.z=z;return this}position(x,y,z){this.mesh.position.x=x;this.mesh.position.y=y;this.mesh.position.z=z;return this}rotX(x){this.mesh.rotation.x=x;return this}rotY(y){this.mesh.rotation.y=y;return this}rotZ(z){this.mesh.rotation.z=z;return this}rotation(x,y=0,z=0){this.mesh.rotation.x=x;this.mesh.rotation.y=y;this.mesh.rotation.z=z;return this}}class ZikoTHREEMesh extends ZikoTHREEMaterial{constructor(Geometry,Material=ZikoTHREEMaterialType.Basic({})){super();this.Geometry=Geometry;this.Material=Material;this.mesh=new THREE.Mesh(this.Geometry,this.Material)}}class ZikoTHREEGroupe extends ZikoTHREEMesh{constructor(){super();this.mesh=new THREE.Group}add(...obj){for(let i=0;i<obj.length;i++){this.mesh.add(obj[i].mesh)}return this}remove(...obj){for(let i=0;i<obj.length;i++){this.mesh.remove(obj[i].mesh)}return this}}class ZikoTHREEObject3DFromElement extends _ZikoTHREEMeshMethodes{constructor(element){super();this.mesh=element.toCss3dObj}}Canvas2Texture=canvas=>{if(canvas instanceof Ziko.UI._ZikoUIElement)return new THREE.CanvasTexture(canvas.element);return new THREE.CanvasTexture(canvas)};class ZikoTHREELights extends ZikoTHREEMesh{Ambient(color,intensity){this.mesh=new THREE.AmbientLight(color,intensity);return this}Hemisphere(skyColor,groundColor,intensity,helper=true){this.mesh=new THREE.HemisphereLight(skyColor,groundColor,intensity);if(helper){let help=new THREE.HemisphereLightHelper(this.mesh);this.mesh.add(help)}return this}Directional(color,intensity,helper=true){this.mesh=new THREE.DirectionalLight(color,intensity);if(helper){let help=new THREE.DirectionalLightHelper(this.mesh);this.mesh.add(help)}return this}Point(color,intensity,helper=true){this.mesh=new THREE.PointLight(color,intensity);if(helper){let help=new THREE.PointLightHelper(this.mesh);this.mesh.add(help)}return this}}class ZikoTHREEHelpers extends ZikoTHREEMesh{grid(n,m,c1=238,c2=16729190){this.mesh=new THREE.GridHelper(n,m,c1,c2);return this}polar(r=20,R=8,c=10,d=50){this.mesh=new THREE.PolarGridHelper(r,R,c,d);return this}}class ZikoTHREEText extends ZikoTHREEMesh{constructor(){super();this.mesh=new THREE.Object3D;this.text="";this.fontUrl="https://threejs.org/examples/fonts/helvetiker_regular.typeface.json";this.config={size:2,height:.3}}size(s){Object.assign(this.config,{size:s});return this}height(h){Object.assign(this.config,{height:h});return this}loadFont(url){return new Promise((resolve,reject)=>{(new FontLoader).load(url,resolve,undefined,reject)})}setFont(url){this.fontUrl=url;return this}center(){this.Geometry.computeBoundingBox();const center=t.Geometry.boundingBox.getCenter();this.mesh.children[0].position.x=-center.x;this.mesh.children[0].position.y=-center.y;this.mesh.children[0].position.z=-center.z;return this}setText(text=""){this.text=text;return this}async doit(){const font=await this.loadFont(this.fontUrl);Object.assign(this.config,{font:font});this.Geometry=new TextGeometry(this.text,this.config);const mesh=new THREE.Mesh(this.Geometry,this.Material);this.mesh.add(mesh);this.center()}"do"(){this.doit()}}Image2Texture=Image=>{if(Image instanceof Ziko.UI._ZikoUIElement&&Image.element.nodeName==="IMG")return(new THREE.TextureLoader).load(Image.element.src);return(new THREE.TextureLoader).load(Image)};Video2Texture=video=>new THREE.VideoTexture(video);Object3DFromElement=element=>new ZikoTHREEObject3DFromElement(element);groupe=(...obj)=>(new ZikoTHREEGroupe).add(...obj);plan=(w,h)=>new ZikoTHREEMesh(new THREE.PlaneBufferGeometry(w,h,100,100));cube=l=>new ZikoTHREEMesh(new THREE.BoxBufferGeometry(l,l,l));cuboid=(l,L,h)=>new ZikoTHREEMesh(new THREE.BoxBufferGeometry(l,L,h));cylindre=(rT,rB,h)=>new ZikoTHREEMesh(new THREE.CylinderBufferGeometry(rT,rB,h,100));sphere=(r,config={})=>{const parameters={width:50,height:50,phi:[0,2*PI],theta:[0,2*PI]};Object.assign(parameters,config);const{width,height,phi,theta}=parameters;return new ZikoTHREEMesh(new THREE.SphereBufferGeometry(r,width,height,phi[0],phi[1],theta[0],theta[1]))};cone=(r,h)=>new ZikoTHREEMesh(new THREE.ConeBufferGeometry(r,h,100));torus=(r,tubeRadius)=>new ZikoTHREEMesh(new THREE.TorusBufferGeometry(r,tubeRadius,100,100,2*PI));torusKnot=(r,tube,tubularSegments,radialSegments,p,q)=>new ZikoTHREEMesh(new THREE.TorusKnotBufferGeometry(r,tube,tubularSegments,radialSegments,p,q));tetradron=r=>new ZikoTHREEMesh(new THREE.TetrahedronBufferGeometry(r));dodecahedron=r=>new ZikoTHREEMesh(new THREE.DodecahedronBufferGeometry(r));icosahedron=r=>new ZikoTHREEMesh(new THREE.IcosahedronBufferGeometry(r));octahedron=r=>new ZikoTHREEMesh(new THREE.OctahedronBufferGeometry(r));gridH=(n,m,color1,color2)=>(new ZikoTHREEHelpers).grid(n,m,color1,color2);polarH=(r,R,c,d)=>(new ZikoTHREEHelpers).polar(r,R,c,d);text3d=(text,size,height)=>(new ZikoTHREEText).setText(text).size(size).height(height);ambientLight=(color,intensity)=>(new ZikoTHREELights).Ambient(color,intensity);hemisphereLight=(skyColor,groundColor,intensity,helper=true)=>(new ZikoTHREELights).Hemisphere(skyColor,groundColor,intensity,helper);directionalLight=(color,intensity,helper=true)=>(new ZikoTHREELights).Directional(color,intensity,helper);pointLight=(color,intensity,helper=true)=>(new ZikoTHREELights).Point(color,intensity,helper);class ZikoTHREEScene extends Ziko.UI._ZikoUIElement{constructor({background="#2222ee"}={}){super();this.element=document.createElement("div");this.canvas=document.createElement("canvas");this.element.appendChild(this.canvas);const canvas=this.canvas;this.rendererGl=new THREE.WebGLRenderer({canvas:canvas});this.camera=new THREE.PerspectiveCamera(75,this.element.clientWidth/this.element.clientHeight,.1,1e3);this.camera.position.z=10;this.sceneGl=new THREE.Scene;this.orbit=new THREE.OrbitControls(this.camera,this.rendererGl.domElement);this.orbit.addEventListener("change",()=>{if(this.control.orbit)this.renderGl()});this.transform=new TransformControls(this.camera,this.rendererGl.domElement);this.transform.addEventListener("change",()=>this.renderGl());this.transform.addEventListener("dragging-changed",event=>{this.orbit.enabled=!event.value;console.log(this.orbit.enabled)});this.control={orbit:false,transform:false};this.background(background);this.renderGl();this.render();window.addEventListener("resize",()=>{this.setSize();console.log(111)});this.canvas.addEventListener("pointerenter",()=>this.orbitEnabled(true));this.canvas.addEventListener("pointerout",()=>this.orbitEnabled(false))}size(w="100%",h="100%",{target,maskVector}={}){this.style({width:w,height:h},{target:target,maskVector:maskVector});setTimeout(()=>this.setSize(),100);return this}setSize(){console.log(2);this.camera.aspect=this.element.clientWidth/this.element.clientHeight;this.camera.updateProjectionMatrix();this.rendererGl.setSize(this.element.clientWidth,this.element.clientHeight);this.renderGl();return this}renderGl(){this.rendererGl.render(this.sceneGl,this.camera);return this}addGl(...obj){obj.map((n,i)=>this.sceneGl.add(obj[i].mesh));this.renderGl();if(obj.length===1)return obj[0];return obj}removeGl(...obj){obj.map((n,i)=>this.sceneGl.remove(obj[i].mesh));this.renderGl();return this}orbitOn(){this.control.orbit=true;return this}orbitOff(){this.control.orbit=false;return this}orbitEnabled(bool=true){this.orbit.enabled=bool;return this}toggleOrbit(){this.control.orbit=!this.control.orbit;this.orbit.enabled=!this.control.orbit.enabled;return this}transformOn(){this.control.transform=true;return this}transformOff(){this.control.transform=false;return this}toggleTransform(){this.control.transform=!this.control.transform;return this}sceneTranslate({x=0,y=0,z=0}={}){this.sceneGl.translateX(x);this.sceneGl.translateY(y);this.sceneGl.translateZ(z);this.renderGl();return this}sceneRotate({x=0,y=0,z=0}={}){this.sceneGl.rotateX(x);this.sceneGl.rotateY(y);this.sceneGl.rotateZ(z);this.renderGl();return this}sceneTranslateX(x){this.sceneGl.translateX(x);this.renderGl();return this}sceneTranslateY(y){this.sceneGl.translateY(y);this.renderGl();return this}sceneTranslateZ(z){this.sceneGl.translateZ(z);this.renderGl();return this}sceneRotateX(teta){this.sceneGl.rotateX(teta);this.renderGl();return this}sceneRotateY(phi){this.sceneGl.rotateY(phi);this.renderGl();return this}sceneRotateZ(psi){this.sceneGl.rotateZ(psi);this.renderGl();return this}background(texture){if(typeof texture==="string"){if(texture[0]==="#")this.sceneGl.background=new THREE.Color(texture);else if(texture.slice(0,4)==="http"){this.sceneGl.background=_ZikoTHREETextureLoader(texture);console.log(1)}}else if(texture instanceof Ziko.UI._ZikoUIElement&&texture.element.nodeName==="CANVAS"){console.log(1);this.mapCanvas2Scene(texture)}else this.sceneGl.background=Image2Texture(texture);return this}mapCanvas2Scene(Canvas){this.sceneGl.background=Canvas2Texture(Canvas);this.renderGl();return this}clear(n=0){this.sceneGl.children.length=n;this.renderGl();return this}async im(){}toImage(){let image=document.createElement("img");this.renderGl();this.canvas.toBlob(function(blob){var url=URL.createObjectURL(blob);image.addEventListener("onload",()=>URL.revokeObjectURL(url));image.src=url});return image}setTransform(obj,mode="translate"){this.transform.setMode(mode);this.transform.attach(obj.mesh);this.sceneGl.add(this.transform);this.renderGl();return this}removeTransform(){this.scene.remove(this.transform);return this}}class _ZikoTHREECss3D extends ZikoTHREEScene{constructor(w=100,h=100){super();this.mouseDown=false;let canvas=this.canvas;this.objects=[];this.camera.position.set(0,0,100);this.sceneCss=new THREE.Scene;this.rendererCss=new THREE.CSS3DRenderer;this.orbit=new THREE.OrbitControls(this.camera,this.rendererCss.domElement);this.orbit.addEventListener("change",()=>{if(this.control.orbit)this.renderGl().renderCss()});this.transform=new TransformControls(this.camera,this.rendererCss.domElement);this.transform.addEventListener("change",()=>this.renderGl().renderCss());this.transform.addEventListener("dragging-changed",event=>{this.orbit.enabled=!event.value;console.log(this.orbit.enabled)});style(canvas,{position:"absolute"});this.rendererCss.domElement.appendChild(this.rendererGl.domElement);this.element.appendChild(this.canvas);this.element.appendChild(this.rendererCss.domElement);this.style({cursor:"pointer",border:"1px darkcyan solid"})}setSize(){this.camera.aspect=this.element.clientWidth/this.element.clientHeight;this.camera.updateProjectionMatrix();this.rendererGl.setSize(this.element.clientWidth,this.element.clientHeight);this.rendererCss.setSize(this.element.clientWidth,this.element.clientHeight);this.renderGl();this.renderCss();return this}renderCss(){this.rendererCss.render(this.sceneCss,this.camera);return this}addCss(element){if(element instanceof Ziko.UI._ZikoUIElement){element=Object3DFromElement(element)}this.sceneCss.add(element.mesh);this.renderCss();this.objects.push(element.mesh);return element}add(...element){for(let i=0;i<element.length;i++){if(element[i]instanceof Ziko.UI._ZikoUIElement)element[i]=this.addCss(element[i]);else if(element[i]instanceof _ZikoTHREEMesh)element[i]=this.addGl(element[i])}if(element.length==1)return element[0];return element}removeCss(element){return this}translation(obj){this.setTransform(obj);return this}rotation(obj){this.setTransform(obj,"rotate");return this}scale(obj){this.setTransform(obj,"scale");return this}removeTransform(){this.sceneGl.remove(this.transform);return this}grid(n=1e3,m=20,plan="xy"){let gridHelper=new THREE.GridHelper(n,m,238,16729190);switch(plan){case"xy":gridHelper.rotation.x=PI/2;break;case"xz":gridHelper.rotation.y=PI/2;break;case"yz":gridHelper.rotation.z=PI/2;break}this.sceneGl.add(gridHelper);this.renderGl();return this}}var Scene3D=(w="50%",h="100px")=>(new ZikoTHREEScene).size(w,h);var Css3D=(w="50%",h="100px")=>(new _ZikoTHREECss3D).size(w,h);Object.assign(Ziko.THREE,{Scene3D:Scene3D,Css3D:Css3D,groupe:groupe,plan:plan,cube:cube,cuboid:cuboid,sphere:sphere,cone:cone,torus:torus,torusKnot:torusKnot,tetradron:tetradron,dodecahedron:dodecahedron,icosahedron:dodecahedron,gridH:gridH,polarH:polarH,text3d:text3d,ambientLight:ambientLight,hemisphereLight:hemisphereLight,directionalLight:directionalLight,pointLight:pointLight,Video2Texture:Video2Texture,Object3DFromElement:Object3DFromElement,ExtractAll:function(){for(let i=0;i<Object.keys(Ziko.THREE).length;i++){window[Object.keys(Ziko.THREE)[i]]=Object.values(Ziko.THREE)[i]}return this},RemoveAll:function(){for(let i=0;i<Object.keys(Ziko.THREE).length;i++)delete window[Object.keys(Ziko.THREE)[i]];return this}})}})();
